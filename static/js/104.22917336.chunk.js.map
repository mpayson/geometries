{"version":3,"sources":["../node_modules/@arcgis/core/layers/UnknownLayer.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"names":["u","r","resourceInfo","type","this","addResolvingPromise","t","o","p","layerType","e","s","c","n","i","readOnly","prototype","json","read","value","a","_propertyOriginMap","Map","_originStores","Array","_values","forEach","set","has","get","keys","delete","metadatas","store","Object","internalGet","originIdOf","originOf","propertyInvalidated","revert","propertyCommitted","f","l","setAtOrigin","write","toJSON","isDefaultToJSON","O","getLogger","d","arguments","resourceReferences","portalItem","paths","destroy","_get","removeOrigin","_set","itemId","id","portal","load","instance","supportedTypes","validateItem","supportsData","warn","title","layer","m","getDefault","restUrl","messages","push","String"],"mappings":"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","file":"static/js/104.22917336.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import s from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{create as t}from\"../core/promiseUtils.js\";import{schedule as p}from\"../core/scheduling.js\";import i from\"./Layer.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{PortalLayer as c}from\"./mixins/PortalLayer.js\";let u=class extends(c(n(i))){constructor(r){super(r),this.resourceInfo=null,this.type=\"unknown\"}initialize(){this.addResolvingPromise(t(((r,o)=>{p((()=>{const r=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let e=\"Unknown layer type\";r&&(e+=\" \"+r),o(new s(\"layer:unknown-layer-type\",e,{layerType:r}))}))})))}read(r,o){super.read({resourceInfo:r},o)}write(){return null}};r([o({readOnly:!0})],u.prototype,\"resourceInfo\",void 0),r([o({type:[\"show\",\"hide\"]})],u.prototype,\"listMode\",void 0),r([o({json:{read:!1},readOnly:!0,value:\"unknown\"})],u.prototype,\"type\",void 0),u=r([e(\"esri.layers.UnknownLayer\")],u);var a=u;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{assumeNonNull as t}from\"./maybe.js\";import{getProperties as e}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import n from\"./Accessor.js\";import{read as c}from\"./accessorSupport/read.js\";import p from\"./accessorSupport/MultiOriginStore.js\";const a=n=>{let a=class extends n{constructor(...r){super(...r);const s=t(e(this)),o=s.metadatas,i=s.store,n=new p;s.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{s.internalGet(r)&&n.set(r,s.internalGet(r),0)}))}read(r,t){c(this,r,t)}getAtOrigin(r,t){const e=u(this),s=i(t);if(\"string\"==typeof r)return e.get(r,s);const o={};return r.forEach((r=>{o[r]=e.get(r,s)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),o=i(t),n=e(this);let c;c=\"string\"==typeof r?\"*\"===r?s.keys(o):[r]:r,c.forEach((r=>{n.propertyInvalidated(r),s.revert(r,o),n.propertyCommitted(r)}))}};return a=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return e(r).store}let f=class extends(a(n)){};f=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{getProperties as t}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import i from\"./Accessor.js\";import{write as c}from\"./accessorSupport/write.js\";import{ReadOnlyMultiOriginJSONMixin as n}from\"./ReadOnlyMultiOriginJSONSupport.js\";const p=i=>{let n=class extends i{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,s,o){t(this).setAtOrigin(r,s,e(o))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const r of o)t.originOf(r)===s&&t.set(r,t.get(r,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let t=i+1;t<o;++t)s.delete(r,t);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return n=r([s(\"esri.core.WriteableMultiOriginJSONSupport\")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function u(r){return t(r).store}const l=t=>{let e=class extends(p(n(t))){constructor(...r){super(...r)}};return e=r([s(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(i)){};O=r([s(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import i from\"../../core/Error.js\";import{hasSamePortal as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as l}from\"../../core/promiseUtils.js\";import m from\"../../portal/Portal.js\";import c from\"../../portal/PortalItem.js\";const n=r.getLogger(\"esri.layers.mixins.PortalLayer\"),d=r=>{let d=class extends r{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,r,e){if(r.itemId)return new c({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import(\"../../portal/support/layersLoader.js\");return l(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(t){throw n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${t}`),t}}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const e=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.getDefault());return e&&o&&!p(o.restUrl,e.restUrl)?(r.messages&&r.messages.push(new i(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return t([e({type:c})],d.prototype,\"portalItem\",null),t([o(\"web-document\",\"portalItem\",[\"itemId\"])],d.prototype,\"readPortalItem\",null),t([a(\"web-document\",\"portalItem\",{itemId:{type:String}})],d.prototype,\"writePortalItem\",null),t([e()],d.prototype,\"resourceReferences\",void 0),d=t([s(\"esri.layers.mixins.PortalLayer\")],d),d};export{d as PortalLayer};\n"],"sourceRoot":""}