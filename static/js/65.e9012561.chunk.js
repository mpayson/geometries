(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[65,70],{792:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return j})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return b}));r(13);var i=r(4),a=r(110),n=r(150),o=r(118),s=r(231),l=r(798),c=o.a.fromJSON(l.a),u=a.a.fromJSON(l.c),p=n.a.fromJSON(l.b),d=s.a.fromJSON(l.d);function b(e){if(Object(i.h)(e))return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return c;case"polyline":return u;case"polygon":case"extent":return p}return null}var y=o.a.fromJSON(l.e),f=a.a.fromJSON(l.g),j=n.a.fromJSON(l.f)},793:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(5),s=r(6),l=r(0),c=(r(13),r(24)),u=(r(14),r(15),r(1)),p=r(50),d=r(62),b=r(8),y=r(47),f=(r(11),r(19),r(20),r(28)),j=r(149),v=r(805),O=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).expression=null,e.title=null,e.value=null,e}return Object(n.a)(r,[{key:"readExpression",value:function(e,t){return t.value?Object(v.a)(t.value):e}},{key:"writeExpression",value:function(e,t,r){null!=this.value&&(e=Object(v.a)(this.value)),t[r]=e}},{key:"clone",value:function(){return new i({expression:this.expression,title:this.title,value:this.value})}}]),r}(f.a);Object(l.a)([Object(u.b)({type:String,json:{write:{allowNull:!0}}})],O.prototype,"expression",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],O.prototype,"title",void 0),Object(l.a)([Object(u.b)({json:{read:!1,write:!1}})],O.prototype,"value",void 0),Object(l.a)([Object(d.a)("expression",["expression","value"])],O.prototype,"readExpression",null),Object(l.a)([Object(y.a)("expression")],O.prototype,"writeExpression",null);var h,m=O=i=Object(l.a)([Object(b.a)("esri.layers.support.LabelExpressionInfo")],O),w=r(792),g=new p.a({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e){return!e||"service"!==e.origin&&!(e.layer&&"map-image"===e.layer.type)}var S=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).type="label",i.name=null,i.deconflictionStrategy="static",i.labelExpression=null,i.labelExpressionInfo=null,i.labelPlacement=null,i.maxScale=0,i.minScale=0,i.symbol=w.a,i.useCodedValues=void 0,i.where=null,i}return Object(n.a)(r,[{key:"readLabelExpression",value:function(e,t){var r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}},{key:"writeLabelExpression",value:function(e,t,r,i){if(this.labelExpressionInfo&&(x(i)||i&&"service"===i.origin))if(null!=this.labelExpressionInfo.value)e=Object(v.f)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var a=Object(v.e)(this.labelExpressionInfo.expression);a&&(e="["+a+"]")}null!=e&&(t[r]=e)}},{key:"writeLabelExpressionInfo",value:function(e,t,r,i){if(null==e&&null!=this.labelExpression&&x(i))e=new m({expression:this.getLabelExpressionArcade()});else if(!e)return;var a=e.toJSON(i);a.expression&&(t[r]=a)}},{key:"writeMaxScale",value:function(e,t){(e||this.minScale)&&(t.maxScale=e)}},{key:"writeMinScale",value:function(e,t){(e||this.maxScale)&&(t.minScale=e)}},{key:"getLabelExpression",value:function(){return Object(v.b)(this)}},{key:"getLabelExpressionArcade",value:function(){return Object(v.c)(this)}},{key:"getLabelExpressionSingleField",value:function(){return Object(v.d)(this)}},{key:"hash",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){return new h({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Object(c.a)(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:Object(c.a)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}}],[{key:"evaluateWhere",value:function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){var a=r(t[i[0]],i[1],i[2]),n=i[3],o=r(t[i[4]],i[5],i[6]);switch(n){case"AND":return a&&o;case"OR":return a||o}}return!1}catch(t){console.log("Error.: can't parse = "+e)}}}]),r}(f.a);Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],S.prototype,"name",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],S.prototype,"deconflictionStrategy",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:{allowNull:!0}}})],S.prototype,"labelExpression",void 0),Object(l.a)([Object(d.a)("labelExpression")],S.prototype,"readLabelExpression",null),Object(l.a)([Object(y.a)("labelExpression")],S.prototype,"writeLabelExpression",null),Object(l.a)([Object(u.b)({type:m,json:{write:{overridePolicy:function(e,t,r){return x(r)?{allowNull:!0}:{enabled:!1}}}}})],S.prototype,"labelExpressionInfo",void 0),Object(l.a)([Object(y.a)("labelExpressionInfo")],S.prototype,"writeLabelExpressionInfo",null),Object(l.a)([Object(u.b)({type:g.apiValues,json:{type:g.jsonValues,read:g.read,write:g.write}})],S.prototype,"labelPlacement",void 0),Object(l.a)([Object(u.b)({type:Number})],S.prototype,"maxScale",void 0),Object(l.a)([Object(y.a)("maxScale")],S.prototype,"writeMaxScale",null),Object(l.a)([Object(u.b)({type:Number})],S.prototype,"minScale",void 0),Object(l.a)([Object(y.a)("minScale")],S.prototype,"writeMinScale",null),Object(l.a)([Object(u.b)({types:j.d,json:{origins:{"web-scene":{types:j.g,write:j.j,default:null}},write:j.j,default:null}})],S.prototype,"symbol",void 0),Object(l.a)([Object(u.b)({type:Boolean,json:{write:!0}})],S.prototype,"useCodedValues",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],S.prototype,"where",void 0);var F=S=h=Object(l.a)([Object(b.a)("esri.layers.support.LabelClass")],S);t.a=F},794:function(e,t,r){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||n(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}))},797:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(5),s=r(6),l=r(0),c=(r(13),r(14),r(15),r(1)),u=r(8),p=(r(11),r(19),r(20),r(28)),d=r(173),b=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).value=0,i.unit="milliseconds",i}return Object(n.a)(r,[{key:"toMilliseconds",value:function(){return this.value*d.b[this.unit]}},{key:"clone",value:function(){return new i({value:this.value,unit:this.unit})}}]),r}(p.a);Object(l.a)([Object(c.b)({type:Number,json:{write:!0},nonNullable:!0})],b.prototype,"value",void 0),Object(l.a)([Object(c.b)({type:d.d.apiValues,json:{type:d.d.jsonValues,read:d.d.read,write:d.d.write},nonNullable:!0})],b.prototype,"unit",void 0);var y=b=i=Object(l.a)([Object(u.a)("esri.TimeInterval")],b);t.a=y},800:function(e,t,r){"use strict";var i=r(2),a=r(5),n=r(6),o=r(0),s=(r(13),r(14),r(15),r(1)),l=r(8),c=(r(11),r(19),r(20),function(e){Object(a.a)(r,e);var t=Object(n.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).type=null,e}return r}(r(28).a));Object(o.a)([Object(s.b)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);var u=c=Object(o.a)([Object(l.a)("esri.layers.support.FeatureReduction")],c);t.a=u},801:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(2),a=r(3),n=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15),r(1)),c=r(8),u=(r(11),r(19),r(20),function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).refreshInterval=0,e}return Object(a.a)(r,[{key:"refresh",value:function(){this.emit("refresh")}}]),r}(e);return Object(s.a)([Object(l.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(s.a)([Object(c.a)("esri.layers.mixins.RefreshableLayer")],t)})},805:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return l}));var i=r(108),a=new RegExp("__begin__","ig"),n=new RegExp("__end__","ig"),o=new RegExp("^__begin__","i"),s=new RegExp("__end__$","i");function l(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function c(e){var t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(e.labelExpression),t.type="conventional"),t}function u(e){var t=c(e);if(!t)return null;switch(t.type){case"conventional":return d(t.expression);case"arcade":return t.expression}return null}function p(e){var t=c(e);if(!t)return null;switch(t.type){case"conventional":return function(e){var t=e.match(b);return t&&t[1].trim()||null}(t.expression);case"arcade":return v(t.expression)}return null}function d(e){var t;return e?(t=Object(i.c)(e,(function(e){return'__begin__$feature["'+e+'"]__end__'})),t=o.test(t)?t.replace(o,""):'"'+t,t=(t=s.test(t)?t.replace(s,""):t+'"').replace(a,'" + ').replace(n,' + "')):t='""',t}var b=/^\s*\{([^}]+)\}\s*$/i;var y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,f=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,j=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function v(e){if(!e)return null;var t=y.exec(e)||f.exec(e);return t?t[1]||t[3]:(t=j.exec(e))?t[2]:null}},807:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(5),s=r(6),l=r(0),c=(r(13),r(24)),u=(r(14),r(15),r(1)),p=r(62),d=r(8),b=r(47),y=(r(11),r(19),r(20),r(28)),f=r(173),j=r(303),v=r(797),O=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).respectsDaylightSaving=!1,i.timezone=null,i}return Object(n.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new i({respectsDaylightSaving:e,timezone:t})}}]),r}(y.a);Object(l.a)([Object(u.b)({type:Boolean,json:{write:!0}})],O.prototype,"respectsDaylightSaving",void 0),Object(l.a)([Object(p.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],O.prototype,"readRespectsDaylightSaving",null),Object(l.a)([Object(u.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],O.prototype,"timezone",void 0);var h,m=O=i=Object(l.a)([Object(d.a)("esri.layers.support.TimeReference")],O),w=h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).cumulative=!1,i.endField=null,i.fullTimeExtent=null,i.hasLiveData=!1,i.interval=null,i.startField=null,i.timeReference=null,i.trackIdField=null,i.useTime=!0,i}return Object(n.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new j.a({start:r,end:i})}},{key:"writeFullTimeExtent",value:function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new v.a({value:t.timeInterval,unit:f.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new v.a({value:t.defaultTimeInterval,unit:f.d.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,i=this.interval,a=this.startField,n=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,l=this.useTime;return new h({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:a,timeReference:Object(c.a)(n),fullTimeExtent:Object(c.a)(o),trackIdField:s,useTime:l})}}]),r}(y.a);Object(l.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],w.prototype,"cumulative",void 0),Object(l.a)([Object(u.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],w.prototype,"endField",void 0),Object(l.a)([Object(u.b)({type:j.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"fullTimeExtent",void 0),Object(l.a)([Object(p.a)("fullTimeExtent",["timeExtent"])],w.prototype,"readFullTimeExtent",null),Object(l.a)([Object(b.a)("fullTimeExtent")],w.prototype,"writeFullTimeExtent",null),Object(l.a)([Object(u.b)({type:Boolean,json:{write:!0}})],w.prototype,"hasLiveData",void 0),Object(l.a)([Object(u.b)({type:v.a,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"interval",void 0),Object(l.a)([Object(p.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],w.prototype,"readInterval",null),Object(l.a)([Object(b.a)("interval")],w.prototype,"writeInterval",null),Object(l.a)([Object(u.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],w.prototype,"startField",void 0),Object(l.a)([Object(u.b)({type:m,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"timeReference",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],w.prototype,"trackIdField",void 0),Object(l.a)([Object(u.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],w.prototype,"useTime",void 0);var g=w=h=Object(l.a)([Object(d.a)("esri.layers.support.TimeInfo")],w);t.a=g},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(157),a=(r(130),r(213)),n=(r(307),r(308)),o=r(214),s=r(215),l=(r(216),r(178),r(275)),c=["oid","global-id"],u=["oid","global-id","guid"];function p(e,t){var r=e.displayField,n=e.editFieldsInfo,o=e.fields,c=e.objectIdField,u=e.title;if(!o)return null;var p=v({editFieldsInfo:n,fields:o,objectIdField:c},t);if(!p.length)return null;var d=function(e){var t=Object(i.l)(e),r=e.titleBase;return t?"".concat(r,": {").concat(t.trim(),"}"):r}({titleBase:u,fields:o,displayField:r}),b=[new s.a,new a.a];return new l.a({title:d,content:b,fieldInfos:p})}var d=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],b=function(e,t){var r=t.editFieldsInfo,i=t.objectIdField,a=t.visibleFieldNames;return a?a.has(e.name):!f(e.name,r)&&(!i||e.name!==i)&&!(c.indexOf(e.type)>-1)&&!d.some((function(t){return t.test(e.name)}))};function y(e,t){return"oid"===e.type?-1:"oid"===t.type?1:h(e)?-1:h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function f(e,t){if(!e||!t)return!1;var r=t.creationDateField,i=t.creatorField,a=t.editDateField,n=t.editorField;return-1!==[r&&r.toLowerCase(),i&&i.toLowerCase(),a&&a.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())}function j(e,t){return e.editable&&-1===u.indexOf(e.type)&&!f(e.name,t)}function v(e,t){var r=e.editFieldsInfo,i=e.fields,a=e.objectIdField;return function(e,t){var r=e;return t&&(e=e.filter((function(e){return-1===t.indexOf(e.type)}))),e===r&&(e=e.slice()),e.sort(y),e}(i,(null==t?void 0:t.ignoreFieldTypes)||m).map((function(e){return new o.a({fieldName:e.name,isEditable:j(e,r),label:e.alias,format:O(e),visible:b(e,{editFieldsInfo:r,objectIdField:a,visibleFieldNames:null==t?void 0:t.visibleFieldNames})})}))}function O(e){switch(e.type){case"small-integer":case"integer":case"single":return new n.a({digitSeparator:!0,places:0});case"double":return new n.a({digitSeparator:!0,places:2});case"date":return new n.a({dateFormat:"long-month-day-year"});default:return null}}function h(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}var m=["geometry","blob","raster","guid","xml"]},816:function(e,t,r){"use strict";var i=r(2),a=r(3),n=r(5),o=r(6),s=r(0),l=(r(13),r(24)),c=(r(14),r(15),r(1)),u=r(50),p=r(8),d=r(47),b=(r(11),r(19),r(20),r(28)),y=new u.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"}),f=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).name=null,a.description=null,a.drawingTool=null,a.prototype=null,a.thumbnail=null,a}return Object(a.a)(r,[{key:"writeDrawingTool",value:function(e,t){t.drawingTool=y.toJSON(e)}},{key:"writePrototype",value:function(e,t){t.prototype=Object(l.c)(Object(l.a)(e),!0)}},{key:"writeThumbnail",value:function(e,t){t.thumbnail=Object(l.c)(Object(l.a)(e))}}]),r}(b.a);Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"name",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"description",void 0),Object(s.a)([Object(c.b)({json:{read:y.read,write:y.write}})],f.prototype,"drawingTool",void 0),Object(s.a)([Object(d.a)("drawingTool")],f.prototype,"writeDrawingTool",null),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"prototype",void 0),Object(s.a)([Object(d.a)("prototype")],f.prototype,"writePrototype",null),Object(s.a)([Object(c.b)({json:{write:!0}})],f.prototype,"thumbnail",void 0),Object(s.a)([Object(d.a)("thumbnail")],f.prototype,"writeThumbnail",null);var j=f=Object(s.a)([Object(p.a)("esri.layers.support.FeatureTemplate")],f);t.a=j},817:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(5),s=r(6),l=r(0),c=(r(13),r(14),r(15),r(1)),u=r(8),p=(r(11),r(19),r(20),r(800)),d=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).type="selection",i}return Object(n.a)(r,[{key:"clone",value:function(){return new i}}]),r}(p.a);Object(l.a)([Object(c.b)({type:["selection"]})],d.prototype,"type",void 0);var b=d=i=Object(l.a)([Object(u.a)("esri.layers.support.FeatureReductionSelection")],d);t.a=b},818:function(e,t,r){"use strict";var i,a=r(2),n=r(3),o=r(5),s=r(6),l=r(0),c=(r(13),r(24)),u=(r(14),r(15),r(1)),p=r(8),d=(r(11),r(19),r(20),r(28)),b=r(275),y=r(36),f=r(787),j=i=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).statisticType=null,e.onStatisticField=null,e.onStatisticValueExpression=null,e}return Object(n.a)(r,[{key:"clone",value:function(){return new i({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}}]),r}(d.a);Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],j.prototype,"statisticType",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],j.prototype,"onStatisticField",void 0),Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],j.prototype,"onStatisticValueExpression",void 0);var v,O=j=i=Object(l.a)([Object(p.a)("esri.layers.support.OutStatistic")],j),h=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).name=null,e}return Object(n.a)(r,[{key:"clone",value:function(){return new v({name:this.name,outStatistic:this.outStatistic.clone()})}}]),r}(d.a);Object(l.a)([Object(u.b)({type:String,json:{write:!0}})],h.prototype,"name",void 0),Object(l.a)([Object(u.b)({type:O,json:{write:!0}})],h.prototype,"outStatistic",void 0);var m,w=h=v=Object(l.a)([Object(p.a)("esri.layers.support.AggregateField")],h),g=r(793),x=m=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var i;return Object(a.a)(this,r),(i=t.call(this,e)).type="cluster",i.clusterRadius=Object(y.j)("80px"),i.clusterMinSize=Object(y.j)("12px"),i.clusterMaxSize=Object(y.j)("50px"),i.popupEnabled=!0,i.popupTemplate=null,i.labelingInfo=null,i.labelsVisible=!0,i.fields=null,i}return Object(n.a)(r,[{key:"clone",value:function(){return new m({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Object(c.a)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Object(c.a)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:Object(c.a)(this.popupTemplate)})}}]),r}(d.a);Object(l.a)([Object(u.b)({type:["cluster"],readOnly:!0,json:{write:!0}})],x.prototype,"type",void 0),Object(l.a)([Object(u.b)({type:Number,cast:function(e){return"auto"===e?e:Object(y.j)(e)},json:{write:!0}})],x.prototype,"clusterRadius",void 0),Object(l.a)([Object(u.b)({type:Number,cast:y.j,json:{write:!0}})],x.prototype,"clusterMinSize",void 0),Object(l.a)([Object(u.b)({type:Number,cast:y.j,json:{write:!0}})],x.prototype,"clusterMaxSize",void 0),Object(l.a)([Object(u.b)(f.g)],x.prototype,"popupEnabled",void 0),Object(l.a)([Object(u.b)({type:b.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],x.prototype,"popupTemplate",void 0),Object(l.a)([Object(u.b)({type:[g.a],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],x.prototype,"labelingInfo",void 0),Object(l.a)([Object(u.b)(f.c)],x.prototype,"labelsVisible",void 0),Object(l.a)([Object(u.b)({type:[w],json:{write:!0}})],x.prototype,"fields",void 0);var S=x=m=Object(l.a)([Object(p.a)("esri.layers.support.FeatureReductionCluster")],x);t.a=S},820:function(e,t,r){"use strict";r.d(t,"a",(function(){return S})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return v})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return f}));var i=r(12),a=r(32),n=r(174),o=r(4),s=r(14),l=r(52),c=r(76),u=r(304),p=r(794),d=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),b=new c.a,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function j(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.ColorVariable"===i.declaredClass){var a="number"==typeof t,n=a?null:t,s=n&&n.attributes,c=a?t:null,u=i.field,p=i.cache,b=p.ipData,y=p.hasExpression,f=i.cache.compiledFunc;if(!u&&!y){var j=i.stops;return j&&j[0]&&j[0].color}if("number"!=typeof c)if(y){if(!Object(o.i)(r)||!Object(o.i)(r.arcade))return void d.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,h=O.getViewInfo(v),m=O.createExecContext(n,h);if(!f){var w=O.createSyntaxTree(i.valueExpression);f=O.createFunction(w),i.cache.compiledFunc=f}c=O.executeFunction(f,m)}else s&&(c=s[u]);var g=i.normalizationField,S=s?parseFloat(s[g]):void 0;if(null!=c&&(!g||a||!isNaN(S)&&0!==S)){isNaN(S)||a||(c/=S);var F=x(c,b);if(F){var E=F[0],I=F[1],k=E===I?i.stops[E].color:l.a.blendColors(i.stops[E].color,i.stops[I].color,F[2],Object(o.i)(r)?r.color:void 0);return new l.a(k)}}}else d.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function v(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.OpacityVariable"===i.declaredClass){var a="number"==typeof t,n=a?null:t,s=n&&n.attributes,l=a?t:null,c=i.field,u=i.cache,p=u.ipData,b=u.hasExpression,y=i.cache.compiledFunc;if(!c&&!b){var f=i.stops;return f&&f[0]&&f[0].opacity}if("number"!=typeof l)if(b){if(Object(o.h)(r)||Object(o.h)(r.arcade))return void d.error("Use of arcade expressions requires an arcade context");var j={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,O=v.getViewInfo(j),h=v.createExecContext(n,O);if(!y){var m=v.createSyntaxTree(i.valueExpression);y=v.createFunction(m),i.cache.compiledFunc=y}l=v.executeFunction(y,h)}else s&&(l=s[c]);var w=i.normalizationField,g=s?parseFloat(s[w]):void 0;if(null!=l&&(!w||a||!isNaN(g)&&0!==g)){isNaN(g)||a||(l/=g);var S=x(l,p);if(S){var F=S[0],E=S[1];if(F===E)return i.stops[F].opacity;var I=i.stops[F].opacity;return I+(i.stops[E].opacity-I)*S[2]}}}else d.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function O(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.RotationVariable"===i.declaredClass){var a=i.axis||"heading",n="heading"===a&&"arithmetic"===i.rotationType?90:0,s="heading"===a&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,u=i.field,p=i.cache.hasExpression,b=i.cache.compiledFunc,y=0;if(!u&&!p)return y;if(p){if(Object(o.h)(r)||Object(o.h)(r.arcade))return void d.error("Use of arcade expressions requires an arcade context");var f={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},j=r.arcade.arcadeUtils,v=j.getViewInfo(f),O=j.createExecContext(l,v);if(!b){var h=j.createSyntaxTree(i.valueExpression);b=j.createFunction(h),i.cache.compiledFunc=b}y=j.executeFunction(b,O)}else c&&(y=c[u]||0);return y="number"!=typeof y||isNaN(y)?null:n+s*y}d.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function h(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.SizeVariable"===i.declaredClass){var n=function(e,t,r,i,n){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(m(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){var i=e.stops,a=i&&i.length&&i[0].size;return null==a&&(a=e.minSize),m(a,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=m(t.minSize,r,i),s=m(t.maxSize,r,i),l=Object(o.i)(i)?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&l){var c="circle"===l,u=c?y*Math.pow(n/2,2):n*n,p=u+a*((c?y*Math.pow(s/2,2):s*s)-u);return c?2*Math.sqrt(p/y):Math.sqrt(p)}return n+a*(s-n)}(e,t,r,i);case"proportional":return function(e,t,r,i){var a=Object(o.i)(i)?i.shape:void 0,n=e/t.minDataValue,s=m(t.minSize,r,i),l=m(t.maxSize,r,i);return w("circle"===a?2*Math.sqrt(n*Math.pow(s/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(n*Math.pow(s,2)):n*s,s,l)}(e,t,r,i);case"stops":return function(e,t,r,i,n){var o=x(e,n),s=Object(a.a)(o,3),l=s[0],c=s[1],u=s[2];if(l===c)return m(t.stops[l].size,r,i);var p=m(t.stops[l].size,r,i);return p+(m(t.stops[c].size,r,i)-p)*u}(e,t,r,i,n);case"real-world-size":return function(e,t,r,i){var a=(Object(o.i)(i)&&i.resolution?i.resolution:1)*u.a[t.valueUnit],n=m(t.minSize,r,i),s=m(t.maxSize,r,i),l=t.valueRepresentation;return w("area"===l?2*Math.sqrt(e/y)/a:"radius"===l||"distance"===l?2*e/a:e/a,n,s)}(e,t,r,i);case"identity":return e;case"unknown":return null}}(function(e,t,r){var i="number"==typeof t,a=i?null:t,n=a&&a.attributes,s=i?t:null,l=e.cache.isScaleDriven,c=e.cache.compiledFunc;if(l){var u=Object(o.i)(r)?r.scale:void 0,b=Object(o.i)(r)?r.view:void 0;s=null==u||"3d"===b?function(e){var t=null,r=null,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!i)switch(e.inputValueType){case"expression":if(Object(o.h)(r)||Object(o.h)(r.arcade))return void d.error("Use of arcade expressions requires an arcade context");var y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,j=f.getViewInfo(y),v=f.createExecContext(a,j);if(!c){var O=f.createSyntaxTree(e.valueExpression);c=f.createFunction(O),e.cache.compiledFunc=c}s=f.executeFunction(c,v);break;case"field":n&&(s=n[e.field]);break;case"unknown":s=null}if(!Object(p.d)(s))return null;if(i||!e.normalizationField)return s;var h=n?parseFloat(n[e.normalizationField]):null;return Object(p.d)(h)&&0!==h?s/h:null}(i,t,r),i,t,r,i.cache.ipData);return null==n||isNaN(n)?0:n}d.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(p.c)(e)?h(e,t,r):Object(p.d)(e)?e:null}function w(e,t,r){return Object(p.d)(r)&&e>r?r:Object(p.d)(t)&&e<t?t:e}function g(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var i={scale:t,view:r},a=m(e.minSize,b,i),n=m(e.maxSize,b,i);if(null!=a||null!=n){if(a>n){var o=n;n=a,a=o}return{minSize:a,maxSize:n}}}function x(e,t){if(t){var r=0,i=t.length-1;return t.some((function(t,a){return e<t?(i=a,!0):(r=a,!1)})),[r,i,(e-t[r])/(t[i]-t[r])]}}function S(e,t,r){var a,o=["proportional","proportional","proportional"],s=Object(i.a)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=l.useSymbolValue?"symbol-value":h(l,t,r);switch(l.axis){case"width":o[0]=c;break;case"depth":o[1]=c;break;case"height":o[2]=c;break;case"width-and-depth":o[0]=c,o[1]=c;break;case"all":case void 0:case null:o[0]=c,o[1]=c,o[2]=c;break;default:Object(n.a)(l.axis)}}}catch(u){s.e(u)}finally{s.f()}return o}},825:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i=r(2),a=r(3),n=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15),r(1)),c=r(62),u=r(8),p=(r(11),r(19),r(20),r(157)),d=r(173),b=r(303),y=r(797),f=r(807);var j=function(e){var t=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(a.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var i=r.timeOffset,a=d.d.fromJSON(r.timeOffsetUnits);return i&&a?new y.a({value:i,unit:a}):null}},{key:"timeInfo",set:function(e){Object(p.k)(e,this.fields),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(l.b)({type:b.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(l.b)({type:y.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(c.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(l.b)({value:null,type:f.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(l.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.TemporalLayer")],t),t}},826:function(e,t,r){"use strict";r.r(t);var i,a=r(12),n=r(10),o=r.n(n),s=r(21),l=r(9),c=r(2),u=r(3),p=r(60),d=r(55),b=r(5),y=r(6),f=r(0),j=r(13),v=r(99),O=r(4),h=r(14),m=r(1),w=r(72),g=r(50),x=r(62),S=r(232),F=r(8),E=r(47),I=r(23),k=r(11),T=(r(19),r(20),r(16)),D=r(44),R=r(61),_=r(40),C=r(157),M=r(275),L=r(81),A=r(149),N=r(56),P=r(242),V=r(795),q=r(384),z=r(233),G=r(787),J=r(809),B=(r(813),r(823),r(832)),Q=(r(862),r(873),r(874),r(861)),U=r(870),W=r(869),$=r(790),Z=r(24),H=r(28),K=r(15),X=i=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).expression=null,i.name=null,i.returnType="boolean",i.title=null,i}return Object(u.a)(r,[{key:"clone",value:function(){return new i({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}}]),r}(H.a);Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],X.prototype,"expression",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],X.prototype,"name",void 0),Object(f.a)([Object(m.b)({type:["boolean"],json:{write:!0}})],X.prototype,"returnType",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],X.prototype,"title",void 0);var Y,ee=X=i=Object(f.a)([Object(F.a)("esri.form.ExpressionInfo")],X),te=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type=null,i}return r}(function(e){var t=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.apply(this,arguments)).description=null,e.label=null,e.visibilityExpression=null,e}return r}(e);return Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],t.prototype,"description",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],t.prototype,"label",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],t.prototype,"visibilityExpression",void 0),t=Object(f.a)([Object(F.a)("esri.form.elements.ElementMixin")],t),t}(H.a));Object(f.a)([Object(m.b)()],te.prototype,"type",void 0),te=Object(f.a)([Object(F.a)("esri.form.elements.Element")],te);var re=Y=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type=null,i}return Object(u.a)(r,[{key:"clone",value:function(){return new Y({type:this.type})}}]),r}(H.a);Object(f.a)([Object(m.b)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],re.prototype,"type",void 0);var ie,ae=re=Y=Object(f.a)([Object(F.a)("esri.form.elements.inputs.AttachmentInput")],re),ne=ie=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).attachmentKeyword=null,i.editable=!0,i.input=null,i.type="attachment",i}return Object(u.a)(r,[{key:"clone",value:function(){return new ie({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(te);Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],ne.prototype,"attachmentKeyword",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{default:!0,write:!0}})],ne.prototype,"editable",void 0),Object(f.a)([Object(m.b)({type:ae,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ne.prototype,"input",void 0),Object(f.a)([Object(m.b)({type:["attachment"],json:{read:!1,write:!0}})],ne.prototype,"type",void 0);var oe=ne=ie=Object(f.a)([Object(F.a)("esri.form.elements.AttachmentElement")],ne),se=r(212),le=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type=null,i}return r}(H.a);Object(f.a)([Object(m.b)()],le.prototype,"type",void 0);var ce,ue=le=Object(f.a)([Object(F.a)("esri.form.elements.inputs.Input")],le),pe=ce=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type="barcode-scanner",i}return Object(u.a)(r,[{key:"clone",value:function(){return new ce}}]),r}(ue);Object(f.a)([Object(m.b)({type:["barcode-scanner"],json:{read:!1,write:!0}})],pe.prototype,"type",void 0);var de,be=pe=ce=Object(f.a)([Object(F.a)("esri.form.elements.inputs.BarcodeScannerInput")],pe),ye=de=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type="combo-box",i}return Object(u.a)(r,[{key:"clone",value:function(){return new de}}]),r}(ue);Object(f.a)([Object(m.b)({type:["combo-box"],json:{read:!1,write:!0}})],ye.prototype,"type",void 0);var fe,je=ye=de=Object(f.a)([Object(F.a)("esri.form.elements.inputs.ComboBoxInput")],ye);function ve(e){return null!=e?new Date(e):null}function Oe(e){return e?e.getTime():null}var he=fe=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).includeTime=!1,i.max=null,i.min=null,i.type="datetime-picker",i}return Object(u.a)(r,[{key:"readMax",value:function(e,t){return ve(t.max)}},{key:"writeMax",value:function(e,t){t.max=Oe(e)}},{key:"readMin",value:function(e,t){return ve(t.min)}},{key:"writeMin",value:function(e,t){t.min=Oe(e)}},{key:"clone",value:function(){return new fe({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}}]),r}(ue);Object(f.a)([Object(m.b)({type:Boolean,json:{write:!0,default:!1}})],he.prototype,"includeTime",void 0),Object(f.a)([Object(m.b)({type:Date,json:{type:Number,write:!0}})],he.prototype,"max",void 0),Object(f.a)([Object(x.a)("max")],he.prototype,"readMax",null),Object(f.a)([Object(E.a)("max")],he.prototype,"writeMax",null),Object(f.a)([Object(m.b)({type:Date,json:{type:Number,write:!0}})],he.prototype,"min",void 0),Object(f.a)([Object(x.a)("min")],he.prototype,"readMin",null),Object(f.a)([Object(E.a)("min")],he.prototype,"writeMin",null),Object(f.a)([Object(m.b)({type:["datetime-picker"],json:{read:!1,write:!0}})],he.prototype,"type",void 0);var me,we=he=fe=Object(f.a)([Object(F.a)("esri.form.elements.inputs.DateTimePickerInput")],he),ge=me=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type="radio-buttons",i}return Object(u.a)(r,[{key:"clone",value:function(){return new me}}]),r}(ue);Object(f.a)([Object(m.b)({type:["radio-buttons"],json:{read:!1,write:!0}})],ge.prototype,"type",void 0);var xe,Se=ge=me=Object(f.a)([Object(F.a)("esri.form.elements.inputs.RadioButtonsInput")],ge),Fe=xe=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).maxLength=null,i.minLength=0,i.type=null,i}return Object(u.a)(r,[{key:"clone",value:function(){return new xe({maxLength:this.maxLength,minLength:this.minLength,type:this.type})}}]),r}(ue);Object(f.a)([Object(m.b)({type:Number,json:{write:!0}})],Fe.prototype,"maxLength",void 0),Object(f.a)([Object(m.b)({type:Number,json:{default:0,write:!0}})],Fe.prototype,"minLength",void 0),Object(f.a)([Object(m.b)()],Fe.prototype,"type",void 0);var Ee=Fe=xe=Object(f.a)([Object(F.a)("esri.form.elements.inputs.support.TextInput")],Fe),Ie=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type="text-area",i}return r}(Ee);Object(f.a)([Object(m.b)({type:["text-area"],json:{read:!1,write:!0}})],Ie.prototype,"type",void 0);var ke=Ie=Object(f.a)([Object(F.a)("esri.form.elements.inputs.TextAreaInput")],Ie),Te=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).type="text-box",i}return r}(Ee);Object(f.a)([Object(m.b)({type:["text-box"],json:{read:!1,write:!0}})],Te.prototype,"type",void 0);var De,Re={base:ue,key:"type",typeMap:{"barcode-scanner":be,"combo-box":je,"datetime-picker":we,"radio-buttons":Se,"text-area":ke,"text-box":Te=Object(f.a)([Object(F.a)("esri.form.elements.inputs.TextBoxInput")],Te)}},_e=De=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).domain=null,i.editable=!0,i.fieldName=null,i.hint=null,i.input=null,i.requiredExpression=null,i.type="field",i}return Object(u.a)(r,[{key:"clone",value:function(){return new De({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}}]),r}(te);Object(f.a)([Object(m.b)({types:se.d,json:{read:{reader:se.b},write:!0}})],_e.prototype,"domain",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{default:!0,write:!0}})],_e.prototype,"editable",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],_e.prototype,"fieldName",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],_e.prototype,"hint",void 0),Object(f.a)([Object(m.b)({types:Re,json:{read:{source:"inputType"},write:{target:"inputType"}}})],_e.prototype,"input",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],_e.prototype,"requiredExpression",void 0),Object(f.a)([Object(m.b)({type:String,json:{read:!1,write:!0}})],_e.prototype,"type",void 0);var Ce,Me=_e=De=Object(f.a)([Object(F.a)("esri.form.elements.FieldElement")],_e),Le=r(388),Ae=Ce=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).displayCount=null,i.displayType="list",i.editable=!0,i.orderByFields=null,i.relationshipId=null,i.type="relationship",i}return Object(u.a)(r,[{key:"clone",value:function(){return new Ce({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Object(Z.a)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}}]),r}(te);Object(f.a)([Object(m.b)({type:Number,json:{write:!0}})],Ae.prototype,"displayCount",void 0),Object(f.a)([Object(m.b)({type:["list"],json:{write:!0}})],Ae.prototype,"displayType",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{default:!0,write:!0}})],Ae.prototype,"editable",void 0),Object(f.a)([Object(m.b)({type:[Le.a],json:{write:!0}})],Ae.prototype,"orderByFields",void 0),Object(f.a)([Object(m.b)({type:Number,json:{write:!0}})],Ae.prototype,"relationshipId",void 0),Object(f.a)([Object(m.b)({type:["relationship"],json:{read:!1,write:!0}})],Ae.prototype,"type",void 0);var Ne,Pe=Ae=Ce=Object(f.a)([Object(F.a)("esri.form.elements.RelationshipElement")],Ae);function Ve(e){return{typesWithGroup:{base:te,key:"type",typeMap:{attachment:oe,field:Me,group:e,relationship:Pe}},typesWithoutGroup:{base:te,key:"type",typeMap:{attachment:oe,field:Me,relationship:Pe}}}}function qe(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return i[e.type]})).map((function(e){return i[e.type].fromJSON(e)}))}function ze(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return null;var i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((function(e){return i[e.type]})).map((function(e){return e.toJSON()}))}function Ge(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e?e.map((function(e){return Object(K.k)(r?t.typesWithGroup:t.typesWithoutGroup,e)})):null}var Je=Ne=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).elements=null,i.initialState="expanded",i.type="group",i}return Object(u.a)(r,[{key:"castElements",value:function(e){return Ge(e,Qe,!1)}},{key:"readElements",value:function(e,t){return qe(t.formElements,Qe,!1)}},{key:"writeElements",value:function(e,t){t.formElements=ze(e,Qe,!1)}},{key:"clone",value:function(){return new Ne({description:this.description,elements:Object(Z.a)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}}]),r}(te);Object(f.a)([Object(m.b)({json:{write:!0}})],Je.prototype,"elements",void 0),Object(f.a)([Object(w.a)("elements")],Je.prototype,"castElements",null),Object(f.a)([Object(x.a)("elements",["formElements"])],Je.prototype,"readElements",null),Object(f.a)([Object(E.a)("elements")],Je.prototype,"writeElements",null),Object(f.a)([Object(m.b)({type:["collapsed","expanded"],json:{default:"expanded",write:!0}})],Je.prototype,"initialState",void 0),Object(f.a)([Object(m.b)({type:String,json:{read:!1,write:!0}})],Je.prototype,"type",void 0);var Be,Qe=Ve(Je=Ne=Object(f.a)([Object(F.a)("esri.form.elements.GroupElement")],Je)),Ue=Ve(Je),We=Be=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).description=null,i.elements=null,i.expressionInfos=null,i.title=null,i}return Object(u.a)(r,[{key:"castElements",value:function(e){return Ge(e,Ue)}},{key:"readElements",value:function(e,t){return qe(t.formElements,Ue)}},{key:"writeElements",value:function(e,t){t.formElements=ze(e,Ue)}},{key:"clone",value:function(){return new Be({description:this.description,expressionInfos:Object(Z.a)(this.expressionInfos),elements:Object(Z.a)(this.elements),title:this.title})}}]),r}(H.a);Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],We.prototype,"description",void 0),Object(f.a)([Object(m.b)({json:{write:!0}})],We.prototype,"elements",void 0),Object(f.a)([Object(w.a)("elements")],We.prototype,"castElements",null),Object(f.a)([Object(x.a)("elements",["formElements"])],We.prototype,"readElements",null),Object(f.a)([Object(E.a)("elements")],We.prototype,"writeElements",null),Object(f.a)([Object(m.b)({type:[ee],json:{write:!0}})],We.prototype,"expressionInfos",void 0),Object(f.a)([Object(m.b)({type:String,json:{write:!0}})],We.prototype,"title",void 0);var $e=We=Be=Object(f.a)([Object(F.a)("esri.form.FormTemplate")],We),Ze=r(360);var He,Ke=r(85),Xe=r(197),Ye=(r(75),r(211)),et=r(135),tt=r(76),rt=r(382),it=r(310),at=r(389),nt=0,ot=h.a.getLogger("esri.layers.graphics.sources.MemorySource"),st=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e))._idToClientGraphic=null,i.type="memory",i}return Object(u.a)(r,[{key:"load",value:function(e){var t=Object(O.i)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Object(T.u)(this)}},{key:"destroy",value:function(){var e;null==(e=this._connection)||e.close(),this._connection=null}},{key:"workerGeometryType",get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,i,n,s,l,c,u,p,d,b=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(i=e.sent,Object(at.a)(t,this.layer.spatialReference,i),n=Ze.default.fromJSON(i),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",n);case 10:s=this.layer.objectIdField,l=Object(a.a)(n.features);try{for(l.s();!(c=l.n()).done;)u=c.value,p=u.attributes[s],(d=this._idToClientGraphic.get(p))&&(u.geometry=d.geometry)}catch(o){l.e(o)}finally{l.f()}return e.abrupt("return",(n.geometryType=this.layer.geometryType,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,i,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}return e.abrupt("return",Object(T.t)(new I.a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)")));case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return i=e.sent,e.abrupt("return",(Object(at.a)(t,this.layer.spatialReference,i),i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:R.a.fromJSON(e.extent)}}))}},{key:"_applyEdits",value:function(e){var t=this;if(!this._connection)throw new I.a("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,i=null,n=[],o=[],s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null};if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures){var l,c=Object(a.a)(e.deleteFeatures);try{for(c.s();!(l=c.n()).done;){var u=s(l.value);null!=u&&n.push(u)}}catch(j){c.e(j)}finally{c.f()}}var p=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){var d,b=Object(a.a)(e.updateFeatures);try{for(b.s();!(d=b.n()).done;){var y=d.value;if(o.push(this._serializeFeature(y)),p){var f=s(y);null!=f&&p.set(f,y)}}}catch(j){b.e(j)}finally{b.f()}}return Object(it.b)(i?i.features:null,o,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:o,deletes:n}).then((function(e){var r=e.fullExtent,n=e.featureEditResults;if(t.fullExtent=r,i&&i.finish(n.uidToObjectId),t._idToClientGraphic){if(p){var o,s=Object(a.a)(n.updateResults);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.success){var c=p.get(l.objectId);null!=c&&t._addIdToClientGraphic(c)}}}catch(j){s.e(j)}finally{s.f()}}var u,d=Object(a.a)(n.deleteResults);try{for(d.s();!(u=d.n()).done;){var b=u.value;b.success&&t._idToClientGraphic.delete(b.objectId)}}catch(j){d.e(j)}finally{d.f()}}return t._createEditsResult(n)}))}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new I.a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),i=null,a=0;a<e.length;a++){var n=e[a],o=this._serializeFeature(n);!i&&Object(O.i)(n.geometry)&&(i=n.geometry.type),r[a]=o,t.set("".concat(o.uid),n)}var s=this;return{features:r,inferredGeometryType:i,finish:function(e){var r=s.sourceJSON.objectIdField;for(var i in e){var a=e[i],n=t.get(i);n&&(n.attributes||(n.attributes={}),-1===a?delete n.attributes[r]:n.attributes[r]=a,s._addIdToClientGraphic(n))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"_requiresClientGraphicMapping",value:function(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),i=(nt++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return Object(O.h)(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?Ke.a.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,i,n,s,l,c,u,p,d,b,y,f,v,O,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(rt.b)("MemorySourceWorker",{strategy:Object(j.a)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,i=r.fields,n=r.spatialReference,s=r.objectIdField,l=r.hasM,c=r.hasZ,u=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),d=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){ot.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),b={features:d.features,fields:i&&i.map((function(e){return e.toJSON()})),geometryType:Xe.c.toJSON(this.workerGeometryType),hasM:l,hasZ:c,objectIdField:s,spatialReference:p?null:n&&n.toJSON(),timeInfo:u?u.toJSON():null},e.next=8,this._connection.invoke("load",b,{signal:t});case 8:y=e.sent,f=Object(a.a)(y.warnings);try{for(f.s();!(v=f.n()).done;)O=v.value,ot.warn(O.message,{layer:this.layer,warning:O})}catch(o){f.e(o)}finally{f.f()}y.featureErrors.length&&ot.warn("Encountered ".concat(y.featureErrors.length," validation errors while loading features"),y.featureErrors),h=y.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(h.geometryType=Xe.c.toJSON(d.inferredGeometryType)),"mesh"!==h.geometryType&&"mesh"!==this.layer.geometryType||(h.hasZ=!0),this.sourceJSON=h,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),d.finish(y.assignedObjectIds);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(et.a.LoadableMixin(Object(Ye.b)(_.a)));Object(f.a)([(He={Type:tt.a,ensureType:Object(K.m)(tt.a)},function(e,t){e[t]=He})],st.prototype,"itemType",void 0),Object(f.a)([Object(m.b)()],st.prototype,"type",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],st.prototype,"layer",void 0),Object(f.a)([Object(m.b)({readOnly:!0,dependsOn:["layer.geometryType"]})],st.prototype,"workerGeometryType",null),Object(f.a)([Object(m.b)()],st.prototype,"sourceJSON",void 0);var lt,ct=st=Object(f.a)([Object(F.a)("esri.layers.graphics.sources.MemorySource")],st),ut=r(866),pt=r(379),dt=r(845),bt=r(802),yt=r(801),ft=r(378),jt=r(807),vt=r(825),Ot=lt=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){return Object(c.a)(this,r),t.call(this,e)}return Object(u.a)(r,[{key:"clone",value:function(){var e=this.name,t=this.fields,r=this.isAscending,i=this.isUnique,a=this.description;return new lt({name:e,fields:t,isAscending:r,isUnique:i,description:a})}}]),r}(H.a);Object(f.a)([Object(m.b)({constructOnly:!0})],Ot.prototype,"name",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],Ot.prototype,"fields",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],Ot.prototype,"isAscending",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],Ot.prototype,"isUnique",void 0),Object(f.a)([Object(m.b)({constructOnly:!0})],Ot.prototype,"description",void 0);Ot=lt=Object(f.a)([Object(F.a)("esri.layers.support.FeatureIndex")],Ot);var ht=r(800),mt=r(793),wt=r(818),gt=r(817),xt=r(871),St=r(816),Ft=r(836),Et=r(858),It=r(863),kt=new g.a({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Tt=new g.a({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),Dt=function(e){Object(b.a)(r,e);var t=Object(y.a)(r);function r(e){var i;return Object(c.a)(this,r),(i=t.call(this,e)).cardinality=null,i.composite=null,i.id=null,i.keyField=null,i.keyFieldInRelationshipTable=null,i.name=null,i.relatedTableId=null,i.relationshipTableId=null,i.role=null,i}return r}(H.a);Object(f.a)([Object(m.b)({json:{read:kt.read,write:kt.write}})],Dt.prototype,"cardinality",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"composite",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"id",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"keyField",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"keyFieldInRelationshipTable",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"name",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"relatedTableId",void 0),Object(f.a)([Object(m.b)({json:{read:!0,write:!0}})],Dt.prototype,"relationshipTableId",void 0),Object(f.a)([Object(m.b)({json:{read:Tt.read,write:Tt.write}})],Dt.prototype,"role",void 0);var Rt=Dt=Object(f.a)([Object(F.a)("esri.layers.support.Relationship")],Dt),_t=r(234),Ct=r(835),Mt=r(812),Lt=r(283),At=r(276),Nt=r(361),Pt=new g.a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Vt={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},qt="FeatureLayer",zt=h.a.getLogger("esri.layers.FeatureLayer");function Gt(e){return e&&e instanceof _.a}function Jt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function Bt(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var Qt=Object(Et.a)();function Ut(e,t,r){var i=!(null==r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}var Wt=function(e){Object(b.a)(i,e);var t=Object(y.a)(i);function i(){var e;Object(c.a)(this,i);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a)))._handles=new N.a,e.capabilities=null,e.charts=null,e.copyright=null,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingEnabled=!0,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.formTemplate=null,e.fullExtent=null,e.gdbVersion=null,e.geometryProperties=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=D.a.WGS84,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(_.a.ofType(Ot)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return Object(u.a)(i,[{key:"destroy",value:function(){var e;null==(e=this.source)||e.destroy(),this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(l.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(O.i)(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then(Object(s.a)(o.a.mark((function e(){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.url||null!=t.layerId||!/FeatureServer|MapServer\/*$/i.test(t.url)){e.next=5;break}return e.next=3,t._fetchFirstLayerId(r);case 3:null!=(i=e.sent)&&(t.layerId=i);case 5:if(t.url||t._hasMemorySource()){e.next=7;break}throw new I.a("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=t,e.next=10,t.createGraphicsSource(r);case 10:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)}))));return this.addResolvingPromise(i),Object(T.u)(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}},{key:"createQueryVersion",get:function(){return this.definitionExpression,this.dynamicDataSource,this.timeExtent,this.timeOffset,this.geometryType,this.gdbVersion,this.historicMoment,this.returnZ,this.capabilities,this.returnM,(this._get("createQueryVersion")||0)+1}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}},{key:"readEditingInfo",value:function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null}},{key:"readFeatureReduction",value:function(e,t){return Object(xt.a)(e,t)}},{key:"writeWebSceneFeatureReduction",value:function(e,t,r,i){Object(xt.c)(e,t,"layerDefinition.featureReduction",i)}},{key:"fieldsIndex",get:function(){return new $.a(this.fields||[])}},{key:"readIsTable",value:function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,i){null!=i&&i.writeLayerSchema&&Object(v.c)(r,e?"Table":"Feature Layer",t)}},{key:"readMinScale",value:function(e,t){return t.effectiveMinScale||e||0}},{key:"readMaxScale",value:function(e,t){return t.effectiveMaxScale||e||0}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,i=Object(a.a)(t.fields);try{for(i.s();!(r=i.n()).done;){var n=r.value;if("esriFieldTypeGlobalID"===n.type)return n.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,i=Object(a.a)(t.fields);try{for(i.s();!(r=i.n()).done;){var n=r.value;if("esriFieldTypeOID"===n.type)return n.name}}catch(o){i.e(o)}finally{i.f()}}}},{key:"parsedUrl",get:function(){var e=this.url?Object(k.I)(this.url):null;return null!=e&&(null!=this.dynamicDataSource?e.path=Object(k.x)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=Object(k.x)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){Object(C.j)(e,this.fields),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){var a=Object(W.b)(i,t,r)||void 0;return a||zt.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),a}if(t.defaultSymbol)return t.types&&t.types.length?new B.a({defaultSymbol:$t(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map((function(e){return{id:e.id,symbol:$t(e.symbol,e,r)}}))}):new Q.a({symbol:$t(t.defaultSymbol,t,r)})}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Gt(t)&&this._resetMemorySource(t),Gt(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof _.a?new ct({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r=Ze.default.fromJSON(t.featureSet);return new ct({layer:this,items:r&&r.features||[]})}},{key:"readServiceDefinitionExpression",value:function(e,t){return t.definitionQuery||t.definitionExpression}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,a=r&&r.editorField;return e=e&&e.map((function(e){return St.a.fromJSON(e)})),this._fixTemplates(e,i),this._fixTemplates(e,a),e}},{key:"readTitle",value:function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var a=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?Object(q.h)(this.url,r):r;var n=r;if(!n&&this.url){var o=Object(q.e)(this.url);Object(O.i)(o)&&(n=o.title)}if(!n)return;return"item-title-and-service-name"===this.sublayerTitleMode&&a&&a!==n&&(n=a+" - "+n),Object(q.a)(n)}if("item-title"===this.sublayerTitleMode&&i)return i}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r){var i=Object(C.n)(t.fields,r);i&&(r=i.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,a=i&&i.creatorField,n=i&&i.editorField;return e&&e.map((function(e){return e=Ft.a.fromJSON(e),r._fixTemplates(e.templates,a),r._fixTemplates(e.templates,n),e}))}},{key:"url",set:function(e){var t=Object(q.g)(this,e,zt);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}},{key:"writeUrl",value:function(e,t,r,i){Object(q.i)(this,e,null,t,i)}},{key:"readVersion",value:function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new I.a(qt,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))}},{key:"updateAttachment",value:function(e,t,r){var i=this;return this.load().then((function(){return i._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in i.source))throw new I.a(qt,"Layer source does not support updateAttachment capability");return i.source.updateAttachment(e,t,r)}))}},{key:"applyEdits",value:function(){var e=Object(s.a)(o.a.mark((function e(t,i){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(37).then(r.bind(null,1284));case 2:return a=e.sent,e.next=5,this.load();case 5:return e.abrupt("return",a.applyEdits(this,this.source,t,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return Object(p.a)(Object(d.a)(i.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(Mt.a)(this,e)}},{key:"createGraphicsSource",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()){e.next=2;break}return e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load({signal:t})));case 2:return e.next=4,r.e(139).then(r.bind(null,1285));case 4:return i=e.sent,Object(T.w)(t),e.next=8,new i.default({layer:this}).load({signal:t});case 8:return a=e.sent,e.abrupt("return",(this.emit("graphics-source-create",{graphicsSource:a}),a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=new At.a,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,i=this.timeExtent;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e}},{key:"deleteAttachments",value:function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new I.a(qt,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))}},{key:"fetchRecomputedExtents",value:function(e){var t=this;return this.load({signal:null==e?void 0:e.signal}).then((function(){if(t.source.fetchRecomputedExtents)return t.source.fetchRecomputedExtents(e);throw new I.a(qt,"Layer source does not support fetchUpdates capability")}))}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var a=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(a=e),!!a)})),a}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,i=this.getFeatureType(r);if(i){var a=i.domains&&i.domains[e];if(a&&"inherited"!==a.type)return a}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(e,t){var r=this;return e=Lt.a.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new I.a(qt,"this layer doesn't support attachments");var t=e,i=t.attachmentTypes,a=t.objectIds,n=t.globalIds,o=t.num,s=t.size,l=t.start,c=t.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var u=a&&a.length>1,p=i&&i.length,d=n&&n.length,b=s&&s.length;if(u||p||d||b||o||l||c)throw new I.a(qt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(a&&a.length||c))throw new I.a(qt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new I.a(qt,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(At.a.from(e)||r.createQuery(),t)})).then((function(e){if(e&&e.features){var t,i=Object(a.a)(e.features);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.layer=n.sourceLayer=r}}catch(o){i.e(o)}finally{i.f()}}return e}))}},{key:"queryObjectIds",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(At.a.from(e)||r.createQuery(),t);throw new I.a(qt,"Layer source does not support queryObjectIds capability")}))}},{key:"queryFeatureCount",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(At.a.from(e)||r.createQuery(),t);throw new I.a(qt,"Layer source does not support queryFeatureCount capability")}))}},{key:"queryExtent",value:function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(At.a.from(e)||r.createQuery(),t);throw new I.a(qt,"Layer source does not support queryExtent capability")}))}},{key:"queryRelatedFeatures",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(Nt.a.from(e),t);throw new I.a(qt,"Layer source does not support queryRelatedFeatures capability")}))}},{key:"queryRelatedFeaturesCount",value:function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeaturesCount"in r.source)return r.source.queryRelatedFeaturesCount(Nt.a.from(e),t);throw new I.a(qt,"Layer source does not support queryRelatedFeaturesCount capability")}))}},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var a=r.layers;a&&1===a.length&&(Object(p.a)(Object(d.a)(i.prototype),"read",this).call(this,a[0],t),null!=r.showLegend&&Object(p.a)(Object(d.a)(i.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}Object(p.a)(Object(d.a)(i.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}},{key:"write",value:function(e,t){var r,a,n=(t=Object(l.a)(Object(l.a)({},t),{},{writeLayerSchema:null!=(r=null==(a=t)?void 0:a.writeLayerSchema)?r:this._hasMemorySource()})).origin,o=t.layerContainerType,s=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==o)return s&&s.push(new I.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Table source cannot be written to web scenes and web maps"),{layer:this})),null;if(this._hasMemorySource())return s&&s.push(new I.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using an in-memory Table source cannot be written to web scenes and web maps"),{layer:this})),null}else if(this.loaded&&"web-map"===n&&"tables"===o)return s&&s.push(new I.a("layer:unsupported","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a non-table source cannot be written to tables in web maps"),{layer:this})),null;return Object(p.a)(Object(d.a)(i.prototype),"write",this).call(this,e,t)}},{key:"_readEditingEnabled",value:function(e,t,r){var i,a=null==(i=e.layerDefinition)?void 0:i.capabilities;return a?this._hasEditingCapability(a):(a=e.capabilities,!(t&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&a)||this._hasEditingCapability(a))}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,i){e||(Object(v.c)("layerDefinition.capabilities","Query",t),!r||null!=i&&i.writeLayerSchema||(t.capabilities="Query"))}},{key:"_checkAttachmentSupport",value:function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Object(T.t)(new I.a(qt,"feature is missing the identifying attribute ".concat(r))):Object(T.t)(new I.a(qt,"'attributes' are required on a feature to query attachments")):Object(T.t)(new I.a(qt,"A feature is required to add/delete/update attachments")):Object(T.t)(new I.a(qt,"this layer doesn't support attachments"))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return Object(L.default)(this.url,{query:Object(l.a)({f:"json"},this.customParameters),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"_initLayerProperties",value:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),Object(C.j)(this.renderer,this.fields),Object(C.k)(this.timeInfo,this.fields),Object(Ct.a)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new I.a("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new I.a("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}},{key:"_readAttachmentCapabilities",value:function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=Vt[e.name];r&&(t[r]=!!e.isEnabled)})),t}},{key:"_readDataCapabilities",value:function(e){return{isVersioned:Jt(e,"isDataVersioned",!1),supportsAttachment:Jt(e,"hasAttachments",!1),supportsM:Jt(e,"hasM",!1),supportsZ:Jt(e,"hasZ",!1)}}},{key:"_readMetadataCapabilities",value:function(e){return{supportsAdvancedFieldProperties:Jt(e,"supportsFieldDescriptionProperty",!1)}}},{key:"_readOperationsCapabilities",value:function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],i=-1!==r.indexOf("editing"),a=i&&-1!==r.indexOf("create"),n=i&&-1!==r.indexOf("delete"),o=i&&-1!==r.indexOf("update"),s=-1!==r.indexOf("changetracking");return i&&!(a||n||o)&&(a=n=o=!0),{supportsCalculate:Jt(t,"supportsCalculate",!1),supportsTruncate:Jt(t,"supportsTruncate",!1),supportsValidateSql:Jt(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:n,supportsEditing:i,supportsChangeTracking:s,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:Jt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Jt(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:Jt(t,"supportsExceedsLimitStatistics",!1)}}},{key:"_readQueryCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,a=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:Jt(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Jt(t,"supportsPercentileStatistics",!1),supportsCentroid:Jt(t,"supportsReturningGeometryCentroid",!1),supportsDistance:Jt(t,"supportsQueryWithDistance",!1),supportsDistinct:Jt(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Jt(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Jt(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:Jt(t,"supportsHavingClause",!1),supportsOrderBy:Jt(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Jt(t,"supportsPagination",!1),supportsQuantization:Jt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Jt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Jt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Jt(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Jt(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Jt(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Jt(e,"useStandardizedQueries",!1),supportsQueryByOthers:Jt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Jt(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a.has("pbf"),supportsDisjointSpatialRelationship:Jt(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:Jt(t,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Bt(e,"maxRecordCountFactor",void 0),maxRecordCount:Bt(e,"maxRecordCount",void 0),standardMaxRecordCount:Bt(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Bt(e,"tileMaxRecordCount",void 0)}}},{key:"_readQueryRelatedCapabilities",value:function(e){var t=e.advancedQueryCapabilities,r=Jt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Jt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}},{key:"_readEditingCapabilities",value:function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Jt(e,"allowGeometryUpdates",!0),supportsGlobalId:Jt(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:Jt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Jt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Jt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Jt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Jt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Jt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Jt(t,"allowOthersToUpdate",!0)}}}]),i}(Object(pt.a)(Object(vt.a)(Object(ft.a)(Object(yt.a)(Object(ut.a)(Object(J.a)(Object(bt.a)(Object(V.a)(Object(dt.a)(P.a))))))))));Object(f.a)([Object(m.b)({readOnly:!0,json:{read:!1}})],Wt.prototype,"capabilities",void 0),Object(f.a)([Object(x.a)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Wt.prototype,"readCapabilities",null),Object(f.a)([Object(m.b)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Wt.prototype,"charts",void 0),Object(f.a)([Object(m.b)({readOnly:!0,dependsOn:["definitionExpression","dynamicDataSource","timeExtent","timeOffset","geometryType","gdbVersion","historicMoment","returnZ","capabilities","returnM"]})],Wt.prototype,"createQueryVersion",null),Object(f.a)([Object(m.b)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Wt.prototype,"copyright",void 0),Object(f.a)([Object(m.b)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Wt.prototype,"displayField",void 0),Object(f.a)([Object(m.b)({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],Wt.prototype,"definitionExpression",void 0),Object(f.a)([Object(m.b)({types:A.i,readOnly:!0})],Wt.prototype,"defaultSymbol",void 0),Object(f.a)([Object(m.b)({type:_t.a})],Wt.prototype,"dynamicDataSource",void 0),Object(f.a)([Object(m.b)({readOnly:!0})],Wt.prototype,"editFieldsInfo",void 0),Object(f.a)([Object(m.b)({type:Boolean})],Wt.prototype,"editingEnabled",void 0),Object(f.a)([Object(x.a)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Wt.prototype,"readEditingEnabled",null),Object(f.a)([Object(x.a)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Wt.prototype,"readEditingEnabledFromWebMap",null),Object(f.a)([Object(E.a)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Wt.prototype,"writeEditingEnabled",null),Object(f.a)([Object(E.a)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Wt.prototype,"writeEditingEnabledToWebMap",null),Object(f.a)([Object(m.b)({readOnly:!0})],Wt.prototype,"editingInfo",void 0),Object(f.a)([Object(x.a)("editingInfo")],Wt.prototype,"readEditingInfo",null),Object(f.a)([Object(m.b)(G.b)],Wt.prototype,"elevationInfo",void 0),Object(f.a)([Object(m.b)({types:{key:"type",base:ht.a,typeMap:{selection:gt.a,cluster:wt.a}},json:{write:{target:"layerDefinition.featureReduction"}}})],Wt.prototype,"featureReduction",void 0),Object(f.a)([Object(x.a)("featureReduction",["layerDefinition.featureReduction"])],Wt.prototype,"readFeatureReduction",null),Object(f.a)([Object(E.a)("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:xt.b}})],Wt.prototype,"writeWebSceneFeatureReduction",null),Object(f.a)([Object(m.b)(Object(l.a)(Object(l.a)({},Qt.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{read:!0},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Ut}}}}}))],Wt.prototype,"fields",void 0),Object(f.a)([Object(m.b)({readOnly:!0,dependsOn:["fields"]})],Wt.prototype,"fieldsIndex",null),Object(f.a)([Object(m.b)({type:$e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Wt.prototype,"formTemplate",void 0),Object(f.a)([Object(m.b)({type:R.a,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Wt.prototype,"fullExtent",void 0),Object(f.a)([Object(m.b)()],Wt.prototype,"gdbVersion",void 0),Object(f.a)([Object(m.b)({readOnly:!0})],Wt.prototype,"geometryProperties",void 0),Object(f.a)([Object(m.b)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Pt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Ut,writer:function(e,t,r){var i=e?Pt.toJSON(e):null;i&&Object(v.c)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Pt.read}}})],Wt.prototype,"geometryType",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Wt.prototype,"hasM",void 0),Object(f.a)([Object(m.b)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Wt.prototype,"hasZ",void 0),Object(f.a)([Object(m.b)({readOnly:!0,type:z.a})],Wt.prototype,"heightModelInfo",void 0),Object(f.a)([Object(m.b)({type:Date})],Wt.prototype,"historicMoment",void 0),Object(f.a)([Object(m.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],Wt.prototype,"id",void 0),Object(f.a)([Object(m.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Wt.prototype,"isTable",void 0),Object(f.a)([Object(x.a)("service","isTable",["type","geometryType"]),Object(x.a)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Wt.prototype,"readIsTable",null),Object(f.a)([Object(E.a)("web-map","isTable")],Wt.prototype,"writeIsTable",null),Object(f.a)([Object(m.b)(G.c)],Wt.prototype,"labelsVisible",void 0),Object(f.a)([Object(m.b)({type:[mt.a],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:It.a},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:It.a},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Wt.prototype,"labelingInfo",void 0),Object(f.a)([Object(m.b)(G.f)],Wt.prototype,"opacity",void 0),Object(f.a)([Object(m.b)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Wt.prototype,"layerId",void 0),Object(f.a)([Object(m.b)(G.d)],Wt.prototype,"legendEnabled",void 0),Object(f.a)([Object(m.b)({type:["show","hide"]})],Wt.prototype,"listMode",void 0),Object(f.a)([Object(m.b)({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],Wt.prototype,"minScale",void 0),Object(f.a)([Object(x.a)("service","minScale",["minScale","effectiveMinScale"])],Wt.prototype,"readMinScale",null),Object(f.a)([Object(m.b)({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],Wt.prototype,"maxScale",void 0),Object(f.a)([Object(x.a)("service","maxScale",["maxScale","effectiveMaxScale"])],Wt.prototype,"readMaxScale",null),Object(f.a)([Object(m.b)({type:String})],Wt.prototype,"globalIdField",void 0),Object(f.a)([Object(x.a)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Object(x.a)("service","globalIdField",["globalIdField","fields"])],Wt.prototype,"readGlobalIdFieldFromService",null),Object(f.a)([Object(m.b)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Ut}}}}})],Wt.prototype,"objectIdField",void 0),Object(f.a)([Object(x.a)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Object(x.a)("service","objectIdField",["objectIdField","fields"])],Wt.prototype,"readObjectIdFieldFromService",null),Object(f.a)([Object(m.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Wt.prototype,"operationalLayerType",void 0),Object(f.a)([Object(m.b)(Qt.outFields)],Wt.prototype,"outFields",void 0),Object(f.a)([Object(m.b)({readOnly:!0,dependsOn:["layerId","dynamicDataSource"]})],Wt.prototype,"parsedUrl",null),Object(f.a)([Object(m.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Wt.prototype,"path",void 0),Object(f.a)([Object(m.b)(G.g)],Wt.prototype,"popupEnabled",void 0),Object(f.a)([Object(m.b)({type:M.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Wt.prototype,"popupTemplate",void 0),Object(f.a)([Object(m.b)({readOnly:!0,dependsOn:["fields","title"]})],Wt.prototype,"defaultPopupTemplate",null),Object(f.a)([Object(m.b)({type:[Rt],readOnly:!0})],Wt.prototype,"relationships",void 0),Object(f.a)([Object(m.b)({types:U.a,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:U.b,write:{target:"layerDefinition.drawingInfo.renderer",writer:W.c}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null==r?void 0:r.writeLayerSchema}},writer:W.c}}})],Wt.prototype,"renderer",null),Object(f.a)([Object(x.a)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Object(x.a)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Wt.prototype,"readRenderer",null),Object(f.a)([Object(m.b)()],Wt.prototype,"sourceJSON",void 0),Object(f.a)([Object(m.b)({type:Boolean})],Wt.prototype,"returnM",void 0),Object(f.a)([Object(m.b)({type:Boolean})],Wt.prototype,"returnZ",void 0),Object(f.a)([Object(m.b)(G.i)],Wt.prototype,"screenSizePerspectiveEnabled",void 0),Object(f.a)([Object(m.b)()],Wt.prototype,"source",null),Object(f.a)([Object(w.a)("source")],Wt.prototype,"castSource",null),Object(f.a)([Object(x.a)("portal-item","source",["featureSet"]),Object(x.a)("web-map","source",["featureSet"])],Wt.prototype,"readSource",null),Object(f.a)([Object(m.b)({readOnly:!0})],Wt.prototype,"serviceDefinitionExpression",void 0),Object(f.a)([Object(x.a)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Wt.prototype,"readServiceDefinitionExpression",null),Object(f.a)([Object(m.b)({type:D.a,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Wt.prototype,"spatialReference",void 0),Object(f.a)([Object(m.b)({type:[St.a]})],Wt.prototype,"templates",void 0),Object(f.a)([Object(x.a)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Wt.prototype,"readTemplates",null),Object(f.a)([Object(m.b)({type:jt.a})],Wt.prototype,"timeInfo",void 0),Object(f.a)([Object(m.b)()],Wt.prototype,"title",void 0),Object(f.a)([Object(x.a)("service","title",["name"]),Object(x.a)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Wt.prototype,"readTitle",null),Object(f.a)([Object(x.a)("web-map","title",["layerDefinition.name","title"])],Wt.prototype,"readTitleFromWebMap",null),Object(f.a)([Object(m.b)({type:String})],Wt.prototype,"sublayerTitleMode",void 0),Object(f.a)([Object(m.b)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Wt.prototype,"trackIdField",void 0),Object(f.a)([Object(m.b)({json:{read:!1}})],Wt.prototype,"type",void 0),Object(f.a)([Object(m.b)({type:String})],Wt.prototype,"typeIdField",void 0),Object(f.a)([Object(x.a)("service","typeIdField"),Object(x.a)("typeIdField",["layerDefinition.typeIdField"])],Wt.prototype,"readTypeIdField",null),Object(f.a)([Object(m.b)({type:[Ft.a]})],Wt.prototype,"types",void 0),Object(f.a)([Object(x.a)("service","types",["types"]),Object(x.a)("types",["layerDefinition.types"])],Wt.prototype,"readTypes",null),Object(f.a)([Object(m.b)({readOnly:!0,json:{write:!1}})],Wt.prototype,"serverGens",void 0),Object(f.a)([Object(m.b)({type:_.a.ofType(Ot),readOnly:!0})],Wt.prototype,"indexes",void 0),Object(f.a)([Object(m.b)(G.j)],Wt.prototype,"url",null),Object(f.a)([Object(E.a)("url")],Wt.prototype,"writeUrl",null),Object(f.a)([Object(m.b)({readOnly:!0})],Wt.prototype,"userIsAdmin",void 0),Object(f.a)([Object(m.b)({json:{origins:{service:{read:!0}},read:!1}})],Wt.prototype,"version",void 0),Object(f.a)([Object(x.a)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Wt.prototype,"readVersion",null),Object(f.a)([Object(m.b)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Wt.prototype,"visible",void 0),Object(f.a)([Object(x.a)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Wt.prototype,"readVisible",null),Wt=Object(f.a)([Object(F.a)("esri.layers.FeatureLayer")],Wt);var $t=Object(S.b)({types:A.a}),Zt=Wt;t.default=Zt},835:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(10),a=r.n(i),n=r(21),o=r(175),s=r(16),l=r(277);function c(e,t,r){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(a.a.mark((function e(t,r,i){var n,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==n.type||!n.styleOrigin){e.next=6;break}return e.next=4,Object(l.c)(n.populateFromStyle());case 4:c=e.sent,Object(s.w)(i),!1===c.ok&&(u=c.error,r&&r.messages&&r.messages.push(new o.a("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(u.message),{error:u,context:r})),t.clear("renderer",r.origin));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},836:function(e,t,r){"use strict";var i=r(2),a=r(3),n=r(5),o=r(6),s=r(0),l=(r(13),r(24)),c=(r(14),r(15),r(1)),u=r(62),p=r(8),d=r(47),b=(r(11),r(19),r(20),r(28)),y=r(281),f=r(279),j=r(280),v=(r(212),r(816)),O=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).id=null,a.name=null,a.domains=null,a.templates=null,a}return Object(a.a)(r,[{key:"readDomains",value:function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=j.a.fromJSON(i);break;case"codedValue":t[r]=y.a.fromJSON(i);break;case"inherited":t[r]=f.a.fromJSON(i)}}return t}},{key:"writeDomains",value:function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());Object(l.c)(r),t.domains=r}},{key:"readTemplates",value:function(e){return e&&e.map((function(e){return new v.a(e)}))}},{key:"writeTemplates",value:function(e,t){t.templates=e&&e.map((function(e){return e.toJSON()}))}}]),r}(b.a);Object(s.a)([Object(c.b)({json:{write:!0}})],O.prototype,"id",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],O.prototype,"name",void 0),Object(s.a)([Object(c.b)({json:{write:!0}})],O.prototype,"domains",void 0),Object(s.a)([Object(u.a)("domains")],O.prototype,"readDomains",null),Object(s.a)([Object(d.a)("domains")],O.prototype,"writeDomains",null),Object(s.a)([Object(c.b)({json:{write:!0}})],O.prototype,"templates",void 0),Object(s.a)([Object(u.a)("templates")],O.prototype,"readTemplates",null),Object(s.a)([Object(d.a)("templates")],O.prototype,"writeTemplates",null);var h=O=Object(s.a)([Object(p.a)("esri.layers.support.FeatureType")],O);t.a=h},845:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r(2),a=r(5),n=r(6),o=r(0),s=(r(13),r(14),r(15),r(1)),l=r(8),c=(r(11),r(19),r(20),function(e){var t=function(e){Object(a.a)(r,e);var t=Object(n.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).customParameters=null,e}return r}(e);return Object(o.a)([Object(s.b)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(o.a)([Object(l.a)("esri.layers.mixins.CustomParametersMixin")],t)})},858:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(12),a=r(14),n=r(157),o=r(244),s=a.a.getLogger("esri.layers.support.fieldProperties");function l(){return{fields:{type:[o.a],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;Object(n.p)(this.fields,a)||s.error("field-attributes-layer:invalid-field","Invalid field ".concat(a," found in outFields"),{layer:this,outFields:e})}}catch(o){r.e(o)}finally{r.f()}return Object(n.i)(this.fields,e)}}}}},863:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(793),a=/\[([^\[\]]+)\]/gi;function n(e,t,r){var n=this;return e?e.map((function(e){var o=new i.a;if(o.read(e,r),o.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||n.fields;o.labelExpression=o.labelExpression.replace(a,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var a=t[i].name;if(a.toLowerCase()===r)return a}return e}(t,s),"]")}))}return o})):null}},871:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var i=r(99),a=r(23),n=r(800),o=r(818),s=r(817),l={key:"type",base:n.a,typeMap:{selection:s.a}};function c(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return s.a.fromJSON(r);case"cluster":return o.a.fromJSON(r)}return null}function u(e,t,r,n){var o=function(e,t,r){return e?"selection"!==e.type?(r.messages&&r.messages.push(new a.a("featureReduction:unsupported","FeatureReduction of type '".concat(e.declaredClass,"' are not supported in scenes."),{featureReduction:e,context:r})),null):e.write(t,r):null}(e,{},n);o&&Object(i.c)(r,o,t)}}}]);
//# sourceMappingURL=65.e9012561.chunk.js.map