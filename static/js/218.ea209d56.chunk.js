(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[218],{1313:function(e,t,n){"use strict";n.r(t),n.d(t,"destroyContext",(function(){return L})),n.d(t,"dracoDecompressPointCloudData",(function(){return h})),n.d(t,"filterObbsForModifications",(function(){return E})),n.d(t,"filterObbsForModificationsSync",(function(){return T})),n.d(t,"initialize",(function(){return F})),n.d(t,"interpretObbModificationResults",(function(){return x})),n.d(t,"process",(function(){return p})),n.d(t,"setLegacySchema",(function(){return v})),n.d(t,"setModifications",(function(){return O})),n.d(t,"setModificationsSync",(function(){return _})),n.d(t,"test",(function(){return M}));var r,o,i,u=n(10),a=n.n(u),s=n(21),f=n(88),c=n(4),l=n(16),b=n(74);function d(e){return Object(b.a)("esri/libs/i3s/".concat(e))}function p(e){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return n=[t.geometryBuffer],e.abrupt("return",{result:j(t,n),transferList:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(a.a.mark((function e(t){var n,r,o,u,s,c,l,b,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(r=[t.geometryBuffer],o=t.geometryBuffer,u=o.byteLength,s=i._malloc(u),(c=new Uint8Array(i.HEAPU8.buffer,s,u)).set(new Uint8Array(o)),l=i.dracoDecompressPointCloudData(s,c.byteLength),i._free(s),!(l.error.length>0)){e.next=7;break}throw"i3s.wasm: ".concat(l.error);case 7:return b=(null==(n=l.featureIds)?void 0:n.length)>0?Object(f.m)(l.featureIds):null,d=Object(f.m)(l.positions),b&&r.push(b.buffer),r.push(d.buffer),e.abrupt("return",{result:{positions:d,featureIds:b},transferList:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return T(t),n={buffer:t.buffer},e.abrupt("return",{result:n,transferList:[n.buffer]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:_(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:i.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){I(e)}function _(e){for(var t=e.modifications,n=i._malloc(8*t.length),r=new Float64Array(i.HEAPU8.buffer,n,t.length),o=0;o<t.length;++o)r[o]=t[o];i.setModifications(e.context,n,t.length,e.isGeodetic),i._free(n)}function j(e,t){if(!i)return null;var n=e.context,r=e.localOrigin,o=e.globalTrafo,u=e.mbs,a=e.obb,s=e.elevationOffset,l=e.geometryBuffer,b=e.geometryDescriptor,d=e.indexToVertexProjector,p=e.vertexToRenderProjector,y=i._malloc(l.byteLength),h=i._malloc(33*Float64Array.BYTES_PER_ELEMENT),m=new Uint8Array(i.HEAPU8.buffer,y,l.byteLength);m.set(new Uint8Array(l));var E=new Float64Array(i.HEAPU8.buffer,h,33);P(E,r);var g=E.byteOffset+3*E.BYTES_PER_ELEMENT,O=new Float64Array(E.buffer,g);P(O,o),g+=16*E.BYTES_PER_ELEMENT,P(O=new Float64Array(E.buffer,g),u),g+=4*E.BYTES_PER_ELEMENT,Object(c.i)(a)&&(P(O=new Float64Array(E.buffer,g),a.center),g+=3*E.BYTES_PER_ELEMENT,P(O=new Float64Array(E.buffer,g),a.halfSize),g+=3*E.BYTES_PER_ELEMENT,P(O=new Float64Array(E.buffer,g),a.quaternion));var w=b,v={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:w.featureIndex},A=i.process(n,!!e.obb,y,m.byteLength,w,v,h,s,d,p,e.normalReferenceFrame);if(i._free(h),i._free(y),A.error.length>0)throw"i3s.wasm: ".concat(A.error);if(A.discarded)return null;var L=A.componentOffsets.length>0?Object(f.m)(A.componentOffsets):null,_=A.featureIds.length>0?Object(f.m)(A.featureIds):null,j=Object(f.m)(A.interleavedVertedData).buffer,x=1===A.indicesType?Object(f.m)(new Uint16Array(A.indices.buffer,A.indices.byteOffset,A.indices.byteLength/2)):Object(f.m)(new Uint32Array(A.indices.buffer,A.indices.byteOffset,A.indices.byteLength/4)),T=Object(f.m)(A.positions),I=1===A.positionIndicesType?Object(f.m)(new Uint16Array(A.positionIndices.buffer,A.positionIndices.byteOffset,A.positionIndices.byteLength/2)):Object(f.m)(new Uint32Array(A.positionIndices.buffer,A.positionIndices.byteOffset,A.positionIndices.byteLength/4)),F={layout:e.layouts[0],interleavedVertexData:j,indices:x,hasColors:A.hasColors,hasModifications:A.hasModifications,positionData:{data:T,indices:I}};return _&&t.push(_.buffer),L&&t.push(L.buffer),t.push(j),t.push(x.buffer),t.push(T.buffer),t.push(I.buffer),{componentOffsets:L,featureIds:_,transformedGeometry:F,obb:A.obb}}function x(e){return 0===e?0:1===e?1:2===e?2:3}function T(e){var t=e.context,n=e.buffer,r=i._malloc(n.byteLength),o=n.byteLength/Float64Array.BYTES_PER_ELEMENT,u=new Float64Array(i.HEAPU8.buffer,r,o),a=new Float64Array(n);u.set(a),i.filterOBBs(t,r,o),a.set(u),i._free(r)}function I(e){i&&i.destroy(e)}function P(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function F(){return i?Object(l.u)():(o||(o=(r||(r=Object(l.c)((function(e){return n.e(133).then(n.bind(null,1281)).then((function(e){return e.i})).then((function(t){var n=(0,t.default)({locateFile:d,onRuntimeInitialized:function(){return e(n)}});delete n.then}))})).catch((function(e){return Object(l.t)(e)}))),r).then((function(e){i=e,o=null}))),o)}var M={transform:j,destroy:I}}}]);
//# sourceMappingURL=218.ea209d56.chunk.js.map