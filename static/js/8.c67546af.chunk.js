(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[8],{791:function(t,e,i){"use strict";i.d(e,"a",(function(){return O})),i.d(e,"b",(function(){return x})),i.d(e,"c",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"e",(function(){return m})),i.d(e,"f",(function(){return y})),i.d(e,"g",(function(){return _})),i.d(e,"h",(function(){return p})),i.d(e,"i",(function(){return g})),i.d(e,"j",(function(){return b}));var n=i(2),r=i(3),a=i(12),s=i(24),o=i(58),l=i(886);function u(t){var e,i=Object(s.a)(t);return(e=i)&&(Object(o.g)(e)?v(e.rings):Object(o.h)(e)?v(e.paths):Object(o.e)(e)&&f(e.points)),i}function c(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function h(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){c(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function f(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function v(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){f(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function d(t){t&&(Object(o.g)(t)?h(t.rings):Object(o.h)(t)?h(t.paths):Object(o.e)(t)&&c(t.points))}function p(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){g(e.value)}}catch(n){i.e(n)}finally{i.f()}}}function g(t){t&&t.reverse()}function m(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function _(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function y(t){return t[4]}function b(t,e){t[4]=e}var x=function(){function t(e,i,r,a){Object(n.a)(this,t),this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&(Object(o.g)(e)?i&&(this.multiPath=e.rings,this.isClosed=!0):Object(o.h)(e)?r&&(this.multiPath=e.paths,this.isClosed=!1):Object(o.d)(e)&&i&&(this.multiPath=k(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new l.a}return Object(r.a)(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),O=function(){function t(e,i,r,a){Object(n.a)(this,t),this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=r,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return Object(r.a)(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if(Object(o.g)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):Object(o.h)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):Object(o.d)(t)&&this.acceptPolygon&&(this.multiPath=k(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function k(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}},794:function(t,e,i){"use strict";function n(t){return t&&"esri.renderers.visualVariables.SizeVariable"===t.declaredClass}function r(t){return null!=t&&!isNaN(t)&&isFinite(t)}function a(t){return t.valueExpression?"expression":t.field&&"string"==typeof t.field?"field":"unknown"}function s(t,e){var i=e||a(t),n=t.valueUnit||"unknown";return"unknown"===i?"constant":t.stops?"stops":null!=t.minSize&&null!=t.maxSize&&null!=t.minDataValue&&null!=t.maxDataValue?"clamped-linear":"unknown"===n?null!=t.minSize&&null!=t.minDataValue?t.minSize&&t.minDataValue?"proportional":"additive":"identity":"real-world-size"}i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return r}))},810:function(t,e,i){"use strict";var n,r;function a(t){switch(t){case"left":return n.Left;case"right":return n.Right;case"center":case"justify":return n.Center}}function s(t){switch(t){case"top":return r.Top;case"middle":return r.Center;case"baseline":return r.Baseline;case"bottom":return r.Bottom}}function o(t){switch(t){case"above-left":return[n.Right,r.Bottom];case"above-center":case"above-along":return[n.Center,r.Bottom];case"above-right":return[n.Left,r.Bottom];case"center-left":return[n.Right,r.Center];case"center-center":case"center-along":return[n.Center,r.Center];case"center-right":return[n.Left,r.Center];case"below-left":return[n.Right,r.Top];case"below-center":case"below-along":return[n.Center,r.Top];case"below-right":return[n.Left,r.Top];case"always-horizontal":return[n.Center,r.Baseline];default:return console.debug("Found invalid placement type ".concat(t)),[n.Center,r.Center]}}function l(t){switch(t){case n.Right:return-1;case n.Center:return 0;case n.Left:return 1;default:return console.debug("Found invalid horizontal alignment ".concat(t)),0}}function u(t){switch(t){case r.Top:return 1;case r.Center:return 0;case r.Bottom:case r.Baseline:return-1;default:return console.debug("Found invalid vertical alignment ".concat(t)),0}}function c(t){switch(t){case"left":return n.Left;case"right":return n.Right;case"center":case"justify":return n.Center}}i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return a})),i.d(e,"e",(function(){return l})),i.d(e,"f",(function(){return s})),i.d(e,"g",(function(){return u})),function(t){t[t.Left=-1]="Left",t[t.Center=0]="Center",t[t.Right=1]="Right"}(n||(n={})),function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(r||(r={}))},820:function(t,e,i){"use strict";i.d(e,"a",(function(){return j})),i.d(e,"b",(function(){return g})),i.d(e,"c",(function(){return m})),i.d(e,"d",(function(){return _})),i.d(e,"e",(function(){return y})),i.d(e,"f",(function(){return O})),i.d(e,"g",(function(){return p}));var n=i(12),r=i(32),a=i(174),s=i(4),o=i(14),l=i(52),u=i(76),c=i(304),h=i(794),f=o.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),v=new u.a,d=Math.PI,p=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function g(t,e,i){var n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((function(t){return"color"===t.type}))[0]:t;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var r="number"==typeof e,a=r?null:e,o=a&&a.attributes,u=r?e:null,c=n.field,h=n.cache,v=h.ipData,d=h.hasExpression,p=n.cache.compiledFunc;if(!c&&!d){var g=n.stops;return g&&g[0]&&g[0].color}if("number"!=typeof u)if(d){if(!Object(s.i)(i)||!Object(s.i)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},_=i.arcade.arcadeUtils,y=_.getViewInfo(m),b=_.createExecContext(a,y);if(!p){var x=_.createSyntaxTree(n.valueExpression);p=_.createFunction(x),n.cache.compiledFunc=p}u=_.executeFunction(p,b)}else o&&(u=o[c]);var O=n.normalizationField,j=o?parseFloat(o[O]):void 0;if(null!=u&&(!O||r||!isNaN(j)&&0!==j)){isNaN(j)||r||(u/=j);var w=k(u,v);if(w){var P=w[0],S=w[1],M=P===S?n.stops[P].color:l.a.blendColors(n.stops[P].color,n.stops[S].color,w[2],Object(s.i)(i)?i.color:void 0);return new l.a(M)}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function m(t,e,i){var n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((function(t){return"opacity"===t.type}))[0]:t;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var r="number"==typeof e,a=r?null:e,o=a&&a.attributes,l=r?e:null,u=n.field,c=n.cache,h=c.ipData,v=c.hasExpression,d=n.cache.compiledFunc;if(!u&&!v){var p=n.stops;return p&&p[0]&&p[0].opacity}if("number"!=typeof l)if(v){if(Object(s.h)(i)||Object(s.h)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},m=i.arcade.arcadeUtils,_=m.getViewInfo(g),y=m.createExecContext(a,_);if(!d){var b=m.createSyntaxTree(n.valueExpression);d=m.createFunction(b),n.cache.compiledFunc=d}l=m.executeFunction(d,y)}else o&&(l=o[u]);var x=n.normalizationField,O=o?parseFloat(o[x]):void 0;if(null!=l&&(!x||r||!isNaN(O)&&0!==O)){isNaN(O)||r||(l/=O);var j=k(l,h);if(j){var w=j[0],P=j[1];if(w===P)return n.stops[w].opacity;var S=n.stops[w].opacity;return S+(n.stops[P].opacity-S)*j[2]}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function _(t,e,i){var n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((function(t){return"rotation"===t.type}))[0]:t;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var r=n.axis||"heading",a="heading"===r&&"arithmetic"===n.rotationType?90:0,o="heading"===r&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof e?null:e,u=l&&l.attributes,c=n.field,h=n.cache.hasExpression,v=n.cache.compiledFunc,d=0;if(!c&&!h)return d;if(h){if(Object(s.h)(i)||Object(s.h)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var p={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,m=g.getViewInfo(p),_=g.createExecContext(l,m);if(!v){var y=g.createSyntaxTree(n.valueExpression);v=g.createFunction(y),n.cache.compiledFunc=v}d=g.executeFunction(v,_)}else u&&(d=u[c]||0);return d="number"!=typeof d||isNaN(d)?null:a+o*d}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function y(t,e,i){var n="visualVariables"in t&&t.visualVariables?t.visualVariables.filter((function(t){return"size"===t.type}))[0]:t;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var a=function(t,e,i,n,a){switch(e.transformationType){case"additive":return function(t,e,i,n){return t+(b(e.minSize,i,n)||e.minDataValue)}(t,e,i,n);case"constant":return function(t,e,i){var n=t.stops,r=n&&n.length&&n[0].size;return null==r&&(r=t.minSize),b(r,e,i)}(e,i,n);case"clamped-linear":return function(t,e,i,n){var r=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),a=b(e.minSize,i,n),o=b(e.maxSize,i,n),l=Object(s.i)(n)?n.shape:void 0;if(t<=e.minDataValue)return a;if(t>=e.maxDataValue)return o;if("area"===e.scaleBy&&l){var u="circle"===l,c=u?d*Math.pow(a/2,2):a*a,h=c+r*((u?d*Math.pow(o/2,2):o*o)-c);return u?2*Math.sqrt(h/d):Math.sqrt(h)}return a+r*(o-a)}(t,e,i,n);case"proportional":return function(t,e,i,n){var r=Object(s.i)(n)?n.shape:void 0,a=t/e.minDataValue,o=b(e.minSize,i,n),l=b(e.maxSize,i,n);return x("circle"===r?2*Math.sqrt(a*Math.pow(o/2,2)):"square"===r||"diamond"===r||"image"===r?Math.sqrt(a*Math.pow(o,2)):a*o,o,l)}(t,e,i,n);case"stops":return function(t,e,i,n,a){var s=k(t,a),o=Object(r.a)(s,3),l=o[0],u=o[1],c=o[2];if(l===u)return b(e.stops[l].size,i,n);var h=b(e.stops[l].size,i,n);return h+(b(e.stops[u].size,i,n)-h)*c}(t,e,i,n,a);case"real-world-size":return function(t,e,i,n){var r=(Object(s.i)(n)&&n.resolution?n.resolution:1)*c.a[e.valueUnit],a=b(e.minSize,i,n),o=b(e.maxSize,i,n),l=e.valueRepresentation;return x("area"===l?2*Math.sqrt(t/d)/r:"radius"===l||"distance"===l?2*t/r:t/r,a,o)}(t,e,i,n);case"identity":return t;case"unknown":return null}}(function(t,e,i){var n="number"==typeof e,r=n?null:e,a=r&&r.attributes,o=n?e:null,l=t.cache.isScaleDriven,u=t.cache.compiledFunc;if(l){var c=Object(s.i)(i)?i.scale:void 0,v=Object(s.i)(i)?i.view:void 0;o=null==c||"3d"===v?function(t){var e=null,i=null,n=t.stops;return n?(e=n[0].value,i=n[n.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}(t):c}else if(!n)switch(t.inputValueType){case"expression":if(Object(s.h)(i)||Object(s.h)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var d={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,g=p.getViewInfo(d),m=p.createExecContext(r,g);if(!u){var _=p.createSyntaxTree(t.valueExpression);u=p.createFunction(_),t.cache.compiledFunc=u}o=p.executeFunction(u,m);break;case"field":a&&(o=a[t.field]);break;case"unknown":o=null}if(!Object(h.d)(o))return null;if(n||!t.normalizationField)return o;var y=a?parseFloat(a[t.normalizationField]):null;return Object(h.d)(y)&&0!==y?o/y:null}(n,e,i),n,e,i,n.cache.ipData);return null==a||isNaN(a)?0:a}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function b(t,e,i){return null==t?null:Object(h.c)(t)?y(t,e,i):Object(h.d)(t)?t:null}function x(t,e,i){return Object(h.d)(i)&&t>i?i:Object(h.d)(e)&&t<e?e:t}function O(t,e,i){if(!(t.cache.isScaleDriven&&"3d"===i||e))return null;var n={scale:e,view:i},r=b(t.minSize,v,n),a=b(t.maxSize,v,n);if(null!=r||null!=a){if(r>a){var s=a;a=r,r=s}return{minSize:r,maxSize:a}}}function k(t,e){if(e){var i=0,n=e.length-1;return e.some((function(e,r){return t<e?(n=r,!0):(i=r,!1)})),[i,n,(t-e[i])/(e[n]-e[i])]}}function j(t,e,i){var r,s=["proportional","proportional","proportional"],o=Object(n.a)(t);try{for(o.s();!(r=o.n()).done;){var l=r.value,u=l.useSymbolValue?"symbol-value":y(l,e,i);switch(l.axis){case"width":s[0]=u;break;case"depth":s[1]=u;break;case"height":s[2]=u;break;case"width-and-depth":s[0]=u,s[1]=u;break;case"all":case void 0:case null:s[0]=u,s[1]=u,s[2]=u;break;default:Object(a.a)(l.axis)}}}catch(c){o.e(c)}finally{o.f()}return s}},831:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=new(i(961).a);function r(t){return n.hasBidiChar(t)?(e="rtl"===n.checkContextual(t)?"IDNNN":"ICNNN",[n.bidiTransform(t,e,"VLYSN"),!0]):[t,!1];var e}},837:function(t,e,i){"use strict";i.d(e,"a",(function(){return E})),i.d(e,"b",(function(){return P})),i.d(e,"c",(function(){return j}));var n=i(12),r=i(41),a=i(9),s=i(13),o=i(24),l=i(4),u=i(14),c=i(23),h=i(36),f=i(149),v=i(978),d=i(780),p=i(782),g=i(781),m=i(875);var _=i(979),y=i(952),b=u.a.getLogger("esri.views.2d.layers.features.schemaUtils"),x={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function O(t){return Object(p.h)(t)}function k(t){switch(t.type){case"line-marker":var e;return{type:"line-marker",color:null==(e=t.color)?void 0:e.toJSON(),placement:t.placement,style:t.style};default:return Object(f.f)(t.toJSON()).toJSON()}}function j(t,e,i){if(!t)return null;var r=0,s=!1;switch(Object(l.i)(e)&&"visualVariables"in e&&(r=function(t){if(!t)return d.e.NONE;var e,i=0,r=Object(n.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;if("size"===a.type){var s=Object(m.a)(a);i|=s,"outline"===a.target&&(i|=s<<4)}else"color"===a.type?i|=d.e.COLOR:"opacity"===a.type?i|=d.e.OPACITY:"rotation"===a.type&&(i|=d.e.ROTATION)}}catch(o){r.e(o)}finally{r.f()}return i}(e.visualVariables||[]),s="dot-density"===e.type),t.type){case"simple-fill":case"picture-fill":return function(t,e,i,n){var r=Object(p.g)(d.d.FILL,e,!1,i),s=n?O(r):r,o=t.clone(),l=o.outline;o.outline=null;var u=[],c=Object(a.a)({materialKey:s,hash:o.hash()},k(o));if(u.push(c),l){var h=Object(p.g)(d.d.LINE,e,!0,!1),f=Object(a.a)({materialKey:n?O(h):h,hash:l.hash()},k(l));u.push(f)}return{type:"composite-symbol",layers:u,hash:u.reduce((function(t,e){return e.hash+t}),"")}}(t,r,s,i);case"simple-marker":case"picture-marker":return function(t,e,i){var n=Object(p.g)(d.d.MARKER,e,!1,!1),r=i?O(n):n,s=k(t);return Object(a.a)(Object(a.a)({materialKey:r,hash:t.hash()},s),{},{angle:t.angle})}(t,r,i);case"simple-line":return function(t,e,i){var n=Object(p.g)(d.d.LINE,e,!1,!1),r=i?O(n):n,s=t.clone(),o=s.marker;s.marker=null;var l=[];if(l.push(Object(a.a)({materialKey:r,hash:s.hash()},k(s))),o){var u,c=Object(p.g)(d.d.MARKER,e,!1,!1),h=i?O(c):c;o.color=null!=(u=o.color)?u:s.color,l.push(Object(a.a)({materialKey:h,hash:o.hash(),lineWidth:s.width},k(o)))}return{type:"composite-symbol",layers:l,hash:l.reduce((function(t,e){return e.hash+t}),"")}}(t,r,i);case"text":return function(t,e,i){var n=Object(p.g)(d.d.TEXT,e,!1,!1),r=i?O(n):n,s=k(t);return Object(a.a)(Object(a.a)({materialKey:r,hash:t.hash()},s),{},{angle:t.angle})}(t,r,i);case"label":return function(t,e,i){var n=Object(p.g)(d.d.LABEL,e,!1,!1,t.labelPlacement);return Object(a.a)(Object(a.a)({materialKey:i?O(n):n,hash:t.hash()},t.toJSON()),{},{labelPlacement:t.labelPlacement})}(t,r,i);case"cim":return{type:"cim",rendererKey:r,data:t.data};case"web-style":return Object(a.a)(Object(a.a)({},k(t)),{},{type:"web-style",hash:t.hash(),rendererKey:r});default:throw new Error("symbol not supported ".concat(t.type))}}function w(t,e){var i=Object(o.a)(t);return i.some((function(t){return function(t,e){var i=t.labelPlacement,n=x[e];if(!t.symbol)return b.warn("No LabelClass symbol specified."),!0;if(!n)return b.error(new c.a("mapview-labeling:unsupported-geometry-type","Unable to create labels for Feature Layer, ".concat(e," is not supported"))),!0;if(!n.some((function(t){return t===i}))){var r=n[0];i&&b.warn("Found invalid label placement type ".concat(i," for ").concat(e,". Defaulting to ").concat(r)),t.labelPlacement=r}return!1}(t,e)}))?[]:i}function P(t){return Object(s.a)("esri-2d-update-debug")&&console.debug("Created new schema",S(t,!0)),S(t)}function S(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var i,n,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new Array;return i.push(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={indexCount:0,fields:{}},a="featureReduction"in t&&t.featureReduction,s=a?"aggregate":"feature";switch(t.renderer.type){case"heatmap":var o=t.renderer,l=o.blurRadius,u=o.fieldOffset,h=o.field;return{type:"heatmap",aggregateFields:[],attributes:n,target:s,storage:null,mesh:{blurRadius:l,fieldOffset:u,field:L(n,{target:s,field:h,resultType:"numeric"}).field}};default:var f=[],d="aggregate"===s?Object(v.b)(f,t.renderer,a,null):t.renderer;F(n,f);var p=E(n,s,d,i),m=function(t,e,i){switch(i.type){case"dot-density":return function(t,e,i){return i&&i.length?{type:"dot-density",mapping:i.map((function(i,n){var r=L(t,{valueExpression:i.valueExpression,field:i.field,resultType:"numeric",target:e});return{binding:n,field:r.field,fieldIndex:r.fieldIndex}})),target:e}:{type:"dot-density",mapping:[],target:e}}(t,e,i.attributes);case"simple":case"class-breaks":case"unique-value":return function(t,e,i){if(!i||!i.length)return{type:"visual-variable",mapping:[],target:e};var n={storage:!0},r="numeric";return{type:"visual-variable",mapping:Object(_.b)(i).map((function(i){var a,s=Object(g.l)(i.type),o=L(t,{target:e,valueExpression:i.valueExpression,field:i.field,context:n,resultType:r}),l=o.field,u=o.fieldIndex;switch(i.type){case"size":return"$view.scale"===i.valueExpression?null:{type:"size",binding:s,field:l,fieldIndex:u,normalizationField:L(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field,valueRepresentation:null!=(a=i.valueRepresentation)?a:null};case"color":return{type:"color",binding:s,field:l,fieldIndex:u,normalizationField:L(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field};case"opacity":return{type:"opacity",binding:s,field:l,fieldIndex:u,normalizationField:L(t,{target:e,field:i.normalizationField,context:n,resultType:r}).field};case"rotation":return{type:"rotation",binding:s,field:l,fieldIndex:u}}})).filter((function(t){return t})),target:e}}(t,e,i.visualVariables);case"heatmap":case"dictionary":return null}}(n,s,d),b=Object(y.a)(t.geometryType),x=t.labelsVisible&&t.labelingInfo||[],O=[];if(a){if("selection"===a.type)throw new c.a("ValidationError","Mapview does not support `selection` reduction type",a);O=a&&a.labelsVisible&&a.labelingInfo||[]}x=w(x,b),O=w(O,b);var k=0,j=[].concat(Object(r.a)(x.map((function(t){return I(d,n,t,"feature",k++,i)}))),Object(r.a)(O.map((function(t){return I(d,n,t,"aggregate",k++,i)}))));return{type:"symbol",target:s,attributes:n,aggregateFields:f,storage:m,mesh:{matcher:p,labels:j}}}}(t,e)),i}(t,e),s={};return a.map((function(e){return function(t,e,i){switch(i.target){case"feature":return void T(t,C(e),i);case"aggregate":var n=e.featureReduction;if("selection"===n.type)throw new c.a("ValidationError","Mapview does not support `selection` reduction type",n);return T(t,C(e),i),void function(t,e,i){t.aggregate||(t.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:Object(h.g)(e.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(Object(h.g)(e.clusterMaxSize)/64),fields:i.aggregateFields}}),M(t.aggregate,i.attributes.fields)}(t,n,i)}}(s,t,e)})),{source:{definitionExpression:t.definitionExpression,fields:t.fields.map((function(t){return t.toJSON()})),gdbVersion:t.gdbVersion,historicMoment:null==(i=t.historicMoment)?void 0:i.getTime(),outFields:t.availableFields,pixelBuffer:t.pixelBuffer,spatialReference:t.spatialReference.toJSON(),timeExtent:null==(n=t.timeExtent)?void 0:n.toJSON()},attributes:{fields:{},indexCount:0},processors:a,targets:s}}catch(t){if("ValidationError"===t.fieldName)return b.error(t),null;throw t}}function M(t,e){for(var i in e){var n=e[i];if(n.target===t.name){var r=t.attributes[i];r?(r.context.mesh=r.context.mesh||n.context.mesh,r.context.storage=r.context.storage||n.context.storage):t.attributes[i]=n}}return t}function C(t){var e,i,n,r,a;return[null!=(e=null==(i=t.filter)?void 0:i.toJSON())?e:null,null!=(n=null==(r=t.effect)||null==(a=r.filter)?void 0:a.toJSON())?n:null]}function T(t,e,i){return t.feature||(t.feature={name:"feature",input:"source",filters:e,attributes:{}}),M(t.feature,i.attributes.fields),t}function L(t,e){return e.field?A(t,Object(a.a)(Object(a.a)({},e),{},{type:"field",field:e.field})):e.valueExpression?A(t,Object(a.a)(Object(a.a)({},e),{},{type:"expression",valueExpression:e.valueExpression})):{field:null,fieldIndex:null}}function A(t,e){switch(e.type){case"expression":var i=e.valueExpression;if(!t.fields[i]){var n=t.indexCount++;t.fields[i]=Object(a.a)(Object(a.a)({},e),{},{name:i,fieldIndex:n})}return{fieldIndex:t.fields[i].fieldIndex};case"label-expression":var r=JSON.stringify(e.label);if(!t.fields[r]){var s=t.indexCount++;t.fields[r]=Object(a.a)(Object(a.a)({},e),{},{name:r,fieldIndex:s})}return{fieldIndex:t.fields[r].fieldIndex};case"field":var o=e.field;return"aggregate"===e.target&&t.fields[o]||(t.fields[o]=Object(a.a)(Object(a.a)({},e),{},{name:o})),{field:o};case"statistic":return t.fields[e.name]=Object(a.a)({},e),{field:e.name}}}function I(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=A(e,{type:"label-expression",target:n,context:{mesh:!0},resultType:"string",label:{labelExpression:i.labelExpression,labelExpressionInfo:i.labelExpressionInfo?{expression:i.labelExpressionInfo.expression}:null,symbol:!!i.symbol,where:i.where}}),l=o.fieldIndex;return Object(a.a)(Object(a.a)({},j(i,t,s)),{},{fieldIndex:l,target:n,index:r})}function F(t,e){var i,r={mesh:!0,storage:!0},a=Object(n.a)(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=s.name,l=s.outStatistic,u=l.statisticType,c=l.onStatisticField,h=null,f=null,v=null,d="numeric",p="feature";"onStatisticValueExpression"in l?f=A(t,{type:"expression",target:p,valueExpression:l.onStatisticValueExpression,resultType:d}).fieldIndex:"onStatisticNormalizationField"in l?(h=A(t,{type:"field",target:p,field:c,resultType:d}).field,v=l.onStatisticNormalizationField):h=A(t,{type:"field",target:p,field:c,resultType:d}).field,A(t,{type:"statistic",target:"aggregate",name:o,context:r,inField:h,inNormalizationField:v,inFieldIndex:f,statisticType:u})}}catch(g){a.e(g)}finally{a.f()}}function E(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(l.p)(t,{indexCount:0,fields:{}});switch(i.type){case"simple":case"dot-density":return function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.getSymbols();return{type:"simple",symbol:j(r.length?r[0]:null,e,n),isDotDensity:i}}(0,i,"dot-density"===i.type,r);case"class-breaks":return function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={mesh:!0,use:"renderer.field"},a=i.backgroundFillSymbol,s=L(t,{target:e,field:i.field,valueExpression:i.valueExpression,resultType:"numeric",context:r}),o=s.field,l=s.fieldIndex,u=i.normalizationType,c="log"===u?"esriNormalizeByLog":"percent-of-total"===u?"esriNormalizeByPercentOfTotal":"field"===u?"esriNormalizeByField":null,h=i.classBreakInfos.map((function(t){return{symbol:j(t.symbol,i,n),min:t.minValue,max:t.maxValue}})).sort((function(t,e){return t.min-e.min}));return{type:"interval",attributes:t.fields,field:o,fieldIndex:l,backgroundFillSymbol:j(a,i,n),defaultSymbol:j(i.defaultSymbol,i,n),intervals:h,normalizationField:i.normalizationField,normalizationTotal:i.normalizationTotal,normalizationType:c,isMaxInclusive:i.isMaxInclusive}}(s,e,i,r);case"unique-value":return function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[],o=i.backgroundFillSymbol,l={target:e,context:{mesh:!0},resultType:"string"};if(i.field&&"string"!=typeof i.field)throw new c.a("ValidationError","Expected renderer.field to be a string",i);var u,h=L(t,Object(a.a)(Object(a.a)({},l),{},{field:i.field,valueExpression:i.valueExpression})),f=h.field,v=h.fieldIndex,d=Object(n.a)(i.uniqueValueInfos);try{for(d.s();!(u=d.n()).done;){var p=u.value;s.push({value:""+p.value,symbol:j(p.symbol,i,r)})}}catch(g){d.e(g)}finally{d.f()}return{type:"map",attributes:t.fields,field:f,fieldIndex:v,field2:L(t,Object(a.a)(Object(a.a)({},l),{},{field:i.field2})).field,field3:L(t,Object(a.a)(Object(a.a)({},l),{},{field:i.field3})).field,fieldDelimiter:i.fieldDelimiter,backgroundFillSymbol:j(o,i),defaultSymbol:j(i.defaultSymbol,i),map:s}}(s,e,i,r);case"dictionary":return function(t,e){return{type:"dictionary",renderer:e.toJSON()}}(0,i,r)}}},872:function(t,e,i){"use strict";i.d(e,"a",(function(){return ht})),i.d(e,"b",(function(){return ft}));var n=i(12),r=i(2),a=i(3),s=i(24),o=i(58),l=i(791),u=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();u.instance=null;var c=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.g)(t)){this._isClosed=!0;var e=Object(s.a)(t);return this._processMultipath(e.rings),e}if(Object(o.h)(t)){this._isClosed=!1;var i=Object(s.a)(t);return this._processMultipath(i.paths),i}if(Object(o.d)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var n=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(n),{rings:[n]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){if(t){var e,i=Object(n.a)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this._processPath(r)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"_processPath",value:function(t){if(t){var e,i,n,r,a,s,o=t.length,u=t[0];this._isClosed&&++o;for(var c=1;c<o;++c){var h,f=(h=this._isClosed&&c===o-1?t[0]:t[c])[0]-u[0],v=h[1]-u[1],d=Math.sqrt(f*f+v*v);c>1&&d>0&&n>0&&(e*f+i*v)/d/n<=this._maxCosAngle&&Object(l.j)(u,1),1===c&&(r=f,a=v,s=d),d>0&&(u=h,e=f,i=v,n=d)}this._isClosed&&n>0&&s>0&&(e*r+i*a)/s/n<=this._maxCosAngle&&Object(l.j)(t[0],1)}}}]),t}(),h=i(5),f=i(6),v=.03,d=function(){function t(){Object(r.a)(this,t),this._path=[]}return Object(a.a)(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),p=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e}},{key:"calculateLength",value:function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,i=t?t.length:0,n=0;n<i-1;++n)e+=this.calculateSegLength(t,n);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,i=t?t.length:0,n=0;n<i-1;++n)e+=(t[n+1][0]-t[n][0])*(t[n+1][1]+t[n][1]);return e/2}},{key:"getCoord2D",value:function(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}},{key:"getSegCoord2D",value:function(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}},{key:"getAngle",value:function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1];return Math.atan2(r,n)}},{key:"getSegAngle",value:function(t,e,i){return this.getAngle(t[e],t[e+1],i)}},{key:"getAngleCS",value:function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],a=Math.sqrt(n*n+r*r);return a>0?[n/a,r/a]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}},{key:"cut",value:function(t,e,i,n){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),n>=1?t[e+1]:this.getSegCoord2D(t,e,n)]}},{key:"addSegment",value:function(t,e,i){i&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,i){var n=[];return this.appendSubCurve(n,t,e,i)?n:null}},{key:"appendSubCurve",value:function(t,e,i,n){for(var r=e?e.length-1:0,a=0,s=!0,o=0;o<r;){var l=this.calculateSegLength(e,o);if(0!==l){if(s){if(a+l>i){var u=(i-a)/l,c=1,h=!1;a+l>=n&&(c=(n-a)/l,h=!0);var f=this.cut(e,o,u,c);if(f&&this.addSegment(t,f,s),h)break;s=!1}}else{if(a+l>n){var v=this.cut(e,o,0,(n-a)/l);v&&this.addSegment(t,v,s);break}this.addSegment(t,[e[o],e[o+1]],s)}a+=l,++o}else++o}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var i=t?t.length-1:0,n=0,r=-1;r<i;){++r;var a=this.calculateSegLength(t,r);if(0!==a){if(n+a>e){var s=(e-n)/a;return this.getCoord2D(t[r],t[r+1],s)}n+=a}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,n=-1;n<i;){if(t[++n+1][0]!==t[n][0]||t[n+1][1]!==t[n][1])return!1;if(e&&t[n+1][2]!==t[n][2])return!1}return!0}},{key:"offset",value:function(t,e,i,n,r){if(!t||t.length<2)return null;var a=t.length,s=t[0][0]===t[a-1][0]&&t[0][1]===t[a-1][1];if(s){if(t.length<3)return null;--a}for(var o=[],l=s?t[a-1]:null,u=t[0],c=0;c<a;c++){var h=c===a-1?s?t[0]:null:t[c+1];if(l)if(h){var f=[h[0]-u[0],h[1]-u[1]];this.normalize(f);var v=[u[0]-l[0],u[1]-l[1]];this.normalize(v);var d=v[0]*f[1]-v[1]*f[0],p=v[0]*f[0]+v[1]*f[1];if(d>=0==e<=0){var g=[f[0]-v[0],f[1]-v[1]];this.normalize(g);var m=Math.sqrt((1+p)/2),_=-Math.abs(e)/m;o.push([u[0]-g[0]*_,u[1]-g[1]*_])}else switch(i){case"Mitered":var y=Math.sqrt((1+p)/2);if(y>0&&1/y<n){var b=[f[0]-v[0],f[1]-v[1]];this.normalize(b);var x=Math.abs(e)/y;o.push([u[0]-b[0]*x,u[1]-b[1]*x]);break}case"Bevelled":o.push([u[0]+v[1]*e,u[1]-v[0]*e]),o.push([u[0]+f[1]*e,u[1]-f[0]*e]);break;case"Rounded":o.push([u[0]+v[1]*e,u[1]-v[0]*e]);for(var O=.2,k=1;k<5;k++,O+=.2){var j=[v[1]*(1-O)+f[1]*O,-v[0]*(1-O)-f[0]*O];this.normalize(j),o.push([u[0]+j[0]*e,u[1]+j[1]*e])}o.push([u[0]+f[1]*e,u[1]-f[0]*e]);break;case"Square":default:if(d<0)o.push([u[0]+(v[1]+v[0])*e,u[1]+(v[1]-v[0])*e]),o.push([u[0]+(f[1]-f[0])*e,u[1]-(f[0]+f[1])*e]);else{var w=Math.sqrt((1+Math.abs(p))/2),P=[f[0]-v[0],f[1]-v[1]];this.normalize(P);var S=e/w;o.push([u[0]-P[0]*S,u[1]-P[1]*S])}}}else{var M=[u[0]-l[0],u[1]-l[1]];this.normalize(M),o.push([u[0]+M[1]*e,u[1]-M[0]*e])}else{var C=[h[0]-u[0],h[1]-u[1]];this.normalize(C),o.push([u[0]+C[1]*e,u[1]-C[0]*e])}l=u,u=h}return s&&o.push([o[0][0],o[0][1]]),o}}]),t}(),g=1.7320508075688772,m=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new _(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();m.instance=null;var _=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._width=(void 0!==n.width?n.width:5)*a,s._arrowType=void 0!==n.geometricEffectArrowType?n.geometricEffectArrowType:"OpenEnded",s._offsetFlattenError=v*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){switch(this._arrowType){case"OpenEnded":default:return this._constructSimpleArrow(t,!0);case"Block":return this._constructSimpleArrow(t,!1);case"Crossed":return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var i=this._curveHelper.calculatePathLength(t),n=this._width;i<2*n&&(n=i/2);var r=this._curveHelper.getSubCurve(t,0,i-n);if(!r)return null;var a=n/2;if(this._curveHelper.isEmpty(r,!1))return null;var s=this._constructOffset(r,-a);if(!s)return null;var o=this._constructOffset(r,a);if(!o)return null;var l=this._constructArrowBasePoint(s,-a/2);if(!l)return null;var u=this._constructArrowBasePoint(o,a/2);if(!u)return null;var c=t[t.length-1];e||(this._makeControlPoint(o,!0),this._makeControlPoint(s,!0));var h=new d;return h.addPath(o,!0),h.lineTo(u),this._makeControlPoint(h.path()),h.lineTo(c),this._makeControlPoint(h.path()),h.lineTo(l),this._makeControlPoint(h.path()),h.addPath(s,!1),e?{paths:[h.path()]}:(h.close(),{rings:[h.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<3.732050807568877*i&&(i=e/3.732050807568877);var n=this._curveHelper.getSubCurve(t,0,e-i*(1+g));if(!n)return null;var r=i/2;if(this._curveHelper.isEmpty(n,!1))return null;var a=this._constructOffset(n,r);if(!a)return null;var s=this._constructOffset(n,-r);if(!s)return null;var o=this._curveHelper.getSubCurve(t,0,e-i);if(!o)return null;if(this._curveHelper.isEmpty(o,!1))return null;var l=this._constructOffset(o,r);if(!l)return null;var u=this._constructOffset(o,-r);if(!u)return null;var c=l[l.length-1],h=this._constructArrowBasePoint(l,r/2);if(!h)return null;var f=u[u.length-1],v=this._constructArrowBasePoint(u,-r/2);if(!v)return null;var p=t[t.length-1];this._makeControlPoint(a,!1),this._makeControlPoint(s,!1);var m=new d;return m.addPath(a,!0),this._makeControlPoint(m.path()),m.lineTo(f),m.lineTo(v),this._makeControlPoint(m.path()),m.lineTo(p),this._makeControlPoint(m.path()),m.lineTo(h),this._makeControlPoint(m.path()),m.lineTo(c),this._makeControlPoint(m.path()),m.addPath(s,!1),{paths:[m.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,"Rounded",4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],n=t[t.length-1],r=[n[0]-i[0],n[1]-i[1]];return this._curveHelper.normalize(r),[n[0]+r[1]*e,n[1]-r[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(l.j)(e?t[0]:t[t.length-1],1)}}]),i}(l.a),y=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new b(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();y.instance=null;var b=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._size=(void 0!==i.size?i.size:1)*n,this._offsetFlattenError=v*n}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,"Rounded",4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if(Object(o.g)(t)){if(0===this._size)return t;var r,a=[],s=Object(n.a)(t.rings);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=this._curveHelper.offset(l,this._size,"Rounded",4,this._offsetFlattenError);u&&a.push(u)}}catch(m){s.e(m)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)&&this._size>0){var c,h=[],f=Object(n.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var v=c.value;if(v&&v.length>1){var d=this._curveHelper.offset(v,this._size,"Rounded",4,this._offsetFlattenError),p=this._curveHelper.offset(v,-this._size,"Rounded",4,this._offsetFlattenError);if(d&&p){for(var g=p.length-1;g>=0;g--)d.push(p[g]);d.push([d[0][0],d[0][1]]),h.push(d)}}}}catch(m){f.e(m)}finally{f.f()}if(h.length)return{rings:h}}Object(o.f)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}(),x=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new O(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();x.instance=null;var O=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._beginCut=(void 0!==n.beginCut?n.beginCut:1)*a,s._endCut=(void 0!==n.endCut?n.endCut:1)*a,s._middleCut=(void 0!==n.middleCut?n.middleCut:0)*a,s._invert=void 0!==n.invert&&n.invert,s._beginCut<0&&(s._beginCut=0),s._endCut<0&&(s._endCut=0),s._middleCut<0&&(s._middleCut=0),s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,n=this._middleCut,r=this._curveHelper.calculatePathLength(t),a=[];if(this._invert)if(0===e&&0===i&&0===n);else if(e+i+n>=r)a.push(t);else{var s=this._curveHelper.getSubCurve(t,0,e);s&&a.push(s),(s=this._curveHelper.getSubCurve(t,.5*(r-n),.5*(r+n)))&&a.push(s),(s=this._curveHelper.getSubCurve(t,r-i,i))&&a.push(s)}else if(0===e&&0===i&&0===n)a.push(t);else if(e+i+n>=r);else if(0===n){var o=this._curveHelper.getSubCurve(t,e,r-i);o&&a.push(o)}else{var l=this._curveHelper.getSubCurve(t,e,.5*(r-n));l&&a.push(l),(l=this._curveHelper.getSubCurve(t,.5*(r+n),r-i))&&a.push(l)}return 0===a.length?null:{paths:a}}}]),i}(l.a),k=i(32),j=function(){function t(){Object(r.a)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return Object(a.a)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var n=0;n<t.length;n++){var r=Math.abs(t[n]);i&&r<1e-7&&(r=1e-7),this._values.push(r),this._length+=r}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}(),w=function(){function t(){Object(r.a)(this,t),this.reset()}return Object(a.a)(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),P=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r.a)(this,i),(t=e.call(this,n,a))._tolerance=v,t._currentPosition=new w,t}return Object(a.a)(i,[{key:"updateTolerance",value:function(t){this._tolerance=v*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this.setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=new w;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngle(this._currentPosition),i=Object(k.a)(e,2),n=i[0],r=i[1];t.ca=n,t.sa=r}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new w;if(!this._nextPosition(t,n,null,i))return!1;n.copyTo(this._currentPosition),e.pt=this._getPoint(n);var r=this._getAngle(n),a=Object(k.a)(r,2),s=a[0],o=a[1];return e.ca=s,e.sa=o,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],i=new w;return this._nextPosition(t,i,e,1)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,i,n){if(this._currentPosition.isPathEnd)return!1;var r=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(r/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===r){var a=this._path[e.segment];i.push([a[0],a[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var s=this._path[e.segment+1];i.push([s[0],s[1]])}if(r=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this.nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart())return 0!==n&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,1===n?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===r){var o=this._path[e.segment];i.push([o[0],o[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,r));var l=e.abscissa/e.segmentLength;if(1===l){var u=this._path[e.segment+1];i.push([u[0],u[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,l))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"setPosAtNextPart",value:function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this.nextSegment()),this._partSegCount++,1===Object(l.f)(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var t=this._partSegCount;t;)this.previousSegment(),--t;this._currentPosition.segment=this.nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this.getStartPointIndex();this._ctrlPtBegin=1===Object(l.f)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===Object(l.f)(this._path[i]),this._patternLength>0){var n=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,r=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,a=Math.round((this._partLength-(n+r))/this._patternLength);a<=0&&(a=n+r>0?0:1),this._partLengthRatio=this._partLength/(n+r+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"previousSegment",value:function(){return--this._seg}},{key:"nextSegment",value:function(){return++this._seg}},{key:"getStartPointIndex",value:function(){return this._seg}},{key:"getEndPointIndex",value:function(){return this._seg+1}}]),i}(p),S=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new M(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();S.instance=null;var M=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._walker=new P,s._walker.updateTolerance(a),s._endings=n.lineDashEnding,s._customDashPos=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._offsetAtEnd=void 0!==n.customEndingOffset?n.customEndingOffset*a:0,s._pattern=new j,s._pattern.init(n.dashTemplate,!0),s._pattern.scale(a),s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case"HalfPattern":case"HalfGap":default:this._pattern.extPtGap=0;break;case"FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case"FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case"NoConstraint":this.isClosed||(e=!1);break;case"Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var n;if(this.iteratePath)n=this._pattern.nextValue();else{var r;switch(this._endings){case"HalfPattern":default:r=.5*this._pattern.firstValue();break;case"HalfGap":r=.5*-this._pattern.lastValue();break;case"FullGap":r=-this._pattern.lastValue();break;case"FullPattern":r=0;break;case"NoConstraint":case"Custom":r=-this._customDashPos}var a=r/this._pattern.length();r=(a-=Math.floor(a))*this._pattern.length(),this._pattern.reset(),n=this._pattern.nextValue();for(var s=!1;r>=n;)r-=n,n=this._pattern.nextValue(),s=!s;n-=r,s?(this._walker.nextPosition(n),n=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(n),n=this._pattern.nextValue(),this._walker.nextPosition(n),n=this._pattern.nextValue())}var o=this._walker.nextCurve(n);return o?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),d.mergePath(o,this._firstCurve),this._firstCurve=null)):(n=this._pattern.nextValue(),!this._walker.nextPosition(n)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(o=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,o=this._firstCurve,this._firstCurve=null),{paths:[o]}}}]),i}(l.a),C=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new T(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();C.instance=null;var T=function(){function t(e,i,n){switch(Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._width=(void 0!==i.width?i.width:2)*n,i.method){case"Mitered":default:this._method="Mitered";break;case"Bevelled":this._method="Bevelled";break;case"Rounded":case"TrueBuffer":this._method="Rounded";break;case"Square":this._method="Square"}this._option=i.option,this._offsetFlattenError=v*n,this._option}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if(Object(o.g)(t)&&this._width>0){var i,r=[],a=Object(n.a)(t.rings);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=this._curveHelper.calculatePathLength(s),u=this._curveHelper.offset(s,this._width,this._method,4,this._offsetFlattenError);u&&(l<0&&u.reverse(),r.push(u))}}catch(c){a.e(c)}finally{a.f()}if(r.length)return{rings:r}}t=this._inputGeometries.next()}return null}}]),t}(),L=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new A(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();L.instance=null;var A=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._length=(void 0!==n.length?n.length:20)*a,s._angle=void 0!==n.angle?n.angle:225,s._position=void 0!==n.position?n.position:50,s._length<0&&(s._length=-s._length),s._position<20&&(s._position=20),s._position>80&&(s._position=80),s._mirror=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],n=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(n);var r=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],a=Math.cos((90-this._angle)/180*Math.PI),s=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(s=-s),this._mirror=!this._mirror,{paths:[[e,[r[0]-this._length/2*a,r[1]-this._length/2*s],[r[0]+this._length/2*a,r[1]+this._length/2*s],i]]}}}]),i}(l.a),I=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new F(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();I.instance=null;var F=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?-i.offsetY*n:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if(Object(o.g)(t)){var e=Object(s.a)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if(Object(o.h)(t)){var i=Object(s.a)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if(Object(o.e)(t)){var n=Object(s.a)(t);return this._movePath(n.points,this._offsetX,this._offsetY),n}if(Object(o.f)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._movePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_movePath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;s[0]+=e,s[1]+=i}}catch(o){a.e(o)}finally{a.f()}}}}]),t}(),E=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new V(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();E.instance=null;var V=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._offset=(void 0!==i.offset?i.offset:1)*n,this._method=i.method,this._option=i.option,this._offsetFlattenError=v*n,this._option}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if(Object(o.d)(t)){if("Rounded"===this._method&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if(Object(o.g)(t)){var r,a=[],s=Object(n.a)(t.rings);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=this._curveHelper.offset(l,this._offset,this._method,4,this._offsetFlattenError);u&&a.push(u)}}catch(p){s.e(p)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)){var c,h=[],f=Object(n.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var v=c.value,d=this._curveHelper.offset(v,this._offset,this._method,4,this._offsetFlattenError);d&&h.push(d)}}catch(p){f.e(p)}finally{f.f()}if(h.length)return{paths:h}}t=this._inputGeometries.next()}return null}}]),t}(),z=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new R(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();z.instance=null;var R=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if(Object(o.h)(t)){var e=Object(s.a)(t);return Object(l.h)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}(),G=i(230),B=i(107),N=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new U(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();N.instance=null;var U=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?-i.angle*Math.PI/180:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=Object(B.g)();Object(G.a)(e,t);var i=(e[2]+e[0])/2,n=(e[3]+e[1])/2;if(Object(o.d)(t)){var r={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(r.rings,i,n),r}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._rotateMultipath(a.rings,i,n),a}if(Object(o.h)(t)){var l=Object(s.a)(t);return this._rotateMultipath(l.paths,i,n),l}if(Object(o.e)(t)){var u=Object(s.a)(t);return this._rotatePath(u.points,i,n),u}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._rotatePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_rotatePath",value:function(t,e,i){if(t){var r,a=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle),o=Object(n.a)(t);try{for(o.s();!(r=o.n()).done;){var l=r.value,u=l[0]-e,c=l[1]-i;l[0]=e+u*a-c*s,l[1]=i+u*s+c*a}}catch(h){o.e(h)}finally{o.f()}}}}]),t}(),D=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new H(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();D.instance=null;var H=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=Object(B.g)();Object(G.a)(e,t);var i=(e[2]+e[0])/2,n=(e[3]+e[1])/2;if(Object(o.d)(t)){var r={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(r.rings,i,n),r}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._scaleMultipath(a.rings,i,n),a}if(Object(o.h)(t)){var l=Object(s.a)(t);return this._scaleMultipath(l.paths,i,n),l}if(Object(o.e)(t)){var u=Object(s.a)(t);return this._scalePath(u.points,i,n),u}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._scalePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_scalePath",value:function(t,e,i){if(t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value,o=(s[0]-e)*this._xFactor,l=(s[1]-i)*this._yFactor;s[0]=e+o,s[1]=i+l}}catch(u){a.e(u)}finally{a.f()}}}}]),t}(),Y=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new q(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Y.instance=null;var X,W,q=function(){function t(e,i,n){Object(r.a)(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*n,this._period=(void 0!==i.period?i.period:3)*n,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new j,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new P,this._walker.updateTolerance(n)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if(Object(o.h)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if(Object(o.g)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e,i=[],r=Object(n.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(this._walker.init(a,this._pattern))switch(this._style){case"Sinus":default:i.push(this._constructCurve(a,!1));break;case"Square":i.push(this._constructSquare(a));break;case"Triangle":i.push(this._constructTriangle(a));break;case"Random":i.push(this._constructCurve(a,!0))}else i.push(a)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_constructCurve",value:function(t,e){var i=new d,n=this._walker.calculatePathLength(t),r=Math.round(n/this._period);0===r&&(r=1);var a=16*r+1,s=n/r,o=this._period/16,l=1/a,u=2*Math.PI*n/s,c=2*Math.PI*Math.random(),h=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),v=.75-Math.random()/2,p=.75-Math.random()/2,g={};this._walker.curPointAndAngle(g),i.startPath(g.pt);for(var m=0;;){if(!this._walker.nextPointAndAngle(o,g)){i.lineTo(t[t.length-1]);break}var _=m,y=void 0;if(m+=l,e){var b=this._height/2*(1+.3*Math.sin(v*u*_+c));y=b*Math.sin(u*_+h),y+=b*Math.sin(p*u*_+f),y/=2}else y=.5*this._height*Math.sin(.5*u*_);i.lineTo([g.pt[0]-y*g.sa,g.pt[1]+y*g.ca])}return i.path()}},{key:"_constructSquare",value:function(t){var e=new d,i=this._walker.calculatePathLength(t),n=Math.round(i/this._period);0===n&&(n=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var o={};if(this._walker.nextPointAndAngle(this._period,o)){var l={};this._walker.nextPointAndAngle(this._period,l)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),e.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/2*l.ca]),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new d,i=this._walker.calculatePathLength(t),n=Math.round(i/this._period);0===n&&(n=1);for(var r=!0;;){var a=!1;if(this._walker.curPositionIsValid()){var s={};this._walker.curPointAndAngle(s);var o={};if(this._walker.nextPointAndAngle(this._period/2,o)){var l={};this._walker.nextPointAndAngle(this._period,l)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(s.pt),r=!1):e.lineTo(s.pt),e.lineTo([o.pt[0]-this._height/2*o.sa,o.pt[1]+this._height/2*o.ca]),e.lineTo([l.pt[0]+this._height/2*l.sa,l.pt[1]-this._height/2*l.ca])),a=!0)}}if(!a){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}();(W=X||(X={})).NoConstraint="NoConstraint",W.WithMarkers="WithMarkers",W.WithFullGap="WithFullGap",W.WithHalfGap="WithHalfGap",W.Custom="Custom";var J=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new K(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();J.instance=null;var K=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._grometryWalker=new P,s._grometryWalker.updateTolerance(a),s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._originalEndings=n.endings,s._offsetAtEnd=void 0!==n.customEndingOffset?n.customEndingOffset*a:0,s._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._pattern=new j,s._pattern.init(n.placementTemplate,!1),s._pattern.scale(a),s._endings=s._originalEndings,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===X.WithFullGap&&this.isClosed?this._endings=X.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,n=!0;switch(this._endings){case X.NoConstraint:i=-this._position,i=this._adjustPosition(i),n=!1;break;case X.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case X.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case X.WithMarkers:i=0;break;case X.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(t,this._pattern,n))return null;this._pattern.reset();for(var r=0;i>r;)i-=r,r=this._pattern.nextValue();e=r-=i,this.iteratePath=!0}var a={};return this._grometryWalker.nextPointAndAngle(e,a)?this._endings===X.WithFullGap&&this._grometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===X.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]+this._offset*a.sa,a.pt[1]-this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(l.b),Z=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new $(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Z.instance=null;var $=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._type=n.extremityPlacement,s._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._beginProcessed=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e;switch(this._type){case"Both":default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":e=this._atExtremities(t,this._position,!0);break;case"JustEnd":e=this._atExtremities(t,this._position,!1);break;case"None":}return e}},{key:"_atExtremities",value:function(t,e,i){var n=t.length;if(n<2)return null;for(var r,a=i?1:n-2,s=i?n:-1,o=i?1:-1,u=0,c=i?t[0]:t[n-1],h=a;h!==s;h+=o){r=c,c=t[h];var f=this._curveHelper.calculateLength(r,c);if(u+f>e){var v=(e-u)/f,d=this._curveHelper.getAngleCS(r,c,v),p=Object(k.a)(d,2),g=p[0],m=p[1],_=Object(l.e)(r,c,v);return this.internalPlacement.setTranslate(_[0]-this._offset*m,_[1]+this._offset*g),this._angleToLine&&this.internalPlacement.setRotateCS(-g,-m),this.internalPlacement}u+=f}return null}}]),i}(l.b),Q=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new tt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Q.instance=null;var tt=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._walker=new P,s._walker.updateTolerance(a),s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._beginGap=void 0!==n.beginPosition?n.beginPosition*a:0,s._endGap=void 0!==n.endPosition?n.endPosition*a:0,s._flipFirst=void 0===n.flipFirst||n.flipFirst,s._pattern=new j,s._pattern.init(n.positionArray,!1,!1),s._subPathLen=0,s._posCount=s._pattern.size(),s._isFirst=!0,s._prevPos=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,n=this._beginGap+i;e=n-this._prevPos,this._prevPos=n}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var r=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+r;e=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var s={};if(!this._walker.nextPointAndAngle(e,s,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]+this._offset*s.sa,s.pt[1]-this._offset*s.ca);var o,l,u=this._isFirst&&this._flipFirst;return this._angleToLine?(o=s.ca,l=s.sa):(o=1,l=0),u&&(o=-o,l=-l),this.internalPlacement.setRotateCS(o,l),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(l.b),et=i(886),it=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new nt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();it.instance=null;var nt=function(){function t(e,i,n){if(Object(r.a)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==i.stepX?Math.abs(i.stepX):16)*n,this._stepY=(void 0!==i.stepY?Math.abs(i.stepY):16)*n,0!==this._stepX&&0!==this._stepY&&e&&void 0!==e.rings&&e.rings){if(this._gridType=void 0!==i.gridType?i.gridType:"Fixed","Random"===this._gridType)this._randomness=void 0!==i.randomness?i.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==i.gridAngle?i.gridAngle:0,this._shiftOddRows=void 0!==i.shiftOddRows&&i.shiftOddRows,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new et.a,this._calculateMinMax(e),this._geometry=e}}return Object(a.a)(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,i,r,a,s,o,l,u;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,s=o=Number.MAX_VALUE,l=u=-Number.MAX_VALUE;var c,h=Object(n.a)(t.rings);try{for(h.s();!(c=h.n()).done;)for(var f=c.value,v=f?f.length:0,d=0;d<v;++d)e=f[d][0]-this._graphicOriginX-this._offsetX,i=f[d][1]-this._graphicOriginY-this._offsetY,r=this._cosAngle*e-this._sinAngle*i,a=this._sinAngle*e+this._cosAngle*i,s=Math.min(s,r),l=Math.max(l,r),o=Math.min(o,a),u=Math.max(u,a)}catch(p){h.e(p)}finally{h.f()}s+=this._graphicOriginX,l+=this._graphicOriginX,o+=this._graphicOriginY,u+=this._graphicOriginY,this._xMin=Math.round(s/this._stepX),this._xMax=Math.round(l/this._stepX),this._yMin=Math.round(o/this._stepY),this._yMax=Math.round(u/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,n=void 0;return this._currentX++,"Random"===this._gridType?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,n=this._graphicOriginY+e+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,n=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,n),this._internalPlacement}}}]),t}(),rt=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new at(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();rt.instance=null;var at=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._relativeTo=n.relativeTo,s._position=void 0!==n.startPointOffset?n.startPointOffset*a:0,s._epsilon=.001*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._position;if("SegmentMidpoint"===this._relativeTo){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var n=t[i-1],r=t[i],a=this._curveHelper.calculateLength(n,r);if(!(a<this._epsilon)){var s=.5+this._position/a,o=this._curveHelper.getAngleCS(n,r,s),u=Object(k.a)(o,2),c=u[0],h=u[1],f=Object(l.e)(n,r,s);return this.internalPlacement.setTranslate(f[0]-this._offset*h,f[1]+this._offset*c),this._angleToLine&&this.internalPlacement.setRotateCS(c,h),this.internalPlacement}}return this.iteratePath=!1,null}"LineEnd"===this._relativeTo&&Object(l.i)(t);var v=this.onLine(t,e);return"LineEnd"===this._relativeTo&&Object(l.i)(t),v}},{key:"onLine",value:function(t,e){var i,n=!1;switch(this._relativeTo){case"LineMiddle":default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case"LineBeginning":i=e;break;case"LineEnd":i=e,n=!0}for(var r,a=t.length,s=0,o=t[0],u=1;u<a;++u){r=o,o=t[u];var c=this._curveHelper.calculateLength(r,o);if(s+c>i){var h=(i-s)/c,f=this._curveHelper.getAngleCS(r,o,h),v=Object(k.a)(f,2),d=v[0],p=v[1],g=Object(l.e)(r,o,h),m=n?this._offset:-this._offset;return this.internalPlacement.setTranslate(g[0]-m*p,g[1]+m*d),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-d,-p):this.internalPlacement.setRotateCS(d,p)),this.internalPlacement}s+=c}return null}}]),i}(l.b),st=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new ot(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();st.instance=null;var ot=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n,a){var s;return Object(r.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._endPoints=void 0===n.placeOnEndPoints||n.placeOnEndPoints,s._controlPoints=void 0===n.placeOnControlPoints||n.placeOnControlPoints,s._regularVertices=void 0===n.placeOnRegularVertices||n.placeOnRegularVertices,s._tags=[],s._tagIterator=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],n=e[1];if(0!==this._offset){var r=Math.cos(e[2]),a=Math.sin(e[2]);i-=this._offset*a,n+=this._offset*r}return this.internalPlacement.setTranslate(i,n),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,i,n=Object(l.g)(t),r=t.length-1,a=0,s=0,o=0,u=0,c=0;a<r;){e=t[++a-1],i=t[a];var h=Object(l.f)(e),f=Object(l.f)(i);(this._angleToLine||0!==this._offset)&&(u=this._curveHelper.getAngle(e,i,0)),1===a?n?(s=u,o=h):this._endPoints&&this._tags.push([e[0],e[1],u]):1===h?this._controlPoints&&this._tags.push([e[0],e[1],lt(c,u)]):this._regularVertices&&this._tags.push([e[0],e[1],lt(c,u)]),(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,i,1)),a===r&&(n?1===f||1===o?this._controlPoints&&this._tags.push([i[0],i[1],lt(c,s)]):this._regularVertices&&this._tags.push([i[0],i[1],lt(c,s)]):this._endPoints&&this._tags.push([i[0],i[1],c]))}this._tagIterator=0}}]),i}(l.b);function lt(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}var ut=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i){return new ct(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ut.instance=null;var ct=function(){function t(e,i,n){Object(r.a)(this,t),this._geometry=e,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._method=void 0!==i.method?i.method:"OnPolygon",this._internalPlacement=new et.a}return Object(a.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&void 0!==t.rings?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){var e=!1;switch(this._method){case"OnPolygon":default:case"CenterOfMass":case"BoundingBoxCenter":var i=Object(B.g)();Object(G.a)(i,t),this._internalPlacement.setTranslate((i[2]+i[0])/2+this._offsetX,(i[3]+i[1])/2-this._offsetY),e=!0}return e?this._internalPlacement:null}}]),t}();function ht(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return u.local();case"CIMGeometricEffectArrow":return m.local();case"CIMGeometricEffectBuffer":return y.local();case"CIMGeometricEffectCut":return x.local();case"CIMGeometricEffectDashes":return S.local();case"CIMGeometricEffectDonut":return C.local();case"CIMGeometricEffectJog":return L.local();case"CIMGeometricEffectMove":return I.local();case"CIMGeometricEffectOffset":return E.local();case"CIMGeometricEffectReverse":return z.local();case"CIMGeometricEffectRotate":return N.local();case"CIMGeometricEffectScale":return D.local();case"CIMGeometricEffectWave":return Y.local()}return null}function ft(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return J.local();case"CIMMarkerPlacementAtExtremities":return Z.local();case"CIMMarkerPlacementAtRatioPositions":return Q.local();case"CIMMarkerPlacementInsidePolygon":return it.local();case"CIMMarkerPlacementOnLine":return rt.local();case"CIMMarkerPlacementOnVertices":return st.local();case"CIMMarkerPlacementPolygonCenter":return ut.local()}return null}},876:function(t,e,i){"use strict";i.d(e,"a",(function(){return T})),i.d(e,"b",(function(){return A})),i.d(e,"c",(function(){return L}));var n=i(9),r=i(12),a=i(2),s=i(3),o=i(14),l=i(37),u=i(52),c=i(886),h=i(5),f=i(6),v=i(230),d=i(58),p=i(107),g=i(911),m=i(872),_=i(898),y=Math.PI/180,b=o.a.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),x=function(){function t(e){Object(a.a)(this,t),this._t=e}return Object(s.a)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return this.multiply(t.createRotate(e))}},{key:"multiply",value:function(t){var e=this._t,i=t._t,n=e[0]*i[0]+e[3]*i[1],r=e[1]*i[0]+e[4]*i[1],a=e[2]*i[0]+e[5]*i[1]+i[2],s=e[0]*i[3]+e[3]*i[4],o=e[1]*i[3]+e[4]*i[4],l=e[2]*i[3]+e[5]*i[4]+i[5];return e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,this}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),n=Math.sin(e);return new t([i,-n,0,n,i,0])}}]),t}(),O=function(){function t(e){Object(a.a)(this,t),this._transfos=[],this._sizeTransfos=[],this._transfos.push(e||x.createIdentity()),this._sizeTransfos.push(e?e.scaleRatio():1)}return Object(s.a)(t,[{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;t.multiply(this.back()),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var i=t.symbolLayers;if(i){var n=t.effects;if(n){var r=this.executeEffects(n,e);if(r)for(var a=r.next();a;)this.drawSymbolLayers(i,a),a=r.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i,n=new g.a(e),a=Object(r.a)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=Object(m.a)(s);o&&(n=o.execute(n,s,1))}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var n=t[i];if(n&&!1!==n.enable){var r=n.effects;if(r){var a=this.executeEffects(r,e);if(a)for(var s=a.next();s;)this.drawSymbolLayer(n,s),s=a.next()}else this.drawSymbolLayer(n,e)}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(t,e);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=this._buildHatchPolyline(t,e,1);i&&(this.pushClipPath(e),this.drawMultiLayerSymbol(t.lineSymbol,i),this.popClipPath())}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var n=Object(m.b)(i);if(n){var r="CIMMarkerPlacementInsidePolygon"===i.type;r&&this.pushClipPath(e);var a=n.execute(e,i,1);if(a)for(var s=a.next();s;)this.drawMarker(t,s),s=a.next();r&&this.popClipPath()}}else{var o=new c.a;o.tx=e.x,o.ty=e.y,this.drawMarker(t,o)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){}},{key:"drawVectorMarker",value:function(t,e){if(t){var i=t.markerGraphics;if(i){var n=t.size,a=t.frame,s=a?a.ymax-a.ymin:0,o=n&&s?n/s:1,l=x.createIdentity();a&&l.translate(.5*-(a.xmax+a.xmin),.5*-(a.ymax+a.ymin));var u=t.anchorPoint;if(u){var c=u.x,h=u.y;"Absolute"!==t.anchorPointUnits&&a&&(c*=a.xmax-a.xmin,h*=a.ymax-a.ymin),l.translate(-c,-h)}1!==o&&l.scale(o,o),t.rotation&&l.rotate(t.rotation*y),l.translate(t.offsetX||0,t.offsetY||0),l.translate(e.tx,e.ty),this.push(l,t.scaleSymbolsProportionally);var f,v=Object(r.a)(i);try{for(v.s();!(f=v.n()).done;){var d=f.value;d&&d.symbol&&d.geometry||b.error("Invalid marker graphic",d),this.drawSymbol(d.symbol,d.geometry)}}catch(p){v.e(p)}finally{v.f()}this.pop()}}}},{key:"_buildHatchPolyline",value:function(t,e,i){var n=(void 0!==t.separation?t.separation:4)*i,r=void 0!==t.rotation?t.rotation:0;if(0===n)return null;n<0&&(n=-n);for(var a=0,s=.5*n;a>s;)a-=n;for(;a<-s;)a+=n;var o=Object(p.g)();Object(v.a)(o,e),o[0]-=s,o[1]-=s,o[2]+=s,o[3]+=s;for(var l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];r>180;)r-=180;for(;r<0;)r+=180;var u,c,h,f,d=Math.cos(r*y),g=Math.sin(r*y),m=-n*g,_=n*d;a=(void 0!==t.offsetX?t.offsetX*i:0)*g-(void 0!==t.offsetY?t.offsetY*i:0)*d,u=h=Number.MAX_VALUE,c=f=-Number.MAX_VALUE;for(var b=0,x=l;b<x.length;b++){var O=x[b],k=O[0],j=O[1],w=d*k+g*j,P=-g*k+d*j;u=Math.min(u,w),h=Math.min(h,P),c=Math.max(c,w),f=Math.max(f,P)}for(var S=d*u-g*(h=Math.floor(h/n)*n)-m*a/n,M=g*u+d*h-_*a/n,C=d*c-g*h-m*a/n,T=g*c+d*h-_*a/n,L=1+Math.round((f-h)/n),A=[],I=0;I<L;I++)S+=m,M+=_,C+=m,T+=_,A.push([[S,M],[C,T]]);return{paths:A}}}]),t}(),k=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(){var t;return Object(a.a)(this,i),(t=e.call(this)).reset(),t}return Object(s.a)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new _.a(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"drawSolidFill",value:function(t){!t||this._clipCount>0||(Object(d.g)(t)?this._processPath(t.rings,0):Object(d.h)(t)&&this._processPath(t.paths,0))}},{key:"drawSolidStroke",value:function(t,e,i){if(t&&!(this._clipCount>0)){var n=.5*this.transformSize(i);Object(d.g)(t)?this._processPath(t.rings,n):Object(d.h)(t)&&this._processPath(t.paths,n)}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"_processPath",value:function(t,e){if(t){var i,n=Object(r.a)(t);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=a?a.length:0;if(s>1){this._merge(this.transformPt(a[0]),e);for(var o=1;o<s;++o)this._merge(this.transformPt(a[o]),e)}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(O),j=function(t){Object(h.a)(i,t);var e=Object(f.a)(i);function i(t,n){var r;return Object(a.a)(this,i),(r=e.call(this,n))._ctx=t,r}return Object(s.a)(i,[{key:"drawSolidFill",value:function(t,e){if(t){if(Object(d.g)(t))this._buildPath(t.rings,!0);else{if(!Object(d.h)(t))return;this._buildPath(t.paths,!0)}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,n,r,a){if(t&&e&&0!==i){if(Object(d.g)(t))this._buildPath(t.rings,!0);else{if(!Object(d.h)(t))return;this._buildPath(t.paths,!1)}var s=this._ctx;s.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",s.lineWidth=this.transformSize(i)+.5,this._setCapStyle(n),this._setJoinStyle(r),s.miterLimit=a,s.stroke()}}},{key:"pushClipPath",value:function(t){this._ctx.save(),Object(d.g)(t)?this._buildPath(t.rings,!0):Object(d.h)(t)&&this._buildPath(t.paths,!0),this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"_buildPath",value:function(t,e){var i=this._ctx;if(i.beginPath(),t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=s?s.length:0;if(o>1){var l=this.transformPt(s[0]);i.moveTo(l[0],l[1]);for(var u=1;u<o;++u)l=this.transformPt(s[u]),i.lineTo(l[0],l[1]);e&&i.closePath()}}}catch(c){a.e(c)}finally{a.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case"Butt":this._ctx.lineCap="butt";break;case"Round":this._ctx.lineCap="round";break;case"Square":this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case"Bevel":this._ctx.lineJoin="bevel";break;case"Round":this._ctx.lineJoin="round";break;case"Miter":this._ctx.lineJoin="miter"}}}]),i}(O),w=i(912),P=Math.PI,S=P/2,M=o.a.getLogger("esri.symbols.cim.CIMSymbolHelper");function C(t,e){switch(e.type){case"CIMSymbolReference":t.drawSymbol(e.symbol,{type:"point",x:0,y:0});break;case"CIMPointSymbol":t.drawSymbol(e,{type:"point",x:0,y:0});break;case"CIMTextSymbol":break;case"CIMVectorMarker":var i=new c.a;t.drawMarker(e,i)}return t.envelope()}var T=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"getEnvelope",value:function(t){var e=new k;if(Array.isArray(t)){var i,n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;i?i.union(C(e,s)):i=C(e,s)}}catch(o){a.e(o)}finally{a.f()}return i}return C(e,t)}},{key:"getTextureAnchor",value:function(t){var e=this.getEnvelope(t);if(!e||e.width<=0||e.height<=0)return[0,0,0];var i=96/72,n=(e.x+.5*e.width)*i,r=-(e.y+.5*e.height)*i,a=e.width*i+2,s=e.height*i+2;return[n/a,r/s,s]}},{key:"rasterize",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=i||this.getEnvelope(e);if(!r||r.width<=0||r.height<=0)return[null,0,0,0,0];var a=96/72,s=(r.x+.5*r.width)*a,o=(r.y+.5*r.height)*a;t.width=r.width*a,t.height=r.height*a,i||(t.width+=2,t.height+=2);var l=t.getContext("2d"),u=x.createScale(a,-a);u.translate(.5*t.width-s,.5*t.height+o);var h=new j(l,u);switch(e.type){case"CIMPointSymbol":var f={type:"point",x:0,y:0};h.drawSymbol(e,f);break;case"CIMVectorMarker":var v=new c.a;h.drawMarker(e,v)}var d=l.getImageData(0,0,t.width,t.height),p=new Uint8Array(d.data);if(n)for(var g,m=0;m<p.length;m+=4)g=p[m+3]/255,p[m]=p[m]*g,p[m+1]=p[m+1]*g,p[m+2]=p[m+2]*g;return[p,t.width,t.height,-s/t.width,-o/t.height]}},{key:"fromSimpleMarker",value:function(t){var e,i,n,r=50,a=t.style;if("circle"===a||"esriSMSCircle"===a){var s=Math.acos(.995),o=Math.ceil(P/s/4);0===o&&(o=1),s=S/o,o*=4;var l=[];l.push([r,0]);for(var u=1;u<o;u++)l.push([r*Math.cos(u*s),-50*Math.sin(u*s)]);l.push([r,0]),e={rings:[l]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("cross"===a||"esriSMSCross"===a){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("diamond"===a||"esriSMSDiamond"===a)e={rings:[[[-50,0],[0,r],[r,0],[0,-50],[-50,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("square"===a||"esriSMSSquare"===a)e={rings:[[[-50,-50],[-50,r],[r,r],[r,-50],[-50,-50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r};else if("x"===a||"esriSMSX"===a){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,r],[0,0]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r}}else if("triangle"===a||"esriSMSTriangle"===a){var c=57.735026918962575,h=-c,f=2/3*100,v=f-100;e={rings:[[[h,v],[0,f],[c,v],[h,v]]]},i={xmin:h,ymin:v,xmax:c,ymax:f}}else"arrow"!==a&&"esriSMSArrow"!==a||(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-50,ymin:-50,xmax:r,ymax:r});if(e&&i){var d=[{type:"CIMSolidFill",enable:!0,color:t.color}];t.outline&&d.push({type:"CIMSolidStroke",enable:!0,width:t.outline.width,color:t.outline.color});var p={type:"CIMPolygonSymbol",symbolLayers:d};n={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:t.angle,size:t.size,offsetX:t.xoffset,offsetY:t.yoffset,frame:i,markerGraphics:[{type:"CIMMarkerGraphic",geometry:e,symbol:p}]}]}}return n}},{key:"fromCIMHatchFill",value:function(t){for(var e=void 0!==t.separation?t.separation:4,i=e/2,n=this._getLineSymbolPeriod(t.lineSymbol)||4;n<4;)n*=2;var r=n/2;return{type:"CIMVectorMarker",frame:{xmin:-r,xmax:r,ymin:-i,ymax:i},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-r,0],[r,0]]]},symbol:t.lineSymbol}],size:e}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var i,n=Object(r.a)(t.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=this._getEffectsRepeat(a.effects);if(s)return s;if(a){var o=this._getPlacementRepeat(a.markerPlacement);if(o)return o}}}catch(l){n.e(l)}finally{n.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n)switch(n.type){case"CIMGeometricEffectDashes":var a=n.dashTemplate;if(a&&a.length){var s,o=0,l=Object(r.a)(a);try{for(l.s();!(s=l.n()).done;){o+=s.value}}catch(u){l.e(u)}finally{l.f()}return 1&a.length&&(o*=2),o}break;case"CIMGeometricEffectWave":return n.period;default:M.error("unsupported geometric effect type ".concat(n.type))}}}catch(u){i.e(u)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i,n=0,a=Object(r.a)(e);try{for(a.s();!(i=a.n()).done;){n+=i.value}}catch(s){a.e(s)}finally{a.f()}return 1&e.length&&(n*=2),n}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e=t.markerPlacement,i=e.stepX/2,r=e.stepY/2,a={xmin:-i,xmax:i,ymin:-r,ymax:r},s=Object(n.a)({type:t.type},t);return s.markerPlacement=null,s.anchorPoint=null,{type:"CIMVectorMarker",frame:a,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[s]}}],size:e.stepY}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getFillColor(a);if(null!=s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getStrokeColor(a);if(void 0!==s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,n=Object(r.a)(e.symbolLayers);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=t.getStrokeWidth(a);if(void 0!==s)return s}}catch(o){n.e(o)}finally{n.f()}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var i=0;if(e.symbolLayers){var n,a=Object(r.a)(e.symbolLayers);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=t.getSize(s);o>i&&(i=o)}}catch(l){a.e(l)}finally{a.f()}}return i;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":return e.width;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":return e.size}}},{key:"getMarkerScaleRatio",value:function(t){if(t)switch(t.type){case"CIMVectorMarker":if(!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}}return 1}}]),t}(),L=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var n=Object(l.k)(Math.ceil(i)),r=this._isHorizontalOrVertical(e)?8*n:16*n,a=2*n;t.width=r,t.height=r;var s=t.getContext("2d");s.strokeStyle="#FFFFFF",s.lineWidth=n,s.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(s.moveTo(r/2,-a),s.lineTo(r/2,r+a)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(s.moveTo(-a,r/2),s.lineTo(r+a,r/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(s.moveTo(-a,-a),s.lineTo(r+a,r+a),s.moveTo(r-a,-a),s.lineTo(r+a,a),s.moveTo(-a,r-a),s.lineTo(a,r+a)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(s.moveTo(r+a,-a),s.lineTo(-a,r+a),s.moveTo(a,-a),s.lineTo(-a,a),s.moveTo(r+a,r-a),s.lineTo(r-a,r+a)),s.stroke();for(var o,u=s.getImageData(0,0,t.width,t.height),c=new Uint8Array(u.data),h=0;h<c.length;h+=4)o=c[h+3]/255,c[h]=c[h]*o,c[h+1]=c[h+1]*o,c[h+2]=c[h+2]*o;return[c,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){var i;switch(e){case"butt":i="Butt";break;case"square":i="Square";break;default:i="Round"}var n,r="Butt"===i;switch(t){case"dash":case"esriSLSDash":n=r?[4,3]:[3,4];break;case"dash-dot":case"esriSLSDashDot":n=r?[4,3,1,3]:[3,4,0,4];break;case"dot":case"esriSLSDot":n=r?[1,3]:[0,4];break;case"long-dash":case"esriSLSLongDash":n=r?[8,3]:[7,4];break;case"long-dash-dot":case"esriSLSLongDashDot":n=r?[8,3,1,3]:[7,4,0,4];break;case"long-dash-dot-dot":case"esriSLSDashDotDot":n=r?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case"short-dash":case"esriSLSShortDash":n=r?[4,1]:[3,2];break;case"short-dash-dot":case"esriSLSShortDashDot":n=r?[4,1,1,1]:[3,2,0,2];break;case"short-dash-dot-dot":case"esriSLSShortDashDotDot":n=r?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case"short-dot":case"esriSLSShortDot":n=r?[1,1]:[0,2];break;case"solid":case"esriSLSSolid":case"none":M.error("Unexpected: style does not require rasterization"),n=[0,0];break;default:M.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),n=[0,0]}return this.rasterizeDash(n,i)}},{key:"rasterizeDash",value:function(t,e){var i,n="Butt"===e,a="Square"===e,s=!n&&!a,o=0,l=Object(r.a)(t);try{for(l.s();!(i=l.n()).done;){o+=i.value}}catch(T){l.e(T)}finally{l.f()}for(var u=15*o,c=31*u,h=new Float32Array(c),f=s?225:15,v=0;v<c;++v)h[v]=f;var d,p=7.5,g=0,m=0,_=!0,y=Object(r.a)(t);try{for(y.s();!(d=y.n()).done;){var b=d.value;g=m,m+=15*b;for(var x=g;x<m;){for(var O=0;O<31;){var k=O*u+x,j=s?(O-15)*(O-15):Math.abs(O-15);h[k]=_?n?Math.max(Math.max(g+p-x,j),Math.max(x-m+p,j)):j:s?Math.min((x-g)*(x-g)+j,(x-m)*(x-m)+j):a?Math.min(Math.max(x-g,j),Math.max(m-x,j)):Math.min(Math.max(x-g+p,j),Math.max(m+p-x,j)),O++}x++}_=!_}}catch(T){y.e(T)}finally{y.f()}for(var P=h.length,S=new Uint8Array(4*P),M=0;M<P;++M){var C=(s?Math.sqrt(h[M]):h[M])/15;Object(w.a)(C,S,4*M)}return[S,u,31]}},{key:"_isHorizontalOrVertical",value:function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}}]),t}(),A=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"findApplicableOverrides",value:function(e,i,n){if(i){if(e.primitiveName){var a,s=!1,o=Object(r.a)(n);try{for(o.s();!(a=o.n()).done;){if(a.value.primitiveName===e.primitiveName){s=!0;break}}}catch(k){o.e(k)}finally{o.f()}if(!s){var l,u=Object(r.a)(i);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.primitiveName===e.primitiveName&&n.push(c)}}catch(k){u.e(k)}finally{u.f()}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var h,f=Object(r.a)(e.effects);try{for(f.s();!(h=f.n()).done;){var v=h.value;t.findApplicableOverrides(v,i,n)}}catch(k){f.e(k)}finally{f.f()}}if(e.symbolLayers){var d,p=Object(r.a)(e.symbolLayers);try{for(p.s();!(d=p.n()).done;){var g=d.value;t.findApplicableOverrides(g,i,n)}}catch(k){p.e(k)}finally{p.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects){var m,_=Object(r.a)(e.effects);try{for(_.s();!(m=_.n()).done;){var y=m.value;t.findApplicableOverrides(y,i,n)}}catch(k){_.e(k)}finally{_.f()}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,i,n),"CIMVectorMarker"===e.type){if(e.markerGraphics){var b,x=Object(r.a)(e.markerGraphics);try{for(x.s();!(b=x.n()).done;){var O=b.value;t.findApplicableOverrides(O,i,n),t.findApplicableOverrides(O.symbol,i,n)}}catch(k){x.e(k)}finally{x.f()}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,i,n):"CIMHatchFill"===e.type&&t.findApplicableOverrides(e.lineSymbol,i,n)}}}},{key:"applyOverrides",value:function(e,i,n,a){if(i){if(e.primitiveName){var s,o=Object(r.a)(i);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.primitiveName===e.primitiveName){var u=(v=l.propertyName)?v.charAt(0).toLowerCase()+v.substr(1):v;if(a&&a.push({cim:e,nocapPropertyName:u,value:e[u]}),l.expression&&(l.value=t.toValue(l.propertyName,l.expression)),n){var c,h=!1,f=Object(r.a)(n);try{for(f.s();!(c=f.n()).done;){c.value.primitiveName===e.primitiveName&&(h=!0)}}catch(P){f.e(P)}finally{f.f()}h||n.push(l)}e[u]=l.value}}}catch(P){o.e(P)}finally{o.f()}}var v;switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var d,p=Object(r.a)(e.effects);try{for(p.s();!(d=p.n()).done;){var g=d.value;t.applyOverrides(g,i,n,a)}}catch(P){p.e(P)}finally{p.f()}}if(e.symbolLayers){var m,_=Object(r.a)(e.symbolLayers);try{for(_.s();!(m=_.n()).done;){var y=m.value;t.applyOverrides(y,i,n,a)}}catch(P){_.e(P)}finally{_.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects){var b,x=Object(r.a)(e.effects);try{for(x.s();!(b=x.n()).done;){var O=b.value;t.applyOverrides(O,i,n,a)}}catch(P){x.e(P)}finally{x.f()}}if("CIMVectorMarker"===e.type&&e.markerGraphics){var k,j=Object(r.a)(e.markerGraphics);try{for(j.s();!(k=j.n()).done;){var w=k.value;t.applyOverrides(w,i,n,a),t.applyOverrides(w.symbol,i,n,a)}}catch(P){j.e(P)}finally{j.f()}}}}}},{key:"restoreOverrides",value:function(t){var e,i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;n.cim[n.nocapPropertyName]=n.value}}catch(a){i.e(a)}finally{i.f()}}},{key:"buildOverrideKey",value:function(t){var e,i="",n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;void 0!==a.value&&(i+="".concat(a.primitiveName).concat(a.propertyName).concat(JSON.stringify(a.value)))}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var i=new u.a(e).toRgba();return i[3]*=255,i}return e}}]),t}()},883:function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var n=i(12),r=i(2),a=i(3),s=i(29),o=i(109),l=i(376),u=i(358),c=i(810),h=i(783),f=i(905),v=i(906),d=Math.PI/180,p=function(){function t(e,i,n,a){Object(r.a)(this,t),this._rotationT=Object(l.a)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255;var s=n.rect,o=new Float32Array(8);e*=a,i*=a;var u=n.code?s.width*a:n.metrics.width,c=n.code?s.height*a:n.metrics.height;o[0]=e,o[1]=i,o[2]=e+u,o[3]=i,o[4]=e,o[5]=i+c,o[6]=e+u,o[7]=i+c,this._data=o,this._setTextureCoords(s),this._scale=a,this._mosaic=n,this.x=e,this.y=i}return Object(a.a)(t,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,Object(o.d)(this._rotationT),Object(o.f)(this._rotationT,this._rotationT,-t),this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(this._data),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){var t=this._mosaic.metrics,e=t.height,i=t.width*this._scale,n=Math.abs(e)*this._scale,r=new Float32Array(8);r[0]=this.x,r[1]=this.y,r[2]=this.x+i,r[3]=this.y,r[4]=this.x,r[5]=this.y+n,r[6]=this.x+i,r[7]=this.y+n;var a=Object(o.e)(Object(l.a)(),this._rotationT,this._T);Object(l.b)(r,r,a);for(var s=1/0,u=1/0,c=0,h=0,f=0;f<4;f++){var d=r[2*f],p=r[2*f+1];s=Math.min(s,d),u=Math.min(u,p),c=Math.max(c,d),h=Math.max(h,p)}var g=c-s,m=h-u;return new v.a(s+g/2,u+m/2,g,m)}},{key:"setTransform",value:function(t){this._T=t,this._offsets=null}},{key:"_setOffsets",value:function(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var e=this._offsets,i=new Float32Array(8),n=Object(o.e)(Object(l.a)(),this._rotationT,this._T);Object(l.b)(i,t,n),e.upperLeft=Object(h.a)(8*i[0],8*i[1]),e.upperRight=Object(h.a)(8*i[2],8*i[3]),e.lowerLeft=Object(h.a)(8*i[4],8*i[5]),e.lowerRight=Object(h.a)(8*i[6],8*i[7])}},{key:"_setTextureCoords",value:function(t){var e=t.x,i=t.y,n=t.width,r=t.height;this._texcoords={upperLeft:Object(h.a)(e,i),upperRight:Object(h.a)(e+n,i),lowerLeft:Object(h.a)(e,i+r),lowerRight:Object(h.a)(e+n,i+r)}}}]),t}(),g=function(t,e){return{code:0,page:0,sdf:!0,rect:new f.a(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}}},m=function(){function t(e,i,a){Object(r.a)(this,t),this._rotation=0,this._decorate(e,i,a),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=0!==a.angle,this._T=this._createGlyphTransform(this.bounds,a);var s,o=Object(n.a)(e);try{for(o.s();!(s=o.n()).done;){s.value.setTransform(this._T)}}catch(l){o.e(l)}finally{o.f()}}return Object(a.a)(t,[{key:"setRotation",value:function(t){if(0!==t||0!==this._rotation){this._rotation=t;var e=this._T,i=Object(o.b)(Object(l.a)(),t);Object(o.e)(e,i,e);var r,a=Object(n.a)(this.glyphs);try{for(a.s();!(r=a.n()).done;){r.value.setTransform(this._T)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"_decorate",value:function(t,e,i){if(i.decoration&&"none"!==i.decoration&&t.length){var r,a=i.scale,s="underline"===i.decoration?30:20,o=t[0].textureBinding,l=Object(n.a)(e);try{for(l.s();!(r=l.n()).done;){var u=r.value,c=u.startX*a,h=u.startY*a,f=(u.width+u.glyphWidthEnd)*a;t.push(new p(c,h+s*a,g(f,o),1))}}catch(v){l.e(v)}finally{l.f()}}}},{key:"boundsT",get:function(){var t=this.bounds,e=Object(s.r)(Object(u.a)(),t.x,t.y);if(Object(s.s)(e,e,this._T),this._hasRotation){var i=Math.max(t.width,t.height);return new v.a(e[0],e[1],i,i)}return new v.a(e[0],e[1],t.width,t.height)}},{key:"_createBounds",value:function(t){var e,i=1/0,r=1/0,a=0,s=0,o=Object(n.a)(t);try{for(o.s();!(e=o.n()).done;){var l=e.value;i=Math.min(i,l.xTopLeft),r=Math.min(r,l.yTopLeft),a=Math.max(a,l.xTopLeft+l.width),s=Math.max(s,l.yBottomRight)}}catch(h){o.e(h)}finally{o.f()}var u=a-i,c=s-r;return new v.a(i+u/2,r+c/2,u,c)}},{key:"_createGlyphTransform",value:function(t,e){var i=d*e.angle,n=Object(l.a)(),r=Object(u.a)();return Object(o.h)(n,n,Object(s.r)(r,e.xOffset,-e.yOffset)),e.isCIM?Object(o.f)(n,n,i):(Object(o.h)(n,n,Object(s.r)(r,t.x,t.y)),Object(o.f)(n,n,i),Object(o.h)(n,n,Object(s.r)(r,-t.x,-t.y))),n}}]),t}(),_=function t(e,i,n,a,s,o){Object(r.a)(this,t),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,n)),this.end=Math.max(0,Math.max(i,n)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=a,this.yMin=s,this.yMax=o},y=function(t){return 10===t},b=function(t){return 32===t};function x(t,e,i){for(var n=i.scale,r=new Array,a=function(t,e,i){for(var n=new Array,r=1/i.scale,a=i.maxLineWidth*r,s=e?t.length-1:0,o=e?-1:t.length,l=e?-1:1,u=s,c=0,h=0,f=u,v=f,d=0,p=1/0,g=0;u!==o;){var m=t[u],x=m.code,O=m.metrics,k=Math.abs(O.top);if(y(x)||b(x)||(p=Math.min(p,k),g=Math.max(g,k+O.height)),y(x))u!==s&&(n.push(new _(t,f,u-l,c,p,g)),p=1/0,g=0),c=0,f=u+l,v=u+l,h=0;else if(b(x))v=u+l,h=0,d=O.advance,c+=O.advance;else if(c>a){if(v!==f){var j=v-2*l;c-=d,n.push(new _(t,f,j,c-h,p,g)),p=1/0,g=0,f=v,c=h}else n.push(new _(t,f,u-l,c,p,g)),p=1/0,g=0,f=u,v=u,c=0;c+=O.advance,h+=O.advance}else c+=O.advance,h+=O.advance;u+=l}var w=new _(t,f,u-l,c,p,g);return w.start>=0&&w.end<t.length&&n.push(w),n}(t,e,i),s=function(t,e){for(var i=0,n=0;n<t.length;n++){var r=t[n].width;i=Math.max(r,i)}var a="underline"===e.decoration?4:0,s=t[0].yMin;return{x:0,y:s,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+a-s,width:i}}(a,i),o=i.vAlign,l=i.hAlign,u=o===c.a.Baseline?1:0,h=u?0:o-1,f=(1-u)*-s.y+h*(s.height/2)+-26*(u?1:0),v=0;v<a.length;v++){var d=a[v],g=d.start,x=d.end,O=-1*(l+1)*(d.width/2)-3,k=v*i.lineHeight+f-3;a[v].startX=O,a[v].startY=k;for(var j=g;j<=x;j++){var w=t[j];if(!y(w.code)){var P=new p(O+w.metrics.left,k-w.metrics.top,w,n);O+=w.metrics.advance,r.push(P)}}}return new m(r,a,i)}},886:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=function(){function t(){Object(n.a)(this,t),this.setIdentity()}return Object(r.a)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},898:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(n.a)(this,t),this.x=e,this.y=i,this.width=r,this.height=a}return Object(r.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},905:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(n.a)(this,t),this.x=e,this.y=i,this.width=r,this.height=a}return Object(r.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},906:function(t,e,i){"use strict";var n=i(2),r=i(3),a=i(37),s=i(358),o=function(){function t(e,i,r,a){Object(n.a)(this,t),this.center=Object(s.b)(e,i),this.centerT=Object(s.a)(),this.halfWidth=r/2,this.halfHeight=a/2,this.width=r,this.height=a}return Object(r.a)(t,[{key:"x",get:function(){return this.center[0]},set:function(t){this.center[0]=t}},{key:"y",get:function(){return this.center[1]},set:function(t){this.center[1]=t}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"serialize",value:function(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}},{key:"findCollisionDelta",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=Math.abs(t.centerT[0]-this.centerT[0]),n=Math.abs(t.centerT[1]-this.centerT[1]),r=(t.halfWidth+this.halfWidth+e)/i,s=(t.halfHeight+this.halfHeight+e)/n,o=Math.min(r,s);return Object(a.i)(o)}},{key:"extend",value:function(t){var e=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),n=Math.max(this.xmax,t.xmax)-e,r=Math.max(this.ymax,t.ymax)-i,a=e+n/2,s=i+r/2;this.width=n,this.height=r,this.halfWidth=n/2,this.halfHeight=r/2,this.x=a,this.y=s}}],[{key:"deserialize",value:function(e){return new t(e.readF32(),e.readF32(),e.readInt32(),e.readInt32())}}]),t}();e.a=o},911:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(2),r=i(3),a=(i(24),function(){function t(e){Object(n.a)(this,t),this._geometry=e}return Object(r.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())},912:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=[1,256,65536,16777216],r=[1/256,1/65536,1/16777216,1/4294967296],a=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,n=0;n<4;n++)i+=t[e+n]*r[n];return i}(new Uint8ClampedArray([255,255,255,255]));function s(t,e){for(var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=function(t,e,i){return t<0?0:t>i?i:t}(t,0,a),o=0;o<4;o++)e[r+o]=Math.floor(256*((i=s*n[o])-Math.floor(i)))}},923:function(t,e,i){"use strict";i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return n}));var n={Base64:0,Hex:1,String:2,Raw:3};function r(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function a(t,e,i,n,a,s){return r((o=r(r(e,t),r(n,s)))<<(l=a)|o>>>32-l,i);var o,l}function s(t,e,i,n,r,s,o){return a(e&i|~e&n,t,e,r,s,o)}function o(t,e,i,n,r,s,o){return a(e&n|i&~n,t,e,r,s,o)}function l(t,e,i,n,r,s,o){return a(e^i^n,t,e,r,s,o)}function u(t,e,i,n,r,s,o){return a(i^(e|~n),t,e,r,s,o)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.Hex,i=e||n.Base64,a=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,n=-271733879,a=-1732584194,c=271733878,h=0;h<t.length;h+=16){var f=i,v=n,d=a,p=c;i=s(i,n,a,c,t[h+0],7,-680876936),c=s(c,i,n,a,t[h+1],12,-389564586),a=s(a,c,i,n,t[h+2],17,606105819),n=s(n,a,c,i,t[h+3],22,-1044525330),i=s(i,n,a,c,t[h+4],7,-176418897),c=s(c,i,n,a,t[h+5],12,1200080426),a=s(a,c,i,n,t[h+6],17,-1473231341),n=s(n,a,c,i,t[h+7],22,-45705983),i=s(i,n,a,c,t[h+8],7,1770035416),c=s(c,i,n,a,t[h+9],12,-1958414417),a=s(a,c,i,n,t[h+10],17,-42063),n=s(n,a,c,i,t[h+11],22,-1990404162),i=s(i,n,a,c,t[h+12],7,1804603682),c=s(c,i,n,a,t[h+13],12,-40341101),a=s(a,c,i,n,t[h+14],17,-1502002290),i=o(i,n=s(n,a,c,i,t[h+15],22,1236535329),a,c,t[h+1],5,-165796510),c=o(c,i,n,a,t[h+6],9,-1069501632),a=o(a,c,i,n,t[h+11],14,643717713),n=o(n,a,c,i,t[h+0],20,-373897302),i=o(i,n,a,c,t[h+5],5,-701558691),c=o(c,i,n,a,t[h+10],9,38016083),a=o(a,c,i,n,t[h+15],14,-660478335),n=o(n,a,c,i,t[h+4],20,-405537848),i=o(i,n,a,c,t[h+9],5,568446438),c=o(c,i,n,a,t[h+14],9,-1019803690),a=o(a,c,i,n,t[h+3],14,-187363961),n=o(n,a,c,i,t[h+8],20,1163531501),i=o(i,n,a,c,t[h+13],5,-1444681467),c=o(c,i,n,a,t[h+2],9,-51403784),a=o(a,c,i,n,t[h+7],14,1735328473),i=l(i,n=o(n,a,c,i,t[h+12],20,-1926607734),a,c,t[h+5],4,-378558),c=l(c,i,n,a,t[h+8],11,-2022574463),a=l(a,c,i,n,t[h+11],16,1839030562),n=l(n,a,c,i,t[h+14],23,-35309556),i=l(i,n,a,c,t[h+1],4,-1530992060),c=l(c,i,n,a,t[h+4],11,1272893353),a=l(a,c,i,n,t[h+7],16,-155497632),n=l(n,a,c,i,t[h+10],23,-1094730640),i=l(i,n,a,c,t[h+13],4,681279174),c=l(c,i,n,a,t[h+0],11,-358537222),a=l(a,c,i,n,t[h+3],16,-722521979),n=l(n,a,c,i,t[h+6],23,76029189),i=l(i,n,a,c,t[h+9],4,-640364487),c=l(c,i,n,a,t[h+12],11,-421815835),a=l(a,c,i,n,t[h+15],16,530742520),i=u(i,n=l(n,a,c,i,t[h+2],23,-995338651),a,c,t[h+0],6,-198630844),c=u(c,i,n,a,t[h+7],10,1126891415),a=u(a,c,i,n,t[h+14],15,-1416354905),n=u(n,a,c,i,t[h+5],21,-57434055),i=u(i,n,a,c,t[h+12],6,1700485571),c=u(c,i,n,a,t[h+3],10,-1894986606),a=u(a,c,i,n,t[h+10],15,-1051523),n=u(n,a,c,i,t[h+1],21,-2054922799),i=u(i,n,a,c,t[h+8],6,1873313359),c=u(c,i,n,a,t[h+15],10,-30611744),a=u(a,c,i,n,t[h+6],15,-1560198380),n=u(n,a,c,i,t[h+13],21,1309151649),i=u(i,n,a,c,t[h+4],6,-145523070),c=u(c,i,n,a,t[h+11],10,-1120210379),a=u(a,c,i,n,t[h+2],15,718787259),n=u(n,a,c,i,t[h+9],21,-343485551),i=r(i,f),n=r(n,v),a=r(a,d),c=r(c,p)}return[i,n,a,c]}(function(t){for(var e=[],i=0,n=8*t.length;i<n;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}(t),8*t.length);switch(i){case n.Raw:return a;case n.Hex:return function(t){for(var e="0123456789abcdef",i=[],n=0,r=4*t.length;n<r;n++)i.push(e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15));return i.join("")}(a);case n.String:return function(t){for(var e=[],i=0,n=32*t.length;i<n;i+=8)e.push(String.fromCharCode(t[i>>5]>>>i%32&255));return e.join("")}(a);case n.Base64:return function(t){for(var e=[],i=0,n=4*t.length;i<n;i+=3)for(var r=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255,a=0;a<4;a++)8*i+6*a>32*t.length?e.push("="):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-a)&63));return e.join("")}(a)}}},952:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i(12);var n=new(i(50).a)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function r(t){return n.toJSON(t)}},961:function(t,e,i){"use strict";i.d(e,"a",(function(){return tt}));var n=i(2),r=i(3),a=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],s=["\u0622","\u0623","\u0625","\u0627"],o=["\ufef5","\ufef7","\ufef9","\ufefb"],l=["\ufef6","\ufef8","\ufefa","\ufefc"],u=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],c=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],h=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],f=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],v=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],d=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],p=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],g=["\u0621","\u0641"],m=["\u063a","\u064a"],_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],x=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],O=[[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,4,11,11,11,11,4,4,4,4,0,4,4,18,4,4,11,11,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,1,12,1,12,12,1,12,12,1,12,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,11,11,7,9,7,4,4,12,12,12,12,12,12,12,12,12,12,12,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,3,3,3,3,3,3,3,3,3,3,11,3,3,7,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,3,4,12,12,12,12,12,12,7,7,12,12,4,12,12,12,12,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,12,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,12,12,12,12,12,12,12,12,12,12,12,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,12,12,12,12,12,12,12,12,12,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,18,18,18,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,18,18,18,18,18,4,4,4,4,4,18,18,18,18,18,18,2,0,4,4,2,2,2,2,2,2,10,10,4,4,4,0,2,2,2,2,2,2,2,2,2,2,10,10,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,12,1,1,1,1,1,1,1,1,1,1,10,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,12,12,12,12,12,12,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,11,4,4,10,10,4,4,4,4,4,11,11,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,18],[4,4,4,11,11,11,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,11,11,4,4,4,11,11,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]];function k(t,e,i,n,r){var a=function(t,e,i){if(void 0===e.inFormat&&(e.inFormat=i.defInFormat),void 0===e.outFormat&&(e.outFormat=i.defOutFormat),void 0===e.swap&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;var n,r=e.inFormat.substring(0,1),a=e.outFormat.substring(0,1),s=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===s.charAt(0)&&(s="ltr"===(n=j(t))||"rtl"===n?n.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=r+s),"C"===o.charAt(0)&&("rtl"===(n=j(t))?o="RTL":"ltr"===n?o=(n=function(t){var e=t.split("");return e.reverse(),j(e.join(""))}(t)).toUpperCase():o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=a+o),e}(t,{inFormat:e,outFormat:i,swap:n},r);if(a.inFormat===a.outFormat)return t;e=a.inFormat,i=a.outFormat,n=a.swap;var s=e.substring(0,1),o=e.substring(1,4),l=i.substring(0,1),u=i.substring(1,4);if(r.inFormat=e,r.outFormat=i,r.swap=n,"L"===s&&"VLTR"===i){if("LTR"===o)return r.dir=K,w(t,r);if("RTL"===o)return r.dir=Z,w(t,r)}if("V"===s&&"V"===l)return r.dir="RTL"===o?Z:K,M(t,r);if("L"===s&&"VRTL"===i)return"LTR"===o?(r.dir=K,t=w(t,r)):(r.dir=Z,t=w(t,r)),M(t);if("VLTR"===e&&"LLTR"===i)return r.dir=K,w(t,r);if("V"===s&&"L"===l&&o!==u)return t=M(t),"RTL"===o?k(t,"LLTR","VLTR",n,r):k(t,"LRTL","VRTL",n,r);if("VRTL"===e&&"LRTL"===i)return k(t,"LRTL","VRTL",n,r);if("L"===s&&"L"===l){var c=r.swap;return r.swap=c.substr(0,1)+"N","RTL"===o?(r.dir=Z,t=w(t,r),r.swap="N"+c.substr(1,2),r.dir=K,t=w(t,r)):(r.dir=K,t=w(t,r),r.swap="N"+c.substr(1,2),t=k(t,"VLTR","LRTL",r.swap,r)),t}return t}function j(t){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function w(t,e){var i=t.split(""),n=[];return P(i,n,e),function(t,e,i){if(0!==i.hiLevel&&i.swap.substr(0,1)!==i.swap.substr(1,2))for(var n=0;n<t.length;n++)1===e[n]&&(t[n]=E(t[n]))}(i,n,e),I(2,i,n,e),I(1,i,n,e),X=n,i.join("")}function P(t,e,i){var n=t.length,r=i.dir?y:_,a=0,s=-1,o=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(var u=0;u<n;u++)o[u]=S(t[u]);for(var c=0;c<n;c++){var h=a,f=F(t,o,l,c,i);l[c]=f;var v=240&(a=r[h][f]),d=r[a&=15][q];if(e[c]=d,v>0)if(16===v){for(var p=s;p<c;p++)e[p]=1;s=-1}else s=-1;if(r[a][J])-1===s&&(s=c);else if(s>-1){for(var g=s;g<c;g++)e[g]=d;s=-1}5===o[c]&&(e[c]=0),i.hiLevel|=d}i.hasUbatS&&function(t,e,i,n){for(var r=0;r<i;r++)if(6===t[r]){e[r]=n.dir;for(var a=r-1;a>=0&&8===t[a];a--)e[a]=n.dir}}(o,e,n,i)}function S(t){var e=t.charCodeAt(0),i=x[e>>8];return i<100?i:O[i-100][255&e]}function M(t,e){var i=t.split("");if(e){var n=[];P(i,n,e),X=n}return i.reverse(),H.reverse(),i.join("")}function C(t,e,i){for(var n=0;n<e;n++)if(t[n]===i)return n;return-1}function T(t){for(var e=0;e<g.length;e++)if(t>=g[e]&&t<=m[e])return!0;return!1}function L(t,e,i,n){for(;e*i<n&&G(t[e]);)e+=i;return!!(e*i<n&&T(t[e]))}function A(t,e,i,n){for(;e*i<n&&G(t[e]);)e+=i;var r;if(!(e*i<n))return!1;r=t[e];for(var a=0;a<s.length;a++)if(s[a]===r)return!0;return!1}function I(t,e,i,n){if(!(n.hiLevel<t)){if(1===t&&n.dir===Z&&!n.hasUbatB)return e.reverse(),void H.reverse();for(var r,a,s,o,l,u=e.length,c=0;c<u;){if(i[c]>=t){for(r=c+1;r<u&&i[r]>=t;)r++;for(a=c,s=r-1;a<s;a++,s--)o=e[a],e[a]=e[s],e[s]=o,l=H[a],H[a]=H[s],H[s]=l;c=r}c++}}}function F(t,e,i,n,r){var a=e[n];return{UBAT_L:function(){return r.lastArabic=!1,0},UBAT_R:function(){return r.lastArabic=!1,1},UBAT_ON:function(){return 4},UBAT_AN:function(){return 3},UBAT_EN:function(){return r.lastArabic?3:2},UBAT_AL:function(){return r.lastArabic=!0,r.hasUbatAl=!0,1},UBAT_WS:function(){return 4},UBAT_CS:function(){var t,a;return n<1||n+1>=e.length||2!==(t=i[n-1])&&3!==t||2!==(a=e[n+1])&&3!==a?4:(r.lastArabic&&(a=3),a===t?a:4)},UBAT_ES:function(){return 2===(n>0?i[n-1]:5)&&n+1<e.length&&2===e[n+1]?2:4},UBAT_ET:function(){if(n>0&&2===i[n-1])return 2;if(r.lastArabic)return 4;for(var t=n+1,a=e.length;t<a&&11===e[t];)t++;return t<a&&2===e[t]?2:4},UBAT_NSM:function(){if("VLTR"===r.inFormat){for(var a=e.length,s=n+1;s<a&&12===e[s];)s++;if(s<a){var o=t[n].charCodeAt[0],l=o>=1425&&o<=2303||64286===o,u=e[s];if(l&&(1===u||7===u))return 1}}return n<1||5===e[n-1]?4:i[n-1]},UBAT_B:function(){return r.lastArabic=!0,r.hasUbatB=!0,r.dir},UBAT_S:function(){return r.hasUbatS=!0,4},UBAT_LRE:function(){return r.lastArabic=!1,4},UBAT_RLE:function(){return r.lastArabic=!1,4},UBAT_LRO:function(){return r.lastArabic=!1,4},UBAT_RLO:function(){return r.lastArabic=!1,4},UBAT_PDF:function(){return r.lastArabic=!1,4},UBAT_BN:function(){return 4}}[b[a]]()}function E(t){for(var e,i=0,n=a.length-1;i<=n;)if(e=Math.floor((i+n)/2),t<a[e][0])n=e-1;else{if(!(t>a[e][0]))return a[e][1];i=e+1}return t}function V(t){for(var e=0;e<d.length;e++)if(d[e]===t)return!0;return!1}function z(t){for(var e=0;e<u.length;e++)if(t===u[e])return f[e];return t}function R(t,e){for(var i=0;i<u.length;i++)if(t===u[i])return e[i];return t}function G(t){return t>="\u064b"&&t<="\u0655"}function B(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function N(t,e,i,n){for(;e*i<n&&G(t[e]);)e+=i;return e*i<n&&(t[e]=" ",!0)}function U(t,e){for(var i=0;i<s.length;i++)if(t===s[i])return e[i];return t}function D(t,e,i,n){for(var r=0;r<t.length;r++)(t[r]>e||!i&&t[r]===e)&&(t[r]+=n)}var H=[],Y=[],X=[],W={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},q=5,J=6,K=0,Z=1,$=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Q=/[\u0591-\u06ff\ufb1d-\ufefc]/,tt=function(){function t(){Object(n.a)(this,t),this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}return Object(r.a)(t,[{key:"bidiTransform",value:function(t,e,i){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,i){H=[],X=[];for(var n=0;n<i;n++)t[n]=n,e[n]=n,H[n]=n}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,i))return t;e=this.inputFormat,i=this.outputFormat;var n,r=W,a=B(e.charAt(1)),u=B(i.charAt(1)),f=("I"===e.charAt(0)?"L":e.charAt(0))+a,d=("I"===i.charAt(0)?"L":i.charAt(0))+u,g=e.charAt(2)+i.charAt(2);r.defInFormat=f,r.defOutFormat=d,r.defSwap=g;var m=k(t,f,d,g,r),_=!1;return"R"===i.charAt(1)?_=!0:"C"!==i.charAt(1)&&"D"!==i.charAt(1)||(_="rtl"===this.checkContextual(m)),this.sourceToTarget=H,this.targetToSource=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[t[i]]=i;return e}(this.sourceToTarget),Y=this.targetToSource,n=e.charAt(3)===i.charAt(3)?m:"S"===i.charAt(3)?function(t,e,i){if(0===e.length)return"";void 0===t&&(t=!0),void 0===i&&(i=!0);var n=(e=String(e)).split(""),r=0,a=1,s=n.length;t||(r=n.length-1,a=-1,s=1);for(var u=function(t,e,i,n,r){for(var a=0,s=[],u=0,f=e;f*i<n;f+=i)if(T(t[f])||G(t[f])){if("\u0644"===t[f]&&A(t,f+i,i,n)){t[f]=U(t[f+i],0===a?o:l),N(t,f+=i,i,n),r&&(s[u]=f,u++),a=0;continue}var d=t[f];1===a?t[f]=L(t,f+i,i,n)?z(t[f]):R(t[f],h):!0===L(t,f+i,i,n)?t[f]=R(t[f],v):t[f]=R(t[f],c),G(d)||(a=1),!0===V(d)&&(a=0)}else a=0;return s}(n,r,a,s,i),f="",d=0;d<n.length;d++)i&&C(u,u.length,d)>-1?(D(Y,d,!t,-1),H.splice(d,1)):f+=n[d];return f}(_,m,!0):function(t,e,i){if(0===t.length)return"";void 0===i&&(i=!0),void 0===e&&(e=!0);for(var n="",r=(t=String(t)).split(""),a=0;a<t.length;a++){var o=!1;if(r[a]>="\ufe70"&&r[a]<"\ufeff"){var l=t.charCodeAt(a);r[a]>="\ufef5"&&r[a]<="\ufefc"?(e?(a>0&&i&&" "===r[a-1]?n=n.substring(0,n.length-1)+"\u0644":(n+="\u0644",o=!0),n+=s[(l-65269)/2]):(n+=s[(l-65269)/2],n+="\u0644",a+1<t.length&&i&&" "===r[a+1]?a++:o=!0),o&&(D(Y,a,!0,1),H.splice(a,0,H[a]))):n+=p[l-65136]}else n+=r[a]}return n}(m,_,!0),this.sourceToTarget=H,this.targetToSource=Y,this.levels=X,n}},{key:"_inputFormatSetter",value:function(t){if(!$.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}},{key:"_outputFormatSetter",value:function(t){if(!$.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}},{key:"checkParameters",value:function(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}},{key:"checkContextual",value:function(t){var e=j(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}},{key:"hasBidiChar",value:function(t){return Q.test(t)}}]),t}()},978:function(t,e,i){"use strict";i.d(e,"a",(function(){return T})),i.d(e,"b",(function(){return S})),i.d(e,"c",(function(){return M})),i.d(e,"d",(function(){return L}));var n,r=i(26),a=i(9),s=i(12),o=i(13),l=i(4),u=i(14),c=i(23),h=i(882),f=i(885),v=i(923),d=i(2),p=i(3),g=i(5),m=i(6),_=i(0),y=i(24),b=(i(15),i(1)),x=i(8),O=i(47),k=(i(11),i(19),i(20),i(794)),j=n=function(t){Object(g.a)(i,t);var e=Object(m.a)(i);function i(){return Object(d.a)(this,i),e.apply(this,arguments)}return Object(p.a)(i,[{key:"writeLevels",value:function(t,e,i){for(var n in t){var r=this.levels[n];return void(e.stops=r)}}},{key:"clone",value:function(){return new n({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Object(k.c)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Object(k.c)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(t){return t.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:Object(y.a)(this.levels)})}}]),i}(f.a);Object(_.a)([Object(b.b)()],j.prototype,"levels",void 0),Object(_.a)([Object(O.a)("levels")],j.prototype,"writeLevels",null),j=n=Object(_.a)([Object(x.a)("esri.views.2d.engine.LevelDependentSizeVariable")],j);var w=u.a.getLogger("esri.views.2d.layers.support.clusterUtils");o.a.add("esri-cluster-arcade-enabled",1);var P=Object(o.a)("esri-cluster-arcade-enabled"),S=function(t,e,i,n){var r=e.clone();if(!L(r))return r;if(i.fields){var a,o=Object(s.a)(i.fields);try{for(o.s();!(a=o.n()).done;){var u=a.value;A(t,u)}}catch(f){o.e(f)}finally{o.f()}}if("visualVariables"in r){var c=(r.visualVariables||[]).filter((function(t){return"$view.scale"!==t.valueExpression})),h=M(c);c.forEach((function(e){"rotation"===e.type?e.field?e.field=F(t,e.field,"avg_angle"):e.valueExpression&&(e.field=I(t,e.valueExpression,"avg_angle"),e.valueExpression=null):e.normalizationField?(e.field=F(t,e.field,"norm",e.normalizationField),e.normalizationField=null):e.field?e.field=F(t,e.field,"avg"):(e.field=I(t,e.valueExpression,"avg"),e.valueExpression=null)})),Object(l.h)(h)&&!C(c)&&(c.push(T(i,n)),r.dynamicClusterSize=!0),r.visualVariables=c}switch(r.type){case"simple":break;case"unique-value":r.field?r.field=F(t,r.field,"mode"):r.valueExpression&&(r.field=I(t,r.valueExpression,"mode"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=F(t,r.field,"norm",r.normalizationField),r.normalizationField=null):r.field?r.field=F(t,r.field,"avg"):(r.field=I(t,r.valueExpression,"avg"),r.valueExpression=null)}return r},M=function(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if("size"===n.type)return n}}catch(r){i.e(r)}finally{i.f()}return null},C=function(t){var e,i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){if("cluster_count"===e.value.field)return!0}}catch(n){i.e(n)}finally{i.f()}return!1},T=function(t,e){var i=[new h.a({value:0,size:0}),new h.a({value:1})];if(Object(l.h)(e))return new f.a({field:"cluster_count",stops:[].concat(i,[new h.a({value:2,size:0})])});var n=Object.keys(e).reduce((function(n,s){return Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},s,[].concat(i,[new h.a({value:Math.max(2,e[s].minValue),size:t.clusterMinSize}),new h.a({value:Math.max(3,e[s].maxValue),size:t.clusterMaxSize})])))}),{});return new j({field:"cluster_count",levels:n})},L=function(t){var e=function(e){return w.error(new c.a("Unsupported-renderer",e,{renderer:t}))};if("unique-value"===t.type){if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===t.type){if(t.normalizationField){var i=t.normalizationType;if("field"!==i)return e("FeatureReductionCluster does not support a normalizationType of ".concat(i)),!1}}else if("simple"!==t.type)return e("FeatureReductionCluster does not support renderers of type ".concat(t.type)),!1;if(!P){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some((function(t){return!(!("valueExpression"in t)||!t.valueExpression)})))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function A(t,e){var i=e.name,n=e.outStatistic,r=n.onStatisticField,a=n.onStatisticValueExpression,s=n.statisticType;if(a){var o=Object(v.a)(a.toLowerCase());t.push({name:i,outStatistic:{onStatisticField:o,onStatisticValueExpression:a,statisticType:s}})}else r?t.push({name:i,outStatistic:{onStatisticField:r,statisticType:s}}):w.error(new c.a("mapview-unsupported-field","Unable to handle field",{field:e}))}function I(t,e,i){var n=Object(v.a)(e),r="mode"===i?"cluster_type_".concat(n):"cluster_avg_".concat(n);return t.some((function(t){return t.name===r}))||t.push({name:r,outStatistic:{onStatisticField:n,onStatisticValueExpression:e,statisticType:i}}),r}function F(t,e,i,n){if("cluster_count"===e||t.some((function(t){return t.name===e})))return e;var r=function(t,e,i){switch(t){case"avg":case"avg_angle":return"cluster_avg_".concat(e);case"mode":return"cluster_type_".concat(e);case"norm":var n=i,r=e.toLowerCase()+",norm:field,"+n.toLowerCase();return"cluster_avg_"+Object(v.a)(r)}}(i,e,n);return t.some((function(t){return t.name===r}))||("norm"===i?t.push({name:r,outStatistic:{onStatisticField:e,onStatisticNormalizationField:n,statisticType:i}}):t.push({name:r,outStatistic:{onStatisticField:e,statisticType:i}})),r}},979:function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return v}));var n=i(41),r=i(403),a=i(405),s=i(250),o=i(404);function l(t){return Object(r.a)(t)||Object(a.a)(t)||Object(s.a)(t)||Object(o.a)()}var u=i(14),c=i(36),h=u.a.getLogger("esri.renderers.visualVariables.support.utils"),f=function(t){if(!("visualVariables"in t)||!t.visualVariables||!t.visualVariables.length)return t;var e=t.clone(),i=e.visualVariables.map((function(t){return d(t)?p(t):t}));return e.visualVariables=i,e};function v(t){return t.map((function(t){return d(t)?p(t.clone()):t}))}function d(t){return("size"===t.type||"color"===t.type||"opacity"===t.type)&&null!=t.stops}function p(t){return t.stops=function(t,e){return e.length<=8?e:(h.warn("Found ".concat(e.length," Visual Variable stops, but MapView only supports 8. Displayed stops will be simplified.")),e.length>16?function(t,e){for(var i=l(e),n=i[0],r=i.slice(1),a=r.pop(),s=r[0].value,o=r[r.length-1].value,u=(o-s)/6,h=[],f=s;f<o;f+=u){for(var v=0;f>=r[v].value;)v++;var d=r[v],p=e[v-1],m=f-p.value,_=d.value===p.value?1:m/(d.value-p.value);if("color"===t){var y=r[v],b=e[v-1],x=y.color.clone();x.r=g(b.color.r,x.r,_),x.g=g(b.color.g,x.g,_),x.b=g(b.color.b,x.b,_),x.a=g(b.color.a,x.a,_),h.push({value:f,color:x,label:y.label})}else if("size"===t){var O=r[v],k=e[v-1],j=Object(c.j)(O.size),w=g(Object(c.j)(k.size),j,_);h.push({value:f,size:w,label:O.label})}else{var P=r[v],S=g(e[v-1].opacity,P.opacity,_);h.push({value:f,opacity:S,label:P.label})}}return[n].concat(h,[a])}(t,e):function(t){for(var e=l(t),i=e[0],r=e.slice(1),a=r.pop();r.length>6;){for(var s=0,o=0,u=1;u<r.length;u++){var c=r[u-1],h=r[u],f=Math.abs(h.value-c.value);f>o&&(o=f,s=u)}r.splice(s,1)}return[i].concat(Object(n.a)(r),[a])}(e))}(t.type,t.stops),t}function g(t,e,i){return(1-i)*t+i*e}}}]);
//# sourceMappingURL=8.c67546af.chunk.js.map