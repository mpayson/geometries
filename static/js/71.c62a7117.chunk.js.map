{"version":3,"sources":["../node_modules/@arcgis/core/layers/support/kmlUtils.js","../node_modules/@arcgis/core/layers/support/KMLSublayer.js","../node_modules/@arcgis/core/layers/KMLLayer.js","../node_modules/@arcgis/core/layers/support/commonProperties.js","../node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/mixins/RefreshableLayer.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js","../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js","../node_modules/@arcgis/core/core/MemCache.js","../node_modules/@arcgis/core/layers/mixins/operationalLayers.js","../node_modules/@arcgis/core/layers/mixins/OperationalLayer.js","../node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"],"names":["c","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","o","t","folders","r","slice","s","Map","n","i","a","f","l","featureCollection","layers","forEach","e","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","id","networkLinkIds","some","parentFolderId","networkLink","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","map","type","fullExtent","P","u","sublayers","extent","g","findCredential","token","kmlServiceUrl","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","read","length","indexOf","visible","unshift","attributes","h","fromJSON","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","m","p","geometry","y","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","WGS84","j","arguments","_sublayersHandles","description","title","sourceJSON","this","then","load","_fetchService","_get","href","ofType","b","addMany","layer","emit","notifyChange","addResolvingPromise","parent","remove","on","item","_set","visibility","outSpatialReference","refreshInterval","v","data","EventedMixin","prototype","readOnly","value","json","write","allowNull","source","_","E","w","_visibleFolders","allSublayers","root","rootCollectionNames","getChildrenFunction","path","legendEnabled","operationalLayerType","watch","visibleFolders","L","toArray","shift","originOf","_recomputeFullExtent","loadFromPortal","supportedTypes","resourceInfo","ssl","x","origin","clone","items","union","String","origins","ignoreOrigin","dependsOn","O","Boolean","reader","screenSizePerspective","store","target","writer","name","disablePopup","enabled","isRequired","service","Number","default","opacity","transparency","timeInfo","view","timeExtent","useViewTime","intersection","isEmpty","timeOffset","offset","unit","equals","declaredClass","isNaN","isFinite","valueExpression","field","valueUnit","stops","minSize","maxSize","minDataValue","maxDataValue","_propertyOriginMap","_originStores","Array","_values","has","keys","delete","metadatas","Object","internalGet","originIdOf","propertyInvalidated","revert","propertyCommitted","setAtOrigin","toJSON","isDefaultToJSON","cast","getLogger","resourceReferences","portalItem","paths","destroy","removeOrigin","itemId","portal","instance","validateItem","supportsData","warn","getDefault","restUrl","messages","diff","isArray","oldValue","newValue","filter","concat","sort","split","_namespace","_storage","_removeFunc","_hit","_miss","register","registerRemoveFunc","size","clear","deregisterRemoveFunc","deregister","put","pop","updateSize","clearAll","getStats","resetStats","_maxSize","_db","_size","_removeFuncs","_users","removeUnordered","Math","max","_checkSizeLimit","entry","_notifyRemoved","console","lifetime","lives","Size","round","_getHitRate","Entries","toString","forAll","namespace","startsWith","hitRate","resetHitRate","ArcGISFeatureLayer","ArcGISImageServiceLayer","ArcGISMapServiceLayer","ArcGISSceneServiceLayer","ArcGISTiledElevationServiceLayer","ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","BuildingSceneLayer","GroupLayer","IntegratedMeshLayer","PointCloudLayer","WebTiledLayer","CSV","VectorTileLayer","WMS","KML","RasterDataLayer","OpenStreetMap","RasterDataElevationLayer","ArcGISImageServiceVectorLayer","ArcGISStreamLayer","BingMapsAerial","BingMapsRoad","BingMapsHybrid","GeoRSS","WFS","SubtypeGroupLayer","layerContainerType","layerType","PI","visualVariables","cache","ipData","hasExpression","compiledFunc","color","arcade","error","viewingMode","scale","arcadeUtils","getViewInfo","createExecContext","createSyntaxTree","createFunction","executeFunction","normalizationField","parseFloat","blendColors","axis","rotationType","transformationType","shape","scaleBy","pow","sqrt","V","resolution","valueRepresentation","isScaleDriven","inputValueType","z","useSymbolValue"],"mappings":"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","file":"static/js/71.c62a7117.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../core/lang.js\";import o from\"../../config.js\";import{addQueryParameters as t}from\"../../core/urlUtils.js\";import r from\"../../geometry/SpatialReference.js\";import{getBoundsXYZ as s}from\"../../geometry/support/boundsUtils.js\";import n from\"../../PopupTemplate.js\";import{id as i}from\"../../kernel.js\";import a from\"../../request.js\";import{fromJSON as f}from\"../../renderers/support/jsonUtils.js\";import l from\"../../tasks/support/FeatureSet.js\";import{equals as u,NEGATIVE_INFINITY as p,create as m,expandWithAABB as y}from\"../../geometry/support/aaBoundingBox.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(o){const t=o.folders||[],r=t.slice(),s=new Map,n=new Map,i=new Map,a=new Map,f=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:a};(o.featureCollection&&o.featureCollection.layers||[]).forEach((o=>{const t=e(o);t.featureSet.features=[];const r=o.featureSet.geometryType;s.set(r,t);const f=o.layerDefinition.objectIdField;\"esriGeometryPoint\"===r?G(n,f,o.featureSet.features):\"esriGeometryPolyline\"===r?G(i,f,o.featureSet.features):\"esriGeometryPolygon\"===r&&G(a,f,o.featureSet.features)})),o.groundOverlays&&o.groundOverlays.forEach((e=>{f.set(e.id,e)})),t.forEach((e=>{e.networkLinkIds.forEach((t=>{const s=function(e,o,t){const r=function(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}(e,t);r&&(r.parentFolderId=o,r.networkLink=r);return r}(t,e.id,o.networkLinks);s&&r.push(s)}))})),r.forEach((o=>{o.featureInfos&&(o.points=e(s.get(\"esriGeometryPoint\")),o.polylines=e(s.get(\"esriGeometryPolyline\")),o.polygons=e(s.get(\"esriGeometryPolygon\")),o.mapImages=[],o.featureInfos.map((e=>{switch(e.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[e.type].get(e.id);t&&o[c[e.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=f.get(e.id);t&&o.mapImages.push(t);break}}})),o.fullExtent=P([o]))}));const u=P(r);return{folders:t,sublayers:r,extent:u}}function g(e,r,s,n){const f=i&&i.findCredential(e);e=t(e,{token:f&&f.token});const l=o.kmlServiceUrl;return a(l,{query:{url:e,model:\"simple\",folders:\"\",refresh:0!==s||void 0,outSR:JSON.stringify(r)},responseType:\"json\",signal:n})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,a=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&a.indexOf(i.id)>-1&&(i.visible=-1!==r.indexOf(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}async function h(e){const o=l.fromJSON(e.featureSet).features,t=e.layerDefinition,r=f(t.drawingInfo.renderer),s=n.fromJSON(e.popupInfo),i=[];for(const e of o){const o=await r.getSymbolAsync(e);e.symbol=o,e.popupTemplate=s,e.visible=!0,i.push(e)}return i}function P(e){const o=m(),t=m(p);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)s(o,e.geometry),y(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)s(o,e.geometry),y(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)s(o,e.geometry),y(t,o);if(r.mapImages)for(const e of r.mapImages)s(o,e.extent),y(t,o)}return u(t,p)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:r.WGS84}}export{P as computeExtent,g as fetchService,h as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as r}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import{ensureType as t}from\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{cast as o}from\"../../core/accessorSupport/decorators/cast.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{resolve as a}from\"../../core/promiseUtils.js\";import{JSONSupportMixin as n}from\"../../core/JSONSupport.js\";import u from\"../../geometry/Extent.js\";import\"../../geometry.js\";import p from\"../../core/Evented.js\";import y from\"../../core/Collection.js\";import c from\"../../core/Loadable.js\";import{whenOnce as h,whenTrueOnce as m}from\"../../core/watchUtils.js\";import{computeExtent as d,sublayersFromJSON as b,fetchService as f,parseKML as v}from\"./kmlUtils.js\";var j;let S=j=class extends(p.EventedMixin(n(c))){constructor(){super(...arguments),this._sublayersHandles=null,this.description=null,this.id=null,this.networkLink=null,this.title=null,this.sourceJSON=null,this.fullExtent=null}initialize(){h(this,\"networkLink\").then((()=>m(this,\"visible\"))).then((()=>this.load()))}load(e){if(!this.networkLink)return;const s=r(e)?e.signal:null,o=this._fetchService(this._get(\"networkLink\").href,s).then((e=>{const r=d(e.sublayers);this.fullExtent=u.fromJSON(r),this.sourceJSON=e;const s=t(y.ofType(j),b(j,e));this.sublayers?this.sublayers.addMany(s):this.sublayers=s,this.layer.emit(\"sublayer-update\"),this.layer&&this.layer.notifyChange(\"visibleSublayers\")}));return this.addResolvingPromise(o),a(this)}set sublayers(e){const r=this._get(\"sublayers\");r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this._sublayersHandles.forEach((e=>e.remove())),this._sublayersHandles=null),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this._sublayersHandles=[e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null}))]),this._set(\"sublayers\",e)}castSublayers(e){return t(y.ofType(j),e)}get visible(){return this._get(\"visible\")}set visible(e){this._get(\"visible\")!==e&&(this._set(\"visible\",e),this.layer&&this.layer.notifyChange(\"visibleSublayers\"))}readVisible(e,r){return!!r.visibility}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}_fetchService(e,r){return f(e,this.layer.outSpatialReference,this.layer.refreshInterval,r).then((e=>v(e.data)))}};e([s()],S.prototype,\"description\",void 0),e([s()],S.prototype,\"id\",void 0),e([s({readOnly:!0,value:null})],S.prototype,\"networkLink\",void 0),e([s({json:{write:{allowNull:!0}}})],S.prototype,\"parent\",void 0),e([s({value:null,json:{write:{allowNull:!0}}})],S.prototype,\"sublayers\",null),e([o(\"sublayers\")],S.prototype,\"castSublayers\",null),e([s({value:null,json:{read:{source:\"name\"}}})],S.prototype,\"title\",void 0),e([s({value:!0})],S.prototype,\"visible\",null),e([i(\"visible\",[\"visibility\"])],S.prototype,\"readVisible\",null),e([s()],S.prototype,\"sourceJSON\",void 0),e([s({value:null})],S.prototype,\"layer\",null),e([s({type:u})],S.prototype,\"fullExtent\",void 0),S=j=e([l(\"esri.layers.support.KMLSublayer\")],S);var _=S;export default _;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as i}from\"../core/accessorSupport/decorators/writer.js\";import{getFilename as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{resolve as a}from\"../core/promiseUtils.js\";import p from\"../geometry/SpatialReference.js\";import n from\"../geometry/Extent.js\";import\"../geometry.js\";import u from\"../core/Collection.js\";import y from\"../core/CollectionFlattener.js\";import m from\"./Layer.js\";import{MultiOriginJSONMixin as c}from\"../core/MultiOriginJSONSupport.js\";import{url as d}from\"./support/commonProperties.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{PortalLayer as b}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as j}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as g}from\"./mixins/ScaleRangeLayer.js\";import{sublayersFromJSON as v,fetchService as S,parseKML as x}from\"./support/kmlUtils.js\";import L from\"./support/KMLSublayer.js\";const E=[\"kml\",\"xml\"];let w=class extends(f(j(g(h(b(c(m))))))){constructor(...e){super(...e),this._visibleFolders=[],this.allSublayers=new y({root:this,rootCollectionNames:[\"sublayers\"],getChildrenFunction:e=>e.sublayers}),this.outSpatialReference=p.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType=\"KML\",this.sublayers=null,this.type=\"kml\",this.url=null}initialize(){this.watch(\"sublayers\",((e,r)=>{r&&r.forEach((e=>{e.parent=null,e.layer=null})),e&&e.forEach((e=>{e.parent=this,e.layer=this}))}),!0),this.on(\"sublayer-update\",(()=>this.notifyChange(\"fullExtent\")))}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}readSublayersFromItemOrWebMap(e,r){this._visibleFolders=r.visibleFolders}readSublayers(e,r,t){return v(L,r,t,this._visibleFolders)}writeSublayers(e,r){const t=[],o=e.toArray();for(;o.length;){const e=o[0];e.networkLink||(e.visible&&t.push(e.id),e.sublayers&&o.push(...e.sublayers.toArray())),o.shift()}r.visibleFolders=t}get title(){const e=this._get(\"title\");return e&&\"defaults\"!==this.originOf(\"title\")?e:this.url?l(this.url,E)||\"KML\":e||\"\"}set title(e){this._set(\"title\",e)}get visibleSublayers(){const e=this.sublayers,r=[],t=e=>{e.visible&&(r.push(e),e.sublayers&&e.sublayers.forEach(t))};return e&&e.forEach(t),r}get fullExtent(){return this._recomputeFullExtent()}load(e){const t=r(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"KML\"]},e).then((()=>this._fetchService(t)))),a(this)}async _fetchService(e){const r=await a().then((()=>this.resourceInfo?{ssl:!1,data:this.resourceInfo}:S(this.url,this.outSpatialReference,this.refreshInterval,e))),t=x(r.data);t&&this.read(t,{origin:\"service\"})}_recomputeFullExtent(){let e=null;this.extent&&(e=this.extent.clone());const r=t=>{if(t.sublayers)for(const o of t.sublayers.items)r(o),o.visible&&o.fullExtent&&(e?e.union(o.fullExtent):e=o.fullExtent.clone())};return r(this),e}};e([t({readOnly:!0})],w.prototype,\"allSublayers\",void 0),e([t({type:p})],w.prototype,\"outSpatialReference\",void 0),e([t({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],w.prototype,\"path\",void 0),e([t({readOnly:!0,json:{read:!1,write:!1}})],w.prototype,\"legendEnabled\",void 0),e([t({type:[\"show\",\"hide\",\"hide-children\"]})],w.prototype,\"listMode\",void 0),e([t({type:[\"KML\"]})],w.prototype,\"operationalLayerType\",void 0),e([t({type:u.ofType(L),json:{write:{ignoreOrigin:!0}}})],w.prototype,\"sublayers\",void 0),e([o([\"web-map\",\"portal-item\"],\"sublayers\",[\"visibleFolders\"])],w.prototype,\"readSublayersFromItemOrWebMap\",null),e([o(\"service\",\"sublayers\",[\"sublayers\"])],w.prototype,\"readSublayers\",null),e([i(\"sublayers\")],w.prototype,\"writeSublayers\",null),e([t({readOnly:!0,json:{read:!1}})],w.prototype,\"type\",void 0),e([t({json:{origins:{\"web-map\":{read:{source:\"title\"}}},write:{ignoreOrigin:!0}},dependsOn:[\"url\",\"parsedUrl\"]})],w.prototype,\"title\",null),e([t(d)],w.prototype,\"url\",void 0),e([t({readOnly:!0,dependsOn:[\"sublayers\"]})],w.prototype,\"visibleSublayers\",null),e([t({type:n})],w.prototype,\"extent\",void 0),e([t({dependsOn:[\"extent\"]})],w.prototype,\"fullExtent\",null),w=e([s(\"esri.layers.KMLLayer\")],w);var O=w;export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{getProperties as e}from\"../../core/accessorSupport/utils.js\";import{w as i}from\"../../chunks/persistableUrlUtils.js\";import{willPropertyWrite as r}from\"../../core/accessorSupport/write.js\";import{transparencyToOpacity as n}from\"../../webdoc/support/opacityUtils.js\";import t from\"../../TimeExtent.js\";import o from\"../../symbols/support/ElevationInfo.js\";const s={type:Boolean,value:!0,json:{origins:{\"web-scene\":{read:{source:[\"id\",\"url\",\"layerType\"],reader(i,r){if(null!=r.screenSizePerspective||\"defaults\"!==this.originOf(\"screenSizePerspectiveEnabled\"))return r.screenSizePerspective;e(this).store.set(\"screenSizePerspectiveEnabled\",!1,0)}},write:{ignoreOrigin:!0,target:\"screenSizePerspective\",writer(e,i,n,t){(\"defaults\"===this.originOf(\"screenSizePerspectiveEnabled\")&&e||r(this,\"screenSizePerspectiveEnabled\",{},t))&&(i[n]=e)}}}}}},a={type:Boolean,value:!0,json:{name:\"disablePopup\",read:{reader:(e,i)=>!i.disablePopup},write:{enabled:!0,writer(e,i,r){i[r]=!e}}}},l={type:Boolean,value:!0,json:{name:\"showLabels\",write:!0}},p={type:String,json:{origins:{\"portal-item\":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:i}}},c={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:\"showLegend\",write:!0}},d={value:null,type:o,json:{origins:{service:{name:\"elevationInfo\",write:!0}},name:\"layerDefinition.elevationInfo\",write:!0}};function f(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u={type:Number,json:{origins:{\"web-document\":{default:1,write:!0,read:!0},\"portal-item\":{write:!0}}}},y={...u,json:{...u.json,origins:{\"web-document\":{...u.json.origins[\"web-document\"],write:{enabled:!0,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}},read:{source:[\"layerDefinition.drawingInfo.transparency\",\"drawingInfo.transparency\"],reader:(e,i,r)=>r&&\"service\"!==r.origin||!i.drawingInfo||void 0===i.drawingInfo.transparency?i.layerDefinition&&i.layerDefinition.drawingInfo&&void 0!==i.layerDefinition.drawingInfo.transparency?n(i.layerDefinition.drawingInfo.transparency):void 0:n(i.drawingInfo.transparency)}}},m={type:t,dependsOn:[\"view.timeExtent\",\"layer.timeExtent\",\"layer.timeInfo\",\"layer.timeOffset\",\"layer.timeOffset.value\",\"layer.timeOffset.unit\",\"layer.useViewTime\"],readOnly:!0,get(){var e,i;if(null==(e=this.layer)||!e.timeInfo)return null;const r=null==(i=this.view)?void 0:i.timeExtent,n=this.layer.timeExtent,t=this.layer.useViewTime?r&&n?r.intersection(n):r||n:n;if(!t||t.isEmpty)return t;const o=this.layer.timeOffset,s=o?t.offset(-o.value,o.unit):t,a=this._get(\"timeExtent\");return s.equals(a)?a:s}};export{m as combinedViewLayerTimeExtentProperty,d as elevationInfo,l as labelsVisible,c as legendEnabled,u as opacity,y as opacityDrawingInfo,a as popupEnabled,f as readOnlyService,s as screenSizePerspectiveEnabled,p as url};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(n){return n&&\"esri.renderers.visualVariables.SizeVariable\"===n.declaredClass}function e(n){return null!=n&&!isNaN(n)&&isFinite(n)}function i(n){return n.valueExpression?\"expression\":n.field&&\"string\"==typeof n.field?\"field\":\"unknown\"}function l(n,e){const l=e||i(n),a=n.valueUnit||\"unknown\";return\"unknown\"===l?\"constant\":n.stops?\"stops\":null!=n.minSize&&null!=n.maxSize&&null!=n.minDataValue&&null!=n.maxDataValue?\"clamped-linear\":\"unknown\"===a?null!=n.minSize&&null!=n.minDataValue?n.minSize&&n.minDataValue?\"proportional\":\"additive\":\"identity\":\"real-world-size\"}export{i as getInputValueType,l as getTransformationType,n as isSizeVariable,e as isValidNumber};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{assumeNonNull as t}from\"./maybe.js\";import{getProperties as e}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import n from\"./Accessor.js\";import{read as c}from\"./accessorSupport/read.js\";import p from\"./accessorSupport/MultiOriginStore.js\";const a=n=>{let a=class extends n{constructor(...r){super(...r);const s=t(e(this)),o=s.metadatas,i=s.store,n=new p;s.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{s.internalGet(r)&&n.set(r,s.internalGet(r),0)}))}read(r,t){c(this,r,t)}getAtOrigin(r,t){const e=u(this),s=i(t);if(\"string\"==typeof r)return e.get(r,s);const o={};return r.forEach((r=>{o[r]=e.get(r,s)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),o=i(t),n=e(this);let c;c=\"string\"==typeof r?\"*\"===r?s.keys(o):[r]:r,c.forEach((r=>{n.propertyInvalidated(r),s.revert(r,o),n.propertyCommitted(r)}))}};return a=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return e(r).store}let f=class extends(a(n)){};f=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{getProperties as t}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import i from\"./Accessor.js\";import{write as c}from\"./accessorSupport/write.js\";import{ReadOnlyMultiOriginJSONMixin as n}from\"./ReadOnlyMultiOriginJSONSupport.js\";const p=i=>{let n=class extends i{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,s,o){t(this).setAtOrigin(r,s,e(o))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const r of o)t.originOf(r)===s&&t.set(r,t.get(r,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let t=i+1;t<o;++t)s.delete(r,t);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return n=r([s(\"esri.core.WriteableMultiOriginJSONSupport\")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function u(r){return t(r).store}const l=t=>{let e=class extends(p(n(t))){constructor(...r){super(...r)}};return e=r([s(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(i)){};O=r([s(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";const o=o=>{let t=class extends o{constructor(){super(...arguments),this.refreshInterval=0}refresh(){this.emit(\"refresh\")}};return r([e({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0,origins:{\"web-document\":{write:!0}}}})],t.prototype,\"refreshInterval\",void 0),t=r([s(\"esri.layers.mixins.RefreshableLayer\")],t),t};export{o as RefreshableLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import i from\"../../core/Error.js\";import{hasSamePortal as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as l}from\"../../core/promiseUtils.js\";import m from\"../../portal/Portal.js\";import c from\"../../portal/PortalItem.js\";const n=r.getLogger(\"esri.layers.mixins.PortalLayer\"),d=r=>{let d=class extends r{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,r,e){if(r.itemId)return new c({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import(\"../../portal/support/layersLoader.js\");return l(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(t){throw n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${t}`),t}}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const e=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.getDefault());return e&&o&&!p(o.restUrl,e.restUrl)?(r.messages&&r.messages.push(new i(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return t([e({type:c})],d.prototype,\"portalItem\",null),t([o(\"web-document\",\"portalItem\",[\"itemId\"])],d.prototype,\"readPortalItem\",null),t([a(\"web-document\",\"portalItem\",{itemId:{type:String}})],d.prototype,\"writePortalItem\",null),t([e()],d.prototype,\"resourceReferences\",void 0),d=t([s(\"esri.layers.mixins.PortalLayer\")],d),d};export{d as PortalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as e}from\"../maybe.js\";import{getProperties as n}from\"./utils.js\";import o from\"../Accessor.js\";import r from\"../Collection.js\";const f=[\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"];function i(t){return t instanceof o}function c(t){return t instanceof r?Object.keys(t.items):i(t)?n(t).keys():t?Object.keys(t):[]}function u(t,e){return t instanceof r?t.items[e]:t[e]}function l(t){return t?t.declaredClass:null}function s(t,n){const o=t.diff;if(o&&\"function\"==typeof o)return o(t,n);const r=c(t),p=c(n);if(0===r.length&&0===p.length)return;if(!r.length||!p.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,n))return{type:\"complete\",oldValue:t,newValue:n};const a=p.filter((t=>-1===r.indexOf(t))),y=r.filter((t=>-1===p.indexOf(t))),m=r.filter((e=>p.indexOf(e)>-1&&u(t,e)!==u(n,e))).concat(a,y).sort(),d=l(t);if(d&&f.indexOf(d)>-1&&m.length)return{type:\"complete\",oldValue:t,newValue:n};let b;const h=i(t)&&i(n);for(const r of m){const f=u(t,r),i=u(n,r);let c;(h||\"function\"!=typeof f&&\"function\"!=typeof i)&&(f!==i&&(null==f&&null==i||(c=o&&o[r]&&\"function\"==typeof o[r]?o[r](f,i):\"object\"==typeof f&&\"object\"==typeof i&&l(f)===l(i)?s(f,i):{type:\"complete\",oldValue:f,newValue:i},e(c)&&(e(b)?b.diff[r]=c:b={type:\"partial\",diff:{[r]:c}}))))}return b}function p(e,n){if(t(e))return!1;const o=n.split(\".\");let r=e;for(const t of o){if(\"complete\"===r.type)return!0;if(\"partial\"!==r.type)return!1;{const e=r.diff[t];if(!e)return!1;r=e}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(t||e))return!t||!e||\"object\"==typeof t&&\"object\"==typeof e&&l(t)!==l(e)?{type:\"complete\",oldValue:t,newValue:e}:s(t,e)}function m(e){if(t(e))return!0;switch(e.type){case\"complete\":return!1;case\"collection\":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case\"partial\":for(const t in e.diff){if(!m(e.diff[t]))return!1}return!0}}export{y as diff,p as hasDiff,a as hasDiffAny,m as isEmpty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"./PooledArray.js\";const e=-3;class s{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=\":\",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class i{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new t}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,s,i){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==e&&this._notifyRemoved(t,h.entry)),s>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn(\"Refusing to cache undefined entry \");if(!s||s<0)return void console.warn(\"Refusing to cache entry with invalid size \"+s);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit()}updateSize(t,e,s){const i=this._db.get(t);i&&i.entry===e&&(this._size-=i.size,s>this._maxSize?this._notifyRemoved(t,e):(i.size=s,this._size+=s,this._checkSizeLimit()))}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+\"/\"+Math.round(this._maxSize/1048576)+\"MB\",\"Hit rate\":Math.round(100*this._getHitRate())+\"%\",Entries:this._db.size.toString()},e={},s=new Array;this._db.forEach(((t,i)=>{const h=t.lifetime;s[h]=(s[h]||0)+t.size,this._users.forAll((s=>{const h=s.namespace;if(i.startsWith(h)){const s=e[h]||0;e[h]=s+t.size}}))}));const i={};this._users.forAll((t=>{const s=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const h=e[s]||0;e[s]=h,i[s]=Math.round(100*t.hitRate)+\"%\"}else i[s]=\"0%\"}));const h=Object.keys(e);h.forEach((t=>e[t]=e[t]/this._size*100)),h.sort(((t,s)=>e[s]-e[t])),h.forEach((s=>t[s]=Math.round(e[s])+\"% / \"+i[s]));for(let e=s.length-1;e>=0;--e){const i=s[e];i&&(t[\"Priority \"+(e+-3-1)]=Math.round(i/this.size*100)+\"%\")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,s)=>{s.startsWith(t)&&(this._size-=e.size,this._db.delete(s),this._notifyRemoved(s,e.entry))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemoved(e,t.entry))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(t,e){this._removeFuncs.forEach((s=>{t.startsWith(s[0])&&s[1](e)}))}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db)if(this._db.delete(t),e.lives<=1?(this._size-=e.size,this._notifyRemoved(t,e.entry)):(--e.lives,this._db.set(t,e)),this._size<=.9*this.maxSize)return}}export{e as MIN_PRIORITY,s as MemCache,i as MemCacheStorage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst e={\"web-scene/operational-layers\":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},\"web-scene/basemap\":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},\"web-scene/ground\":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},\"web-map/operational-layers\":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},\"web-map/basemap\":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},\"web-map/tables\":{ArcGISFeatureLayer:!0},\"portal-item/operational-layers\":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};export{e as supportedTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as i}from\"../../core/accessorSupport/decorators/writer.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{readLoadable as s}from\"../../core/accessorSupport/read.js\";import{willPropertyWrite as p}from\"../../core/accessorSupport/write.js\";import{supportedTypes as a}from\"./operationalLayers.js\";import{opacity as n}from\"../support/commonProperties.js\";const l=l=>{let y=class extends l{constructor(){super(...arguments),this.title=null}writeListMode(e,r,t,i){(i&&\"ground\"===i.layerContainerType||e&&p(this,t,{},i))&&(r[t]=e)}writeOperationalLayerType(e,r,t,i){!e||i&&\"tables\"===i.layerContainerType||(r.layerType=e)}writeTitle(e,r){r.title=e||\"Layer\"}read(e,r){r&&(r.layer=this),s(this,e,(r=>super.read(e,r)),r)}write(e,r){if(r&&r.origin){const e=`${r.origin}/${r.layerContainerType||\"operational-layers\"}`,t=a[e];let i=t&&t[this.operationalLayerType];if(\"ArcGISTiledElevationServiceLayer\"===this.operationalLayerType&&\"web-scene/operational-layers\"===e&&(i=!1),!i)return r.messages&&r.messages.push(new o(\"layer:unsupported\",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const t=super.write(e,{...r,layer:this}),i=!!r&&!!r.messages&&!!r.messages.filter((e=>e instanceof o&&\"web-document-write:property-required\"===e.name)).length;return!this.url&&i?null:t}beforeSave(){}};return e([r({type:String,json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0}},\"portal-item\":{write:!1}}}})],y.prototype,\"id\",void 0),e([r({json:{write:{ignoreOrigin:!0},origins:{\"web-map\":{read:!1,write:!1}}}})],y.prototype,\"listMode\",void 0),e([i(\"listMode\")],y.prototype,\"writeListMode\",null),e([r({type:String,readOnly:!0,json:{read:!1,write:{target:\"layerType\",ignoreOrigin:!0},origins:{\"portal-item\":{write:!1}}}})],y.prototype,\"operationalLayerType\",void 0),e([i(\"operationalLayerType\")],y.prototype,\"writeOperationalLayerType\",null),e([r(n)],y.prototype,\"opacity\",void 0),e([r({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},\"portal-item\":{write:!1}}},value:\"Layer\"})],y.prototype,\"title\",void 0),e([i(\"title\")],y.prototype,\"writeTitle\",null),e([r({type:Boolean,json:{name:\"visibility\",origins:{\"web-document\":{name:\"visibility\",default:!0},\"portal-item\":{name:\"visibility\",read:{source:[\"visible\",\"visibility\"]}}}}})],y.prototype,\"visible\",void 0),y=e([t(\"esri.layers.mixins.OperationalLayer\")],y),y};function y(e){return\"operationalLayerType\"in e}export{l as OperationalLayer,y as isOperationalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../core/compilerUtils.js\";import{isSome as a,isNone as r}from\"../../../core/maybe.js\";import i from\"../../../core/Logger.js\";import t from\"../../../Color.js\";import n from\"../../../Graphic.js\";import{meterIn as s}from\"../../support/lengthUtils.js\";import{isSizeVariable as o,isValidNumber as l}from\"./sizeVariableUtils.js\";const c=i.getLogger(\"esri.renderers.visualVariables.support.visualVariableUtils\"),u=new n,f=Math.PI,p=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i;function d(e,r,i){const n=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.filter((e=>\"color\"===e.type))[0]:e;if(!n)return;if(\"esri.renderers.visualVariables.ColorVariable\"!==n.declaredClass)return void c.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable\");const s=\"number\"==typeof r,o=s?null:r,l=o&&o.attributes;let u=s?r:null;const f=n.field,{ipData:p,hasExpression:d}=n.cache;let v=n.cache.compiledFunc;if(!f&&!d){const e=n.stops;return e&&e[0]&&e[0].color}if(\"number\"!=typeof u)if(d){if(!a(i)||!a(i.arcade))return void c.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,t=r.getViewInfo(e),s=r.createExecContext(o,t);if(!v){const e=r.createSyntaxTree(n.valueExpression);v=r.createFunction(e),n.cache.compiledFunc=v}u=r.executeFunction(v,s)}else l&&(u=l[f]);const b=n.normalizationField,h=l?parseFloat(l[b]):void 0;if(null!=u&&(!b||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(u/=h);const e=g(u,p);if(e){const r=e[0],s=e[1],o=r===s?n.stops[r].color:t.blendColors(n.stops[r].color,n.stops[s].color,e[2],a(i)?i.color:void 0);return new t(o)}}}function v(e,a,i){const t=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.filter((e=>\"opacity\"===e.type))[0]:e;if(!t)return;if(\"esri.renderers.visualVariables.OpacityVariable\"!==t.declaredClass)return void c.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable\");const n=\"number\"==typeof a,s=n?null:a,o=s&&s.attributes;let l=n?a:null;const u=t.field,{ipData:f,hasExpression:p}=t.cache;let d=t.cache.compiledFunc;if(!u&&!p){const e=t.stops;return e&&e[0]&&e[0].opacity}if(\"number\"!=typeof l)if(p){if(r(i)||r(i.arcade))return void c.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,n=a.getViewInfo(e),o=a.createExecContext(s,n);if(!d){const e=a.createSyntaxTree(t.valueExpression);d=a.createFunction(e),t.cache.compiledFunc=d}l=a.executeFunction(d,o)}else o&&(l=o[u]);const v=t.normalizationField,b=o?parseFloat(o[v]):void 0;if(null!=l&&(!v||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(l/=b);const e=g(l,f);if(e){const a=e[0],r=e[1];if(a===r)return t.stops[a].opacity;{const i=t.stops[a].opacity;return i+(t.stops[r].opacity-i)*e[2]}}}}function b(e,a,i){const t=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.filter((e=>\"rotation\"===e.type))[0]:e;if(!t)return;if(\"esri.renderers.visualVariables.RotationVariable\"!==t.declaredClass)return void c.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable\");const n=t.axis||\"heading\",s=\"heading\"===n&&\"arithmetic\"===t.rotationType?90:0,o=\"heading\"===n&&\"arithmetic\"===t.rotationType?-1:1,l=\"number\"==typeof a?null:a,u=l&&l.attributes,f=t.field,{hasExpression:p}=t.cache;let d=t.cache.compiledFunc,v=0;if(!f&&!p)return v;if(p){if(r(i)||r(i.arcade))return void c.error(\"Use of arcade expressions requires an arcade context\");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,n=a.getViewInfo(e),s=a.createExecContext(l,n);if(!d){const e=a.createSyntaxTree(t.valueExpression);d=a.createFunction(e),t.cache.compiledFunc=d}v=a.executeFunction(d,s)}else u&&(v=u[f]||0);return v=\"number\"!=typeof v||isNaN(v)?null:s+o*v,v}function h(e,i,t){const n=\"visualVariables\"in e&&e.visualVariables?e.visualVariables.filter((e=>\"size\"===e.type))[0]:e;if(!n)return;if(\"esri.renderers.visualVariables.SizeVariable\"!==n.declaredClass)return void c.warn(\"The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable\");const s=x(function(e,i,t){const n=\"number\"==typeof i,s=n?null:i,o=s&&s.attributes;let u=n?i:null;const{isScaleDriven:f}=e.cache;let p=e.cache.compiledFunc;if(f){const r=a(t)?t.scale:void 0,i=a(t)?t.view:void 0;u=null==r||\"3d\"===i?function(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}(e):r}else if(!n)switch(e.inputValueType){case\"expression\":{if(r(t)||r(t.arcade))return void c.error(\"Use of arcade expressions requires an arcade context\");const a={viewingMode:t.viewingMode,scale:t.scale,spatialReference:t.spatialReference},i=t.arcade.arcadeUtils,n=i.getViewInfo(a),o=i.createExecContext(s,n);if(!p){const a=i.createSyntaxTree(e.valueExpression);p=i.createFunction(a),e.cache.compiledFunc=p}u=i.executeFunction(p,o);break}case\"field\":o&&(u=o[e.field]);break;case\"unknown\":u=null}if(!l(u))return null;if(n||!e.normalizationField)return u;const d=o?parseFloat(o[e.normalizationField]):null;return l(d)&&0!==d?u/d:null}(n,i,t),n,i,t,n.cache.ipData);return null==s||isNaN(s)?0:s}function m(e,a,r){return null==e?null:o(e)?h(e,a,r):l(e)?e:null}function V(e,a,r){return l(r)&&e>r?r:l(a)&&e<a?a:e}function x(e,r,i,t,n){switch(r.transformationType){case\"additive\":return function(e,a,r,i){return e+(m(a.minSize,r,i)||a.minDataValue)}(e,r,i,t);case\"constant\":return function(e,a,r){const i=e.stops;let t=i&&i.length&&i[0].size;return null==t&&(t=e.minSize),m(t,a,r)}(r,i,t);case\"clamped-linear\":return function(e,r,i,t){const n=(e-r.minDataValue)/(r.maxDataValue-r.minDataValue),s=m(r.minSize,i,t),o=m(r.maxSize,i,t),l=a(t)?t.shape:void 0;if(e<=r.minDataValue)return s;if(e>=r.maxDataValue)return o;if(\"area\"===r.scaleBy&&l){const e=\"circle\"===l,a=e?f*Math.pow(s/2,2):s*s,r=a+n*((e?f*Math.pow(o/2,2):o*o)-a);return e?2*Math.sqrt(r/f):Math.sqrt(r)}return s+n*(o-s)}(e,r,i,t);case\"proportional\":return function(e,r,i,t){const n=a(t)?t.shape:void 0,s=e/r.minDataValue,o=m(r.minSize,i,t),l=m(r.maxSize,i,t);let c=null;return c=\"circle\"===n?2*Math.sqrt(s*Math.pow(o/2,2)):\"square\"===n||\"diamond\"===n||\"image\"===n?Math.sqrt(s*Math.pow(o,2)):s*o,V(c,o,l)}(e,r,i,t);case\"stops\":return function(e,a,r,i,t){const[n,s,o]=g(e,t);if(n===s)return m(a.stops[n].size,r,i);{const e=m(a.stops[n].size,r,i);return e+(m(a.stops[s].size,r,i)-e)*o}}(e,r,i,t,n);case\"real-world-size\":return function(e,r,i,t){const n=(a(t)&&t.resolution?t.resolution:1)*s[r.valueUnit],o=m(r.minSize,i,t),l=m(r.maxSize,i,t),{valueRepresentation:c}=r;let u=null;return u=\"area\"===c?2*Math.sqrt(e/f)/n:\"radius\"===c||\"distance\"===c?2*e/n:e/n,V(u,o,l)}(e,r,i,t);case\"identity\":return e;case\"unknown\":return null}}function w(e,a,r){const{isScaleDriven:i}=e.cache;if(!(i&&\"3d\"===r||a))return null;const t={scale:a,view:r};let n=m(e.minSize,u,t),s=m(e.maxSize,u,t);if(null!=n||null!=s){if(n>s){const e=s;s=n,n=e}return{minSize:n,maxSize:s}}}function y(e,a,r){if(!e.visualVariables)return;const i=[],t=[],n=[],s=[],o=[];for(const a of e.visualVariables)switch(a.type){case\"color\":t.push(a);break;case\"opacity\":n.push(a);break;case\"rotation\":o.push(a);break;case\"size\":s.push(a)}return t.forEach((e=>{const t=d(e,a,r);i.push({variable:e,value:t})})),n.forEach((e=>{const t=v(e,a,r);i.push({variable:e,value:t})})),o.forEach((e=>{const t=b(e,a,r);i.push({variable:e,value:t})})),s.forEach((e=>{const t=h(e,a,r);i.push({variable:e,value:t})})),i.filter((e=>null!=e.value))}function g(e,a){if(!a)return;let r=0,i=a.length-1;return a.some(((a,t)=>e<a?(i=t,!0):(r=t,!1))),[r,i,(e-a[r])/(a[i]-a[r])]}function z(a,r,i){const t=[\"proportional\",\"proportional\",\"proportional\"];for(const n of a){const a=n.useSymbolValue?\"symbol-value\":h(n,r,i);switch(n.axis){case\"width\":t[0]=a;break;case\"depth\":t[1]=a;break;case\"height\":t[2]=a;break;case\"width-and-depth\":t[0]=a,t[1]=a;break;case\"all\":case void 0:case null:t[0]=a,t[1]=a,t[2]=a;break;default:e(n.axis)}}return t}export{z as getAllSizes,d as getColor,v as getOpacity,b as getRotationAngle,h as getSize,x as getSizeForValue,m as getSizeFromNumberOrVariable,w as getSizeRangeAtScale,y as getVisualVariableValues,p as viewScaleRE};\n"],"sourceRoot":""}