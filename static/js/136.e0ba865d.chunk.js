(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[136],{1017:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(51);function a(e){return e=e||r.a.location.hostname,u.some((function(t){var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function o(e,t){return e&&(t=t||r.a.location.hostname)?null!=t.match(c)||null!=t.match(s)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(i)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}var c=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,s=/^[\w-]*\.mapsdevext.arcgis.com$/,i=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,c,l,/^jsapps.esri.com$/,s,i]},712:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchStyle",(function(){return j})),n.d(t,"fetchSymbolFromStyle",(function(){return O})),n.d(t,"resolveWebStyleSymbol",(function(){return g})),n.d(t,"styleNameFromItem",(function(){return N}));var r=n(9),a=n(12),o=n(23),c=n(11),l=n(119),s=n(16),i=n(81),u=n(191),m=n(124),f=n(330),y=n(321),b=n(149),d=n(1017),h=n(13);function p(e){return!!Object(h.a)("enable-feature:".concat(e))}var v={};function j(e,t,n){return e.styleUrl?function(e,t){return S(e,t).then((function(t){return{data:t.data,baseUrl:Object(c.E)(e),styleUrl:e}}))}(e.styleUrl,n):e.styleName?function(e,t,n){var r,c=t.portal||m.a.getDefault(),l="".concat(c.url," - ").concat(c.user&&c.user.username," - ").concat(e);return v[l]||(v[l]=function(e,t,n){return t.load(n).then((function(){var r=new u.a({disableExtraQuery:!0,query:"owner:".concat(U," AND type:").concat(I,' AND typekeywords:"').concat(e,'"')});return t.queryItems(r,n)})).then((function(t){var r=t.results,c=null,l=e.toLowerCase();if(r&&Array.isArray(r)){var s,i=Object(a.a)(r);try{for(i.s();!(s=i.n()).done;){var u=s.value;if(u.typeKeywords.some((function(e){return e.toLowerCase()===l}))&&u.type===I&&u.owner===U){c=u;break}}}catch(m){i.e(m)}finally{i.f()}}if(!c)throw new o.a("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return c.load(n)}))}(e,c,n).then((function(e){return r=e,e.fetchData()})).then((function(t){return{data:t,baseUrl:r.itemUrl,styleName:e}}))),v[l]}(e.styleName,t,n):Object(s.t)(new o.a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(e,t,n,r){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){var r=E.replace(/\{SymbolName\}/gi,e.name);return S(r,n).then((function(e){var n=w(e.data);return Object(b.f)(n,{portal:t.portal,url:Object(c.I)(Object(c.E)(r)),origin:"portal-item"})}))}(e,t,r):j(e,t,r).then((function(a){return O(a,e.name,t,n,r)})):Object(s.t)(new o.a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function O(e,t,n,r,i){var u=e.data,m={portal:n.portal,url:Object(c.I)(e.baseUrl),origin:"portal-item"},h=u.items.find((function(e){return e.name===t}));if(!h)return Object(s.t)(new o.a("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(t,"' could not be found"),{symbolName:t}));var v=Object(l.a)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!p("force-wosr")){var n,r=Object(a.a)(e.formatInfos);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("gltf"===o.type)return o.href}}catch(c){r.e(c)}finally{r.f()}}return e.webRef}(h,r),m),j=h.thumbnail&&h.thumbnail.href,g=h.thumbnail&&h.thumbnail.imageData;Object(d.b)()&&(v=Object(d.a)(v),j=Object(d.a)(j));var O={portal:n.portal,url:Object(c.I)(Object(c.E)(v)),origin:"portal-item"};return S(v,i).then((function(a){var o="cimRef"===r?w(a.data):a.data,c=Object(b.f)(o,O);if(c&&Object(b.h)(c)){if(j){var s=Object(l.a)(j,m);c.thumbnail=new y.a({url:s})}else g&&(c.thumbnail=new y.a({url:"data:image/png;base64,".concat(g)}));e.styleUrl?c.styleOrigin=new f.a({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(c.styleOrigin=new f.a({portal:n.portal,styleName:e.styleName,name:t}))}return c}))}function w(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function N(e){var t,n=Object(a.a)(e.typeKeywords);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(/^Esri.*Style$/.test(r)&&"Esri Style"!==r)return r}}catch(o){n.e(o)}finally{n.f()}}function S(e,t){var n=Object(r.a)({responseType:"json",query:{f:"json"}},t);return Object(i.default)(Object(c.B)(e),n)}var U="esri_en",I="Style",E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"}}]);
//# sourceMappingURL=136.e0ba865d.chunk.js.map