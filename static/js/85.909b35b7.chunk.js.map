{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/chunks/spatialQuerySupport.js","../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","../node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","../node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js","../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureFilter.js"],"names":["t","n","e","featureAdapter","u","startTimeField","r","endTimeField","l","Number","POSITIVE_INFINITY","i","NEGATIVE_INFINITY","forEach","getAttribute","o","isNaN","Math","min","max","start","end","c","f","s","coords","lengths","d","g","E","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","N","Object","freeze","_","h","b","x","J","esriGeometryPoint","j","esriGeometryPolyline","U","esriGeometryPolygon","M","esriGeometryMultipoint","P","Z","hasZ","hasM","a","B","p","geometry","w","G","T","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","length","trim","onStatisticField","outSR","spatialReference","W","where","test","distance","units","fromJSON","S","C","then","O","X","spatialRel","m","toJSON","k","A","JSON","parse","stringify","K","Q","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","V","$","esriGeometryEnvelope","H","L","geodesicBuffer","Y","I","q","F","y","bind","ee","query","R","te","rings","referencesGeometry","readArcadeFeature","evaluate","$feature","getLogger","warn","this","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","_schema","console","debug","clear","targets","name","attributes","type","push","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","some","expression","referencesScale","_statisticFields","has","set","_evaluateField","resultType","setComputedNumericAtIndex","fieldIndex","setComputedStringAtIndex","fieldsIndex","valueExpression","fields","createLabelFunction","label","builder","$view","scale","getObjectId","getAttributes","readAttributes","readAttribute","cloneWithGeometry","getGeometry","readHydratedGeometry","getCentroid","readCentroid","events","_featureSetsByInstance","Map","_objectIdToDisplayId","_spatialIndexInvalid","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","featureCount","vertexCount","addOrUpdate","instance","getCursor","next","getIndex","get","createDisplayId","setDisplayId","setInstanceId","setComputedAttributes","emit","getInstanceId","_lookupFeature","_getFeatureSet","setIndex","_searchIndex","lookupFeatureByDisplayId","_rebuildIndex","readGeometry","getDisplayId","releaseDisplayId","unsetAttributeData","delete","setBounds","load","search","field","WhereClause","create","isStandardized","error","testFeature","_geometryBounds","_idToVisibility","_serviceInfo","_hash","_applyFilter","_resetAllHiddenIds","update","show","hide","Set","timeExtent","objectIds","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","_timeOperator","timeInfo","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size"],"mappings":"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","file":"static/js/85.909b35b7.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:r}=t;let l=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&r)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,r);null==n||isNaN(n)||(l=Math.min(l,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||r;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(l=Math.min(l,u),i=Math.max(i,u))}))}return{start:l,end:i}}function n(t,n,e){if(!n||!t)return null;const{startTimeField:u,endTimeField:r}=t;if(!u&&!r)return null;const{start:l,end:i}=n;return null===l&&null===i?null:void 0===l&&void 0===i?()=>!1:u&&r?function(t,n,e,u,r){if(null!=u&&null!=r)return l=>{const i=t.getAttribute(l,n),o=t.getAttribute(l,e);return(null==i||i<=r)&&(null==o||o>=u)};if(null!=u)return n=>{const r=t.getAttribute(n,e);return null==r||r>=u};if(null!=r)return e=>{const u=t.getAttribute(e,n);return null==u||u<=r};return}(e,u,r,l,i):function(t,n,e,u){if(null!=e&&null!=u&&e===u)return u=>t.getAttribute(u,n)===e;if(null!=e&&null!=u)return r=>{const l=t.getAttribute(r,n);return l>=e&&l<=u};if(null!=e)return u=>t.getAttribute(u,n)>=e;if(null!=u)return e=>t.getAttribute(e,n)<=u;return}(e,u||r,l,i)}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,c=0;n<l.length;n++,c+=s)if(!o(t,r,e,i[c],i[c+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let n=o,i=o+e*r;n<i;n+=r){s=n+r,s===i&&(s=o);const e=t[n],l=t[n+1],d=t[s],g=t[s+1];(l<u&&g>=u||g<u&&l>=u)&&e+(u-l)/(g-l)*(d-e)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../core/maybe.js\";import{JSONMap as t}from\"../core/jsonMap.js\";import r from\"../core/Error.js\";import{resolve as i}from\"../core/promiseUtils.js\";import{isGeographic as s,isWebMercator as n,WGS84 as o,isValid as a}from\"../geometry/support/spatialReferenceUtils.js\";import{extentContainsPoint as l,extentContainsMultipoint as p}from\"../geometry/support/contains.js\";import{getExtentIntersector as u}from\"../geometry/support/intersects.js\";import{getGeometryExtent as c}from\"../geometry/support/extentUtils.js\";import{fromJSON as m,isPolygon as f,isExtent as y,getJsonType as R}from\"../geometry/support/jsonUtils.js\";import{getUnitString as S}from\"../core/unitUtils.js\";import{normalizeCentralMeridian as g}from\"../geometry/support/normalizeUtils.js\";import h from\"../layers/graphics/OptimizedGeometry.js\";import{quantizeOptimizedGeometry as d,convertToPoint as j,generalizeOptimizedGeometry as w,removeZMValues as G,convertToPolyline as U,convertToPolygon as M,convertToMultipoint as P,convertFromPolygon as I}from\"../layers/graphics/featureConversionUtils.js\";import{getCentroidOptimizedGeometry as v}from\"../layers/graphics/centroid.js\";import{checkProjectionSupport as C,project as O}from\"../layers/graphics/data/projectionSupport.js\";import{polygonContainsPoint as q,polygonContainsMultipoint as F}from\"../layers/graphics/contains.js\";const E=new t({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),N=Object.freeze({}),_=new h,b=new h,x=new h,J={esriGeometryPoint:j,esriGeometryPolyline:U,esriGeometryPolygon:M,esriGeometryMultipoint:P};function Z(e,t,r,i=e.hasZ,s=e.hasM){const n=e.hasZ&&i,o=e.hasM&&s;if(r){const a=d(x,t,e.hasZ,e.hasM,\"esriGeometryPoint\",r,i,s);return j(a,n,o)}return j(t,n,o)}function z(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=v(new h,t.geometry,e.hasZ,e.hasM)),Z(e,t.centroid,r)):null}function B(e,t,r,i,s,n,o=t,a=r){const l=t&&o,p=r&&a,u=i?\"coords\"in i?i:i.geometry:null;if(!u)return null;if(s){let i=w(b,u,t,r,e,s,o,a);return n&&(i=d(x,i,l,p,e,n)),J[e](i,l,p)}if(n){const i=d(x,u,t,r,e,n,o,a);return J[e](i,l,p)}return G(_,u,t,r,o,a),J[e](_,l,p)}async function T(e,t,r){const{outFields:i,orderByFields:s,groupByFieldsForStatistics:n,outStatistics:o}=e;if(i)for(let e=0;e<i.length;e++)i[e]=i[e].trim();if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),W(e,t,r)}async function D(e,t,r){return W(e,t,r)}async function W(t,r,i){if(!t)return null;let{where:a}=t;if(t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||r&&r===a)&&(t.where=null),!t.geometry)return t;let l=await async function(e){const{geometry:t,distance:r,units:i}=e;if(null==r||\"vertexAttributes\"in t)return t;const a=t.spatialReference,l=i?E.fromJSON(i):S(a),p=a&&(s(a)||n(a))?t:await C(a,o).then((()=>O(t,o)));return(await X())(p.spatialReference,p,r,l)}(t);if(t.distance=0,t.units=null,\"esriSpatialRelEnvelopeIntersects\"===t.spatialRel){const{spatialReference:e}=t.geometry;l=c(l),l.spatialReference=e}t.geometry=l,await C(l.spatialReference,i);const p=(await g(m(l)))[0];if(e(p))throw N;const u=p.toJSON(),f=await O(u,u.spatialReference,i);if(!f)throw N;return f.spatialReference=i,t.geometry=f,t}function k(e){return e&&A in e?JSON.parse(JSON.stringify(e,K)):e}const A=\"_geVersion\",K=(e,t)=>e!==A?t:void 0,Q={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},V={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},$={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},H={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function L(){return import(\"../geometry/geometryEngineJSON.js\")}function X(){return L().then((e=>e.geodesicBuffer))}function Y(e,t,r,s,n){if(f(t)&&\"esriGeometryPoint\"===r&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=I(new h,t,!1,!1);return i((t=>q(e,!1,!1,t)))}if(f(t)&&\"esriGeometryMultipoint\"===r){const r=I(new h,t,!1,!1);if(\"esriSpatialRelContains\"===e)return i((e=>F(r,!1,!1,e,s,n)))}if(y(t)&&\"esriGeometryPoint\"===r&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return i((e=>l(t,B(r,s,n,e))));if(y(t)&&\"esriGeometryMultipoint\"===r&&\"esriSpatialRelContains\"===e)return i((e=>p(t,B(r,s,n,e))));if(y(t)&&\"esriSpatialRelIntersects\"===e){const e=u(r);return i((i=>e(t,B(r,s,n,i))))}return L().then((i=>{const o=i[Q[e]].bind(null,t.spatialReference,t);return e=>o(B(r,s,n,e))}))}async function ee(e,t,i){const{spatialRel:s,geometry:n}=e;if(n){if(!0!==V[s])throw new r(\"feature-store:unsupported-query\",\"Unsupported query spatial relationship\",{query:e});if(a(n.spatialReference)&&a(i)){if(!function(e){return!0===$[R(e)]}(n))throw new r(\"feature-store:unsupported-query\",\"Unsupported query geometry type\",{query:e});if(!function(e){return!0===H[e]}(t))throw new r(\"feature-store:unsupported-query\",\"Unsupported layer geometry type\",{query:e});if(e.outSR)return C(e.geometry&&e.geometry.spatialReference,e.outSR)}}}function te(e){if(y(e))return!0;if(f(e)){for(const t of e.rings){if(5!==t.length)return!1;if(t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1}return!0}return!1}export{N as Q,T as a,te as b,k as c,ee as d,B as e,z as f,Y as g,D as h,L as i,X as j,W as n,Z as t};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(r){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",r),null}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{createRendererExpression as r}from\"../../../../support/arcadeOnDemand.js\";import{diff as i,hasDiff as a}from\"../../../../core/accessorSupport/diffUtils.js\";import o from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class n{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}async updateSchema(r,o){const c=i(this._schema,o);if(this._schema=o,!o||s(c)||!a(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),r.targets[o.name]=!0;const n=o.attributes,p=[],u=[];for(const e in n){const s=n[e];switch(s.type){case\"field\":break;case\"expression\":p.push(this._createArcadeComputedField(s));break;case\"label-expression\":p.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":u.push(s)}}this._computedFields=await t(p),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=u}setComputedAttributes(e,s,t,r){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(t)){i.set(t);for(const i of this._computedFields){const a=this._evaluateField(s,i,r);switch(i.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,i.fieldIndex,a);break;case\"string\":e.setComputedStringAtIndex(t,i.fieldIndex,a)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex;return{...e,expression:await r(e.valueExpression,s,t)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fields,{createLabelFunction:r}=await c,i=await r(e.label,t,s);return{...e,builder:i}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:r}=s;return o(r,e,{$view:{scale:t}})}}}}export{n as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,unwrap as e}from\"../../../../core/maybe.js\";import s from\"../../../../core/Evented.js\";import{fromRect as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{r}from\"../../../../chunks/rbush.js\";import{Store2D as n}from\"./Store2D.js\";function o(t){return(4294901760&t)>>>16}function i(t){return 65535&t}const d={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class u extends n{constructor(t,e){super(t,e),this.featureAdapter=d,this.events=new s,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._index=r(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)})))}get storeStatistics(){return{featureCount:0,vertexCount:0}}onTileData(e,s,a){if(t(s.addOrUpdate))return s;this._featureSetsByInstance.set(s.addOrUpdate.instance,s.addOrUpdate),this._storage=a,s.addOrUpdate._storage=a;const r=s.addOrUpdate.getCursor();for(;r.next();){const t=r.getObjectId(),s=(n=r.instance,o=r.getIndex(),n<<16|o);let i=this._objectIdToDisplayId.get(t);i||(i=a.createDisplayId(),this._objectIdToDisplayId.set(t,i),this._spatialIndexInvalid=!0),r.setDisplayId(i),a.setInstanceId(i,s),this.setComputedAttributes(a,r,i,e.scale)}var n,o;return\"update\"===s.type&&(this._spatialIndexInvalid=!0),this.events.emit(\"changed\"),s}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=o(s),r=i(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,s){const a=this._searchIndex(t);for(const t of a){const a=this.lookupFeatureByDisplayId(t,this._storage);s(e(a))}}forEachBounds(t,e,s){this._rebuildIndex();const r=[0,0,0,0];for(const n of t){if(!n.readGeometry())continue;const t=n.getDisplayId();r[0]=this._storage.getXMin(t),r[1]=this._storage.getYMin(t),r[2]=this._storage.getXMax(t),r[3]=this._storage.getYMax(t),e(a(s,r))}}sweepFeatures(t,e,s){this._objectIdToDisplayId.forEach(((a,r)=>{t.has(a)||(e.releaseDisplayId(a),s.unsetAttributeData(a),this._objectIdToDisplayId.delete(r))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(e,s){const a=this.lookupFeatureByDisplayId(e,s);return t(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=o(e),a=i(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}hasInstance(t){return this._featureSetsByInstance.has(t)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;this._index.clear();const t=[];this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.load(t),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=o(t),s=i(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}}export{u as FeatureStore2D,d as featureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Logger.js\";import r from\"../../../../../core/Error.js\";const t=e.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(e,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(e,s);if(!o.isStandardized){const e=new r(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(e)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(r){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",e),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import e from\"../../../core/Logger.js\";import i from\"../../../core/Error.js\";import{all as s}from\"../../../core/promiseUtils.js\";import{getBoundsXY as r}from\"../../../geometry/support/boundsUtils.js\";import{create as o}from\"../../../geometry/support/aaBoundingRect.js\";import h from\"../../../tasks/support/Query.js\";import{n as a,g as l}from\"../../../chunks/spatialQuerySupport.js\";import{getTimeOperator as n}from\"./timeSupport.js\";import{featureAdapter as d}from\"../../../views/2d/layers/features/FeatureStore2D.js\";import{createWhereClause as m}from\"../../../views/2d/layers/features/support/whereUtils.js\";const _=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\");export default class{constructor(t){this._geometryBounds=o(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,1)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(1&this._idToVisibility.get(r)),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?3:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return h.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await a(t,null,e);await s([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await m(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",s=await l(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);r(this._geometryBounds,e),this._spatialQueryOperator=s,this.geometry=e,this.spatialRel=i}_setTimeFilter(t){if(this.timeExtent=this._timeOperator=null,t&&t.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=t.timeExtent,this._timeOperator=n(this._serviceInfo.timeInfo,t.timeExtent,d);else{const e=new i(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",t.timeExtent);_.error(e)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(e){return!t(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{1&e||(this._idToVisibility.set(i,1),t.push(i))})),t}}\n"],"sourceRoot":""}