(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[92],{1043:function(e,t,r){"use strict";r.r(t);var n=r(10),i=r.n(n),a=r(12),o=r(21),l=r(41),s=r(9),u=r(2),d=r(3),c=r(5),p=r(6),f=r(0),b=(r(13),r(24)),y=r(99),v=r(4),j=r(14),O=r(15),h=r(1),g=r(63),m=r(8),w=r(47),F=r(23),I=r(11),k=(r(19),r(20),r(16)),C=r(329),x=r(276),S=r(81),T=r(243),_=r(795),P=r(787),R=r(809),L=r(245),q=r(790),B=r(866),N=r(802),E=r(379),M=r(858),$=r(812),D=r(977),V=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).field=null,n.type=null,n}return Object(d.a)(r,[{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}}]),r}(r(28).a);Object(f.a)([Object(h.b)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],V.prototype,"field",void 0),Object(f.a)([Object(h.b)({readOnly:!0,nonNullable:!0,json:{read:!1}})],V.prototype,"type",void 0);var A,G=V=Object(f.a)([Object(m.a)("esri.layers.pointCloudFilters.PointCloudFilter")],V),K=r(42),z=A=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).requiredClearBits=null,n.requiredSetBits=null,n.type="bitfield",n}return Object(d.a)(r,[{key:"clone",value:function(){return new A({field:this.field,requiredClearBits:Object(b.a)(this.requiredClearBits),requiredSetBits:Object(b.a)(this.requiredSetBits)})}}]),r}(G);Object(f.a)([Object(h.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],z.prototype,"requiredClearBits",void 0),Object(f.a)([Object(h.b)({type:[O.a],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],z.prototype,"requiredSetBits",void 0),Object(f.a)([Object(K.a)({pointCloudBitfieldFilter:"bitfield"})],z.prototype,"type",void 0);var J,U=z=A=Object(f.a)([Object(m.a)("esri.layers.pointCloudFilters.PointCloudBitfieldFilter")],z),H=J=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).includedReturns=[],n.type="return",n}return Object(d.a)(r,[{key:"clone",value:function(){return new J({field:this.field,includedReturns:Object(b.a)(this.includedReturns)})}}]),r}(G);Object(f.a)([Object(h.b)({type:[["firstOfMany","last","lastOfMany","single"]],json:{write:{enabled:!0,isRequired:!0}}})],H.prototype,"includedReturns",void 0),Object(f.a)([Object(K.a)({pointCloudReturnFilter:"return"})],H.prototype,"type",void 0);var Q,W=H=J=Object(f.a)([Object(m.a)("esri.layers.pointCloudFilters.PointCloudReturnFilter")],H),X=Q=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).mode="exclude",n.type="value",n.values=[],n}return Object(d.a)(r,[{key:"clone",value:function(){return new Q({field:this.field,mode:this.mode,values:Object(b.a)(this.values)})}}]),r}(G);Object(f.a)([Object(h.b)({type:["exclude","include"],json:{write:{enabled:!0,isRequired:!0}}})],X.prototype,"mode",void 0),Object(f.a)([Object(K.a)({pointCloudValueFilter:"value"})],X.prototype,"type",void 0),Object(f.a)([Object(h.b)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],X.prototype,"values",void 0);var Y,Z={key:"type",base:G,typeMap:{value:X=Q=Object(f.a)([Object(m.a)("esri.layers.pointCloudFilters.PointCloudValueFilter")],X),bitfield:U,return:W}},ee=r(1009),te=r(1128),re=Y=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).type="point-cloud-rgb",n.field=null,n}return Object(d.a)(r,[{key:"clone",value:function(){return new Y(Object(s.a)(Object(s.a)({},this.cloneProperties()),{},{field:Object(b.a)(this.field)}))}}]),r}(ee.a);Object(f.a)([Object(K.a)({pointCloudRGBRenderer:"point-cloud-rgb"})],re.prototype,"type",void 0),Object(f.a)([Object(h.b)({type:String,json:{write:!0}})],re.prototype,"field",void 0);var ne=re=Y=Object(f.a)([Object(m.a)("esri.renderers.PointCloudRGBRenderer")],re),ie=r(1129),ae=r(1130),oe={key:"type",base:ee.a,typeMap:{"point-cloud-class-breaks":te.a,"point-cloud-rgb":ne,"point-cloud-stretch":ie.a,"point-cloud-unique-value":ae.a},errorContext:"renderer"},le=j.a.getLogger("esri.layers.PointCloudLayer"),se=Object(M.a)(),ue=function(e){Object(c.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).operationalLayerType="PointCloudLayer",e.popupEnabled=!0,e.popupTemplate=null,e.opacity=1,e.filters=[],e.fields=null,e.outFields=null,e.path=null,e.legendEnabled=!0,e.renderer=null,e.type="point-cloud",e}return Object(d.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"defaultPopupTemplate",get:function(){return this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"fieldsIndex",get:function(){return new q.a(this.fields)}},{key:"getFieldDomain",value:function(e){var t=this.fieldsIndex.get(e);return t&&t.domain?t.domain:null}},{key:"readServiceFields",value:function(e,t,r){return Array.isArray(e)?e.map((function(e){var t=new L.a;return"FieldTypeInteger"===e.type&&((e=Object(b.a)(e)).type="esriFieldTypeInteger"),t.read(e,r),t})):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map((function(e){return new L.a({name:e.name,type:"ELEVATION"===e.name?"double":"integer"})})):null}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"writeRenderer",value:function(e,t,r,n){Object(y.c)("layerDefinition.drawingInfo.renderer",e.write(null,n),t)}},{key:"load",value:function(e){var t=this,r=Object(v.i)(e)?e.signal:null,n=this.loadFromPortal({supportedTypes:["Scene Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}));return this.addResolvingPromise(n),Object(k.u)(this)}},{key:"createPopupTemplate",value:function(e){var t=Object($.a)(this,e);return this.formatPopupTemplateReturnsField(t),this.formatPopupTemplateRGBField(t),t}},{key:"formatPopupTemplateReturnsField",value:function(e){var t=this.fieldsIndex.get("RETURNS");if(t){var r=e.fieldInfos.find((function(e){return e.fieldName===t.name}));if(r){var n=new C.a({name:"pcl-returns-decoded",title:t.alias||t.name,expression:"\n        var returnValue = $feature.".concat(t.name,';\n        return (returnValue % 16) + " / " + Floor(returnValue / 16);\n      ')});e.expressionInfos=[].concat(Object(l.a)(e.expressionInfos||[]),[n]),r.fieldName="expression/pcl-returns-decoded"}}}},{key:"formatPopupTemplateRGBField",value:function(e){var t=this.fieldsIndex.get("RGB");if(t){var r=e.fieldInfos.find((function(e){return e.fieldName===t.name}));if(r){var n=new C.a({name:"pcl-rgb-decoded",title:t.alias||t.name,expression:"\n        var rgb = $feature.".concat(t.name,';\n        var red = Floor(rgb / 65536, 0);\n        var green = Floor((rgb - (red * 65536)) / 256,0);\n        var blue = rgb - (red * 65536) - (green * 256);\n\n        return "rgb(" + red + "," + green + "," + blue + ")";\n      ')});e.expressionInfos=[].concat(Object(l.a)(e.expressionInfos||[]),[n]),r.fieldName="expression/pcl-rgb-decoded"}}}},{key:"queryCachedStatistics",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n,o,l,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:if(this.attributeStorageInfo){e.next=4;break}throw new F.a("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");case 4:if(n=this.fieldsIndex.get(t)){e.next=7;break}throw new F.a("pointcloudlayer:field-unexisting","Field '".concat(t,"' does not exist on the layer"));case 7:o=Object(a.a)(this.attributeStorageInfo),e.prev=8,o.s();case 10:if((l=o.n()).done){e.next=17;break}if((s=l.value).name!==n.name){e.next=15;break}return u=Object(I.x)(this.parsedUrl.path,"./statistics/".concat(s.key)),e.abrupt("return",Object(S.default)(u,{query:{f:"json"},responseType:"json",signal:r?r.signal:null}).then((function(e){return e.data})));case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:throw new F.a("pointcloudlayer:no-cached-statistics","Cached statistics for this attribute are not available");case 26:case"end":return e.stop()}}),e,this,[[8,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(1,Object(s.a)(Object(s.a)({},r),{},{getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"point-cloud"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"point-cloud"},e.abrupt("return",this._debouncedSaveOperations(0,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(e.layerType&&"PointCloud"!==e.layerType)throw new F.a("pointcloudlayer:layer-type-not-supported","PointCloudLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new F.a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"});if(this.version.major>2)throw new F.a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"})}},{key:"hasCachedStatistics",value:function(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some((function(t){return t.name===e}))}},{key:"_getTypeKeywords",value:function(){return["PointCloud"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&le.warn(".elevationInfo=","Point cloud layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&le.warn(".elevationInfo=","Point cloud layers do not support featureExpressionInfo"))}}]),r}(Object(D.a)(Object(B.a)(Object(R.a)(Object(N.a)(Object(E.a)(Object(_.a)(T.a)))))));Object(f.a)([Object(h.b)({type:["PointCloudLayer"]})],ue.prototype,"operationalLayerType",void 0),Object(f.a)([Object(h.b)(P.g)],ue.prototype,"popupEnabled",void 0),Object(f.a)([Object(h.b)({type:x.a,json:{name:"popupInfo",write:!0}})],ue.prototype,"popupTemplate",void 0),Object(f.a)([Object(h.b)({readOnly:!0,json:{read:!1},dependsOn:["fields","title","attributeStorageInfo"]})],ue.prototype,"defaultPopupTemplate",null),Object(f.a)([Object(h.b)({readOnly:!0,json:{write:!1,read:!1,origins:{"web-document":{write:!1,read:!1}}}})],ue.prototype,"opacity",void 0),Object(f.a)([Object(h.b)({type:["show","hide"]})],ue.prototype,"listMode",void 0),Object(f.a)([Object(h.b)({types:[Z],json:{origins:{service:{read:{source:"filters"}}},name:"layerDefinition.filters",write:!0}})],ue.prototype,"filters",void 0),Object(f.a)([Object(h.b)({type:[L.a]})],ue.prototype,"fields",void 0),Object(f.a)([Object(h.b)({readOnly:!0,dependsOn:["fields"]})],ue.prototype,"fieldsIndex",null),Object(f.a)([Object(g.a)("service","fields",["fields","attributeStorageInfo"])],ue.prototype,"readServiceFields",null),Object(f.a)([Object(h.b)(se.outFields)],ue.prototype,"outFields",void 0),Object(f.a)([Object(h.b)({readOnly:!0})],ue.prototype,"attributeStorageInfo",void 0),Object(f.a)([Object(h.b)(P.b)],ue.prototype,"elevationInfo",null),Object(f.a)([Object(h.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],ue.prototype,"path",void 0),Object(f.a)([Object(h.b)(P.d)],ue.prototype,"legendEnabled",void 0),Object(f.a)([Object(h.b)({types:oe,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:{target:{"layerDefinition.drawingInfo.renderer":{types:oe},"layerDefinition.drawingInfo.transparency":{type:Number}}}}})],ue.prototype,"renderer",void 0),Object(f.a)([Object(w.a)("renderer")],ue.prototype,"writeRenderer",null),Object(f.a)([Object(h.b)({json:{read:!1},readOnly:!0})],ue.prototype,"type",void 0);var de=ue=Object(f.a)([Object(m.a)("esri.layers.PointCloudLayer")],ue);t.default=de},790:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(12),i=r(2),a=r(3);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function l(e){return e.toLowerCase().trim()}var s=function(){function e(t){if(Object(i.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,a=[],s=Object(n.a)(t);try{for(s.s();!(r=s.n()).done;){var u=r.value,d=u&&u.name;if(d){var c=l(d);this._fieldsMap.set(d,u),this._fieldsMap.set(c,u),a.push(c),o(u)&&(this.dateFields.push(u),this._dateFieldsSet.add(u))}}}catch(p){s.e(p)}finally{s.f()}a.sort(),this.uid=a.join(",")}}return Object(a.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(l(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}()},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(157),i=(r(130),r(213)),a=(r(308),r(309)),o=r(214),l=r(215),s=(r(216),r(178),r(276)),u=["oid","global-id"],d=["oid","global-id","guid"];function c(e,t){var r=e.displayField,a=e.editFieldsInfo,o=e.fields,u=e.objectIdField,d=e.title;if(!o)return null;var c=j({editFieldsInfo:a,fields:o,objectIdField:u},t);if(!c.length)return null;var p=function(e){var t=Object(n.l)(e),r=e.titleBase;return t?"".concat(r,": {").concat(t.trim(),"}"):r}({titleBase:d,fields:o,displayField:r}),f=[new l.a,new i.a];return new s.a({title:p,content:f,fieldInfos:c})}var p=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],f=function(e,t){var r=t.editFieldsInfo,n=t.objectIdField,i=t.visibleFieldNames;return i?i.has(e.name):!y(e.name,r)&&(!n||e.name!==n)&&!(u.indexOf(e.type)>-1)&&!p.some((function(t){return t.test(e.name)}))};function b(e,t){return"oid"===e.type?-1:"oid"===t.type?1:h(e)?-1:h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function y(e,t){if(!e||!t)return!1;var r=t.creationDateField,n=t.creatorField,i=t.editDateField,a=t.editorField;return-1!==[r&&r.toLowerCase(),n&&n.toLowerCase(),i&&i.toLowerCase(),a&&a.toLowerCase()].indexOf(e.toLowerCase())}function v(e,t){return e.editable&&-1===d.indexOf(e.type)&&!y(e.name,t)}function j(e,t){var r=e.editFieldsInfo,n=e.fields,i=e.objectIdField;return function(e,t){var r=e;return t&&(e=e.filter((function(e){return-1===t.indexOf(e.type)}))),e===r&&(e=e.slice()),e.sort(b),e}(n,(null==t?void 0:t.ignoreFieldTypes)||g).map((function(e){return new o.a({fieldName:e.name,isEditable:v(e,r),label:e.alias,format:O(e),visible:f(e,{editFieldsInfo:r,objectIdField:i,visibleFieldNames:null==t?void 0:t.visibleFieldNames})})}))}function O(e){switch(e.type){case"small-integer":case"integer":case"single":return new a.a({digitSeparator:!0,places:0});case"double":return new a.a({digitSeparator:!0,places:2});case"date":return new a.a({dateFormat:"long-month-day-year"});default:return null}}function h(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}var g=["geometry","blob","raster","guid","xml"]},858:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(12),i=r(14),a=r(157),o=r(245),l=i.a.getLogger("esri.layers.support.fieldProperties");function s(){return{fields:{type:[o.a],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=Object(n.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;Object(a.p)(this.fields,i)||l.error("field-attributes-layer:invalid-field","Invalid field ".concat(i," found in outFields"),{layer:this,outFields:e})}}catch(o){r.e(o)}finally{r.f()}return Object(a.i)(this.fields,e)}}}}}}]);
//# sourceMappingURL=92.0385a151.chunk.js.map