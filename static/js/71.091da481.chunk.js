(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[71],{1021:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return w})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return g}));var i=r(10),a=r.n(i),n=r(12),s=r(21),o=r(24),l=r(91),c=r(11),u=r(44),f=r(230),y=r(276),p=r(104),b=r(81),v=r(869),d=r(362),h=r(131),O={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function j(e){var t=e.folders||[],r=t.slice(),i=new Map,a=new Map,n=new Map,s=new Map,l=new Map,c={esriGeometryPoint:a,esriGeometryPolyline:n,esriGeometryPolygon:s};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=Object(o.a)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;i.set(r,t);var l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?S(a,l,e.featureSet.features):"esriGeometryPolyline"===r?S(n,l,e.featureSet.features):"esriGeometryPolygon"===r&&S(s,l,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){l.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(i){var a=function(e,t,r){var i=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return i&&(i.parentFolderId=t,i.networkLink=i),i}(i,t.id,e.networkLinks);a&&r.push(a)}))})),r.forEach((function(e){e.featureInfos&&(e.points=Object(o.a)(i.get("esriGeometryPoint")),e.polylines=Object(o.a)(i.get("esriGeometryPolyline")),e.polygons=Object(o.a)(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map((function(t){switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var r=c[t.type].get(t.id);r&&e[O[t.type]].featureSet.features.push(r);break;case"GroundOverlay":var i=l.get(t.id);i&&e.mapImages.push(i)}})),e.fullExtent=k([e]))}));var u=k(r);return{folders:t,sublayers:r,extent:u}}function m(e,t,r,i){var a=p.b&&p.b.findCredential(e);e=Object(c.e)(e,{token:a&&a.token});var n=l.a.kmlServiceUrl;return Object(b.default)(n,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:i})}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[],n={},s=t.sublayers,o=t.folders.map((function(e){return e.id}));return s.forEach((function(t){var s=new e;if(r?s.read(t,r):s.read(t),i.length&&o.indexOf(s.id)>-1&&(s.visible=-1!==i.indexOf(s.id)),n[t.id]=s,null!=t.parentFolderId&&-1!==t.parentFolderId){var l=n[t.parentFolderId];l.sublayers||(l.sublayers=[]),l.sublayers.unshift(s)}else a.unshift(s)})),a}function S(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function w(e){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(a.a.mark((function e(t){var r,i,s,o,l,c,u,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.default.fromJSON(t.featureSet).features,i=t.layerDefinition,s=Object(v.a)(i.drawingInfo.renderer),o=y.a.fromJSON(t.popupInfo),l=[],c=Object(n.a)(r),e.prev=2,c.s();case 4:if((u=c.n()).done){e.next=12;break}return f=u.value,e.next=8,s.getSymbolAsync(f);case 8:p=e.sent,f.symbol=p,f.popupTemplate=o,f.visible=!0,l.push(f);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),c.e(e.t0);case 17:return e.prev=17,c.f(),e.finish(17);case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function k(e){var t,r=Object(h.d)(),i=Object(h.d)(h.a),a=Object(n.a)(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.polygons&&s.polygons.featureSet&&s.polygons.featureSet.features){var o,l=Object(n.a)(s.polygons.featureSet.features);try{for(l.s();!(o=l.n()).done;){var c=o.value;Object(f.b)(r,c.geometry),Object(h.g)(i,r)}}catch(S){l.e(S)}finally{l.f()}}if(s.polylines&&s.polylines.featureSet&&s.polylines.featureSet.features){var y,p=Object(n.a)(s.polylines.featureSet.features);try{for(p.s();!(y=p.n()).done;){var b=y.value;Object(f.b)(r,b.geometry),Object(h.g)(i,r)}}catch(S){p.e(S)}finally{p.f()}}if(s.points&&s.points.featureSet&&s.points.featureSet.features){var v,d=Object(n.a)(s.points.featureSet.features);try{for(d.s();!(v=d.n()).done;){var O=v.value;Object(f.b)(r,O.geometry),Object(h.g)(i,r)}}catch(S){d.e(S)}finally{d.f()}}if(s.mapImages){var j,m=Object(n.a)(s.mapImages);try{for(m.s();!(j=m.n()).done;){var g=j.value;Object(f.b)(r,g.extent),Object(h.g)(i,r)}}catch(S){m.e(S)}finally{m.f()}}}}catch(S){a.e(S)}finally{a.f()}return Object(h.f)(i,h.a)?null:{xmin:i[0],ymin:i[1],zmin:i[2],xmax:i[3],ymax:i[4],zmax:i[5],spatialReference:u.a.WGS84}}},1052:function(e,t,r){"use strict";r.r(t);var i,a=r(12),n=r(10),s=r.n(n),o=r(21),l=r(41),c=r(9),u=r(2),f=r(3),y=r(34),p=r(5),b=r(6),v=r(0),d=(r(13),r(4)),h=(r(14),r(15)),O=r(1),j=r(63),m=r(8),g=r(47),S=r(11),w=(r(19),r(20),r(16)),_=r(44),k=r(62),x=(r(77),r(40)),I=r(200),z=r(243),L=r(795),M=r(787),V=r(809),E=r(380),T=r(802),F=r(801),A=r(379),R=r(1021),G=r(73),P=r(28),N=r(76),D=r(135),C=r(30),J=i=function(e){Object(p.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(u.a)(this,r),(e=t.apply(this,arguments))._sublayersHandles=null,e.description=null,e.id=null,e.networkLink=null,e.title=null,e.sourceJSON=null,e.fullExtent=null,e}return Object(f.a)(r,[{key:"initialize",value:function(){var e=this;Object(C.j)(this,"networkLink").then((function(){return Object(C.l)(e,"visible")})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t=this;if(this.networkLink){var r=Object(d.i)(e)?e.signal:null,a=this._fetchService(this._get("networkLink").href,r).then((function(e){var r=Object(R.a)(e.sublayers);t.fullExtent=k.a.fromJSON(r),t.sourceJSON=e;var a=Object(h.m)(x.a.ofType(i),Object(R.e)(i,e));t.sublayers?t.sublayers.addMany(a):t.sublayers=a,t.layer.emit("sublayer-update"),t.layer&&t.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(a),Object(w.u)(this)}}},{key:"sublayers",set:function(e){var t=this,r=this._get("sublayers");r&&(r.forEach((function(e){e.parent=null,e.layer=null})),this._sublayersHandles.forEach((function(e){return e.remove()})),this._sublayersHandles=null),e&&(e.forEach((function(e){e.parent=t,e.layer=t.layer})),this._sublayersHandles=[e.on("after-add",(function(e){var r=e.item;r.parent=t,r.layer=t.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))]),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return Object(h.m)(x.a.ofType(i),e)}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"_fetchService",value:function(e,t){return Object(R.b)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return Object(R.d)(e.data)}))}}]),r}(N.a.EventedMixin(Object(P.b)(D.a)));Object(v.a)([Object(O.b)()],J.prototype,"description",void 0),Object(v.a)([Object(O.b)()],J.prototype,"id",void 0),Object(v.a)([Object(O.b)({readOnly:!0,value:null})],J.prototype,"networkLink",void 0),Object(v.a)([Object(O.b)({json:{write:{allowNull:!0}}})],J.prototype,"parent",void 0),Object(v.a)([Object(O.b)({value:null,json:{write:{allowNull:!0}}})],J.prototype,"sublayers",null),Object(v.a)([Object(G.a)("sublayers")],J.prototype,"castSublayers",null),Object(v.a)([Object(O.b)({value:null,json:{read:{source:"name"}}})],J.prototype,"title",void 0),Object(v.a)([Object(O.b)({value:!0})],J.prototype,"visible",null),Object(v.a)([Object(j.a)("visible",["visibility"])],J.prototype,"readVisible",null),Object(v.a)([Object(O.b)()],J.prototype,"sourceJSON",void 0),Object(v.a)([Object(O.b)({value:null})],J.prototype,"layer",null),Object(v.a)([Object(O.b)({type:k.a})],J.prototype,"fullExtent",void 0);var W=J=i=Object(v.a)([Object(m.a)("esri.layers.support.KMLSublayer")],J),q=["kml","xml"],U=function(e){Object(p.a)(r,e);var t=Object(b.a)(r);function r(){var e;Object(u.a)(this,r);for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a)))._visibleFolders=[],e.allSublayers=new I.a({root:Object(y.a)(e),rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=_.a.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return Object(f.a)(r,[{key:"initialize",value:function(){var e=this;this.watch("sublayers",(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),!0),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(c.a)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return Object(R.e)(W,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],i=e.toArray();i.length;){var a=i[0];a.networkLink||(a.visible&&r.push(a.id),a.sublayers&&i.push.apply(i,Object(l.a)(a.sublayers.toArray()))),i.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(S.k)(this.url,q)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=Object(d.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).then((function(){return t._fetchService(r)}))),Object(w.u)(this)}},{key:"_fetchService",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var r,i,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.u)().then((function(){return a.resourceInfo?{ssl:!1,data:a.resourceInfo}:Object(R.b)(a.url,a.outSpatialReference,a.refreshInterval,t)}));case 2:r=e.sent,(i=Object(R.d)(r.data))&&this.read(i,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recomputeFullExtent",value:function(){var e=null;this.extent&&(e=this.extent.clone());return function t(r){if(r.sublayers){var i,n=Object(a.a)(r.sublayers.items);try{for(n.s();!(i=n.n()).done;){var s=i.value;t(s),s.visible&&s.fullExtent&&(e?e.union(s.fullExtent):e=s.fullExtent.clone())}}catch(o){n.e(o)}finally{n.f()}}}(this),e}}]),r}(Object(E.a)(Object(F.a)(Object(A.a)(Object(V.a)(Object(T.a)(Object(L.a)(z.a)))))));Object(v.a)([Object(O.b)({readOnly:!0})],U.prototype,"allSublayers",void 0),Object(v.a)([Object(O.b)({type:_.a})],U.prototype,"outSpatialReference",void 0),Object(v.a)([Object(O.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),Object(v.a)([Object(O.b)({readOnly:!0,json:{read:!1,write:!1}})],U.prototype,"legendEnabled",void 0),Object(v.a)([Object(O.b)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),Object(v.a)([Object(O.b)({type:["KML"]})],U.prototype,"operationalLayerType",void 0),Object(v.a)([Object(O.b)({type:x.a.ofType(W),json:{write:{ignoreOrigin:!0}}})],U.prototype,"sublayers",void 0),Object(v.a)([Object(j.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],U.prototype,"readSublayersFromItemOrWebMap",null),Object(v.a)([Object(j.a)("service","sublayers",["sublayers"])],U.prototype,"readSublayers",null),Object(v.a)([Object(g.a)("sublayers")],U.prototype,"writeSublayers",null),Object(v.a)([Object(O.b)({readOnly:!0,json:{read:!1}})],U.prototype,"type",void 0),Object(v.a)([Object(O.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}},dependsOn:["url","parsedUrl"]})],U.prototype,"title",null),Object(v.a)([Object(O.b)(M.j)],U.prototype,"url",void 0),Object(v.a)([Object(O.b)({readOnly:!0,dependsOn:["sublayers"]})],U.prototype,"visibleSublayers",null),Object(v.a)([Object(O.b)({type:k.a})],U.prototype,"extent",void 0),Object(v.a)([Object(O.b)({dependsOn:["extent"]})],U.prototype,"fullExtent",null);var B=U=Object(v.a)([Object(m.a)("esri.layers.KMLLayer")],U);t.default=B},787:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return b})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return O})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return p}));var i=r(9),a=r(98),n=r(119),s=r(378),o=r(247),l=r(304),c=r(388),u={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;Object(a.a)(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||Object(s.a)(this,"screenSizePerspectiveEnabled",{},i))&&(t[r]=e)}}}}}},f={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:function(e,t){return!t.disablePopup}},write:{enabled:!0,writer:function(e,t,r){t[r]=!e}}}},y={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:n.f}}},b={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},v={value:null,type:c.a,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function d(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var h={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},O=Object(i.a)(Object(i.a)({},h),{},{json:Object(i.a)(Object(i.a)({},h.json),{},{origins:{"web-document":Object(i.a)(Object(i.a)({},h.json.origins["web-document"]),{},{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?Object(o.b)(t.layerDefinition.drawingInfo.transparency):void 0:Object(o.b)(t.drawingInfo.transparency)}}})}),j={type:l.a,dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get:function(){var e,t;if(null==(e=this.layer)||!e.timeInfo)return null;var r=null==(t=this.view)?void 0:t.timeExtent,i=this.layer.timeExtent,a=this.layer.useViewTime?r&&i?r.intersection(i):r||i:i;if(!a||a.isEmpty)return a;var n=this.layer.timeOffset,s=n?a.offset(-n.value,n.unit):a,o=this._get("timeExtent");return s.equals(o)?o:s}}},794:function(e,t,r){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){var r=t||n(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}))},795:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return k}));var i=r(12),a=r(2),n=r(3),s=r(5),o=r(6),l=r(0),c=r(98),u=r(8),f=r(229),y=r(33),p=r(378),b=r(34),v=r(4),d=r(386),h=r(41),O=r(24),j=function(){function e(){Object(a.a)(this,e),this._propertyOriginMap=new Map,this._originStores=new Array(f.a),this._values=new Map}return Object(n.a)(e,[{key:"clone",value:function(t){var r=this,i=new e,a=this._originStores[0];a&&a.forEach((function(e,t){i.set(t,Object(O.a)(e),0)}));for(var n=function(e){var a=r._originStores[e];a&&a.forEach((function(r,a){t&&t.has(a)||i.set(a,Object(O.a)(r),e)}))},s=2;s<f.a;s++)n(s);return i}},{key:"get",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}},{key:"keys",value:function(e){var t=null==e?this._values:this._originStores[e];return t?Object(h.a)(t.keys()):[]}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||Object(v.c)(this._propertyOriginMap.get(e))<=r){var a=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),a!==t}return!1}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=this._originStores[t];if(r){var i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(var a=t-1;a>=0;a--){var n=this._originStores[a];if(n&&n.has(e)){this._values.set(e,n.get(e)),this._propertyOriginMap.set(e,a);break}}}return i}}},{key:"has",value:function(e,t){var r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}},{key:"revert",value:function(e,t){for(;t>0&&!this.has(e,t);)--t;var r=this._originStores[t],i=r&&r.get(e),a=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),a!==i}},{key:"originOf",value:function(e){return this._propertyOriginMap.get(e)||0}},{key:"forEach",value:function(e){this._values.forEach(e)}}]),e}(),m=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];e=t.call.apply(t,[this].concat(n));var o=Object(v.c)(Object(c.a)(Object(b.a)(e))),l=o.metadatas,u=o.store,f=new j;return o.store=f,u.keys().forEach((function(e){f.set(e,u.get(e),0)})),Object.keys(l).forEach((function(e){o.internalGet(e)&&f.set(e,o.internalGet(e),0)})),e}return Object(n.a)(r,[{key:"read",value:function(e,t){Object(d.a)(this,e,t)}},{key:"getAtOrigin",value:function(e,t){var r=g(this),i=Object(f.d)(t);if("string"==typeof e)return r.get(e,i);var a={};return e.forEach((function(e){a[e]=r.get(e,i)})),a}},{key:"originOf",value:function(e){return Object(f.b)(this.originIdOf(e))}},{key:"originIdOf",value:function(e){return g(this).originOf(e)}},{key:"revert",value:function(e,t){var r=g(this),i=Object(f.d)(t),a=Object(c.a)(this);("string"==typeof e?"*"===e?r.keys(i):[e]:e).forEach((function(e){a.propertyInvalidated(e),r.revert(e,i),a.propertyCommitted(e)}))}}]),r}(e);return t=Object(l.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function g(e){return Object(c.a)(e).store}var S=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(m(y.a));S=Object(l.a)([Object(u.a)("esri.core.ReadOnlyMultiOriginJSONSupport")],S);function w(e){return Object(c.a)(e).store}var _=function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(a.a)(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.call.apply(t,[this].concat(i))}return r}(function(e){var t=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){Object(a.a)(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t.call.apply(t,[this].concat(i))}return Object(n.a)(r,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user";return w(this).delete(e,Object(f.d)(t))}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(p.b)(this,e=e||{},t),e}},{key:"setAtOrigin",value:function(e,t,r){Object(c.a)(this).setAtOrigin(e,t,Object(f.d)(r))}},{key:"removeOrigin",value:function(e){var t,r=w(this),a=Object(f.d)(e),n=r.keys(a),s=Object(i.a)(n);try{for(s.s();!(t=s.n()).done;){var o=t.value;r.originOf(o)===a&&r.set(o,r.get(o,a),6)}}catch(l){s.e(l)}finally{s.f()}}},{key:"updateOrigin",value:function(e,t){for(var r=w(this),i=Object(f.d)(t),a=this.get(e),n=i+1;n<f.a;++n)r.delete(e,n);r.set(e,a,i)}},{key:"toJSON",value:function(e){return this.write({},e)}}]),r}(e);return(t=Object(l.a)([Object(u.a)("esri.core.WriteableMultiOriginJSONSupport")],t)).prototype.toJSON.isDefaultToJSON=!0,t}(m(e)));return t=Object(l.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],t)},k=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return r}(_(y.a));k=Object(l.a)([Object(u.a)("esri.core.MultiOriginJSONSupport")],k)},801:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(2),a=r(3),n=r(5),s=r(6),o=r(0),l=(r(13),r(14),r(15),r(1)),c=r(8),u=(r(11),r(19),r(20),function(e){var t=function(e){Object(n.a)(r,e);var t=Object(s.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).refreshInterval=0,e}return Object(a.a)(r,[{key:"refresh",value:function(){this.emit("refresh")}}]),r}(e);return Object(o.a)([Object(l.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(o.a)([Object(c.a)("esri.layers.mixins.RefreshableLayer")],t)})},802:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var i=r(9),a=r(10),n=r.n(a),s=r(21),o=r(2),l=r(3),c=r(61),u=r(55),f=r(5),y=r(6),p=r(0),b=(r(13),r(14)),v=(r(15),r(1)),d=r(63),h=r(8),O=r(47),j=r(23),m=r(11),g=(r(19),r(20),r(16)),S=r(124),w=r(384),_=b.a.getLogger("esri.layers.mixins.PortalLayer"),k=function(e){var t=function(e){Object(f.a)(a,e);var t=Object(y.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.apply(this,arguments)).resourceReferences={portalItem:null,paths:[]},e}return Object(l.a)(a,[{key:"destroy",value:function(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}},{key:"portalItem",set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}},{key:"readPortalItem",value:function(e,t,r){if(t.itemId)return new w.default({id:t.itemId,portal:r&&r.portal})}},{key:"writePortalItem",value:function(e,t){e&&e.id&&(t.itemId=e.id)}},{key:"loadFromPortal",value:function(){var e=Object(s.a)(n.a.mark((function e(t,i){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.portalItem||!this.portalItem.id){e.next=14;break}return e.prev=1,e.next=4,r.e(95).then(r.bind(null,937));case 4:return a=e.sent,Object(g.w)(i),e.next=8,a.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(1),_.warn("Failed to load layer (".concat(this.title,", ").concat(this.id,") portal item (").concat(this.portalItem.id,")\n  ").concat(e.t0)),e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){t&&(t.layer=this),Object(c.a)(Object(u.a)(a.prototype),"read",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=t&&t.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||S.a.getDefault());return r&&n&&!Object(m.r)(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new j.a("layer:cross-portal","The layer '".concat(this.title," (").concat(this.id,")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer"),{layer:this})),null):Object(c.a)(Object(u.a)(a.prototype),"write",this).call(this,e,Object(i.a)(Object(i.a)({},t),{},{layer:this}))}}]),a}(e);return Object(p.a)([Object(v.b)({type:w.default})],t.prototype,"portalItem",null),Object(p.a)([Object(d.a)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),Object(p.a)([Object(O.a)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),Object(p.a)([Object(v.b)()],t.prototype,"resourceReferences",void 0),t=Object(p.a)([Object(h.a)("esri.layers.mixins.PortalLayer")],t),t}},804:function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return d}));var i=r(26),a=r(12),n=r(4),s=r(98),o=r(33),l=r(40),c=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(e){return e instanceof o.a}function f(e){return e instanceof l.a?Object.keys(e.items):u(e)?Object(s.a)(e).keys():e?Object.keys(e):[]}function y(e,t){return e instanceof l.a?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function b(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var s=f(e),o=f(t);if(0!==s.length||0!==o.length){if(!s.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,v=o.filter((function(e){return-1===s.indexOf(e)})),d=s.filter((function(e){return-1===o.indexOf(e)})),h=s.filter((function(r){return o.indexOf(r)>-1&&y(e,r)!==y(t,r)})).concat(v,d).sort(),O=p(e);if(O&&c.indexOf(O)>-1&&h.length)return{type:"complete",oldValue:e,newValue:t};var j,m=u(e)&&u(t),g=Object(a.a)(h);try{for(g.s();!(j=g.n()).done;){var S=j.value,w=y(e,S),_=y(t,S),k=void 0;(m||"function"!=typeof w&&"function"!=typeof _)&&w!==_&&(null==w&&null==_||(k=r&&r[S]&&"function"==typeof r[S]?r[S](w,_):"object"==typeof w&&"object"==typeof _&&p(w)===p(_)?b(w,_):{type:"complete",oldValue:w,newValue:_},Object(n.i)(k)&&(Object(n.i)(l)?l.diff[S]=k:l={type:"partial",diff:Object(i.a)({},S,k)})))}}catch(x){g.e(x)}finally{g.f()}return l}}function v(e,t){if(Object(n.h)(e))return!1;var r,i=t.split("."),s=e,o=Object(a.a)(i);try{for(o.s();!(r=o.n()).done;){var l=r.value;if("complete"===s.type)return!0;if("partial"!==s.type)return!1;var c=s.diff[l];if(!c)return!1;s=c}}catch(u){o.e(u)}finally{o.f()}return!0}function d(e,t){var r,i=Object(a.a)(t);try{for(i.s();!(r=i.n()).done;){if(v(e,r.value))return!0}}catch(n){i.e(n)}finally{i.f()}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:b(e,t)}},806:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));var i=r(32),a=r(12),n=r(2),s=r(3),o=r(129),l=-3,c=function(){function e(t,r,i){Object(n.a)(this,e),this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}return Object(s.a)(e,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}},{key:"put",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,r,i)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;Object(n.a)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new o.a}return Object(s.a)(e,[{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs=this._removeFuncs.filter((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,r,i){var a=this._db.get(e);if(a&&(this._size-=a.size,this._db.delete(e),a.entry!==t&&this._notifyRemoved(e,a.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var n=1+Math.max(i,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:n,lives:n}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r){var i=this._db.get(e);i&&i.entry===t&&(this._size-=i.size,r>this._maxSize?this._notifyRemoved(e,t):(i.size=r,this._size+=r,this._checkSizeLimit()))}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((function(t,a){var n=t.lifetime;i[n]=(i[n]||0)+t.size,e._users.forAll((function(e){var i=e.namespace;if(a.startsWith(i)){var n=r[i]||0;r[i]=n+t.size}}))}));var a={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var i=r[t]||0;r[t]=i,a[t]=Math.round(100*e.hitRate)+"%"}else a[t]="0%"}));var n=Object.keys(r);n.forEach((function(t){return r[t]=r[t]/e._size*100})),n.sort((function(e,t){return r[t]-r[e]})),n.forEach((function(e){return t[e]=Math.round(r[e])+"% / "+a[e]}));for(var s=i.length-1;s>=0;--s){var o=i[s];o&&(t["Priority "+(s+-3-1)]=Math.round(o/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(r,i){i.startsWith(e)&&(t._size-=r.size,t._db.delete(i),t._notifyRemoved(i,r.entry))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemoved(r,t.entry)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemoved",value:function(e,t){this._removeFuncs.forEach((function(r){e.startsWith(r[0])&&r[1](t)}))}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=Object(a.a)(this._db);try{for(t.s();!(e=t.n()).done;){var r=Object(i.a)(e.value,2),n=r[0],s=r[1];if(this._db.delete(n),s.lives<=1?(this._size-=s.size,this._notifyRemoved(n,s.entry)):(--s.lives,this._db.set(n,s)),this._size<=.9*this.maxSize)return}}catch(o){t.e(o)}finally{t.f()}}}}]),e}()},809:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var i=r(9),a=r(2),n=r(3),s=r(61),o=r(55),l=r(5),c=r(6),u=r(0),f=(r(13),r(14),r(15),r(1)),y=r(8),p=r(47),b=r(23),v=(r(11),r(19),r(20),r(386)),d=r(378),h={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,VectorTileLayer:!0,WMS:!0,KML:!0,RasterDataLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISFeatureLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0,CSV:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,VectorTileLayer:!0,WFS:!0,SubtypeGroupLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}},O=r(787),j=function(e){var t=function(e){Object(l.a)(r,e);var t=Object(c.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).title=null,e}return Object(n.a)(r,[{key:"writeListMode",value:function(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&Object(d.a)(this,r,{},i))&&(t[r]=e)}},{key:"writeOperationalLayerType",value:function(e,t,r,i){!e||i&&"tables"===i.layerContainerType||(t.layerType=e)}},{key:"writeTitle",value:function(e,t){t.title=e||"Layer"}},{key:"read",value:function(e,t){var i=this;t&&(t.layer=this),Object(v.b)(this,e,(function(t){return Object(s.a)(Object(o.a)(r.prototype),"read",i).call(i,e,t)}),t)}},{key:"write",value:function(e,t){if(t&&t.origin){var a="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers"),n=h[a],l=n&&n[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===a&&(l=!1),!l)return t.messages&&t.messages.push(new b.a("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(a,"'"),{layer:this})),null}var c=Object(s.a)(Object(o.a)(r.prototype),"write",this).call(this,e,Object(i.a)(Object(i.a)({},t),{},{layer:this})),u=!!t&&!!t.messages&&!!t.messages.filter((function(e){return e instanceof b.a&&"web-document-write:property-required"===e.name})).length;return!this.url&&u?null:c}},{key:"beforeSave",value:function(){}}]),r}(e);return Object(u.a)([Object(f.b)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),Object(u.a)([Object(f.b)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),Object(u.a)([Object(p.a)("listMode")],t.prototype,"writeListMode",null),Object(u.a)([Object(f.b)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),Object(u.a)([Object(p.a)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),Object(u.a)([Object(f.b)(O.e)],t.prototype,"opacity",void 0),Object(u.a)([Object(f.b)({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,allowNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),Object(u.a)([Object(p.a)("title")],t.prototype,"writeTitle",null),Object(u.a)([Object(f.b)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=Object(u.a)([Object(y.a)("esri.layers.mixins.OperationalLayer")],t)}},820:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return j})),r.d(t,"f",(function(){return S})),r.d(t,"g",(function(){return v}));var i=r(12),a=r(32),n=r(174),s=r(4),o=r(14),l=r(52),c=r(75),u=r(305),f=r(794),y=o.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new c.a,b=Math.PI,v=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.ColorVariable"===i.declaredClass){var a="number"==typeof t,n=a?null:t,o=n&&n.attributes,c=a?t:null,u=i.field,f=i.cache,p=f.ipData,b=f.hasExpression,v=i.cache.compiledFunc;if(!u&&!b){var d=i.stops;return d&&d[0]&&d[0].color}if("number"!=typeof c)if(b){if(!Object(s.i)(r)||!Object(s.i)(r.arcade))return void y.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},O=r.arcade.arcadeUtils,j=O.getViewInfo(h),m=O.createExecContext(n,j);if(!v){var g=O.createSyntaxTree(i.valueExpression);v=O.createFunction(g),i.cache.compiledFunc=v}c=O.executeFunction(v,m)}else o&&(c=o[u]);var S=i.normalizationField,_=o?parseFloat(o[S]):void 0;if(null!=c&&(!S||a||!isNaN(_)&&0!==_)){isNaN(_)||a||(c/=_);var k=w(c,p);if(k){var x=k[0],I=k[1],z=x===I?i.stops[x].color:l.a.blendColors(i.stops[x].color,i.stops[I].color,k[2],Object(s.i)(r)?r.color:void 0);return new l.a(z)}}}else y.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function h(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(i)if("esri.renderers.visualVariables.OpacityVariable"===i.declaredClass){var a="number"==typeof t,n=a?null:t,o=n&&n.attributes,l=a?t:null,c=i.field,u=i.cache,f=u.ipData,p=u.hasExpression,b=i.cache.compiledFunc;if(!c&&!p){var v=i.stops;return v&&v[0]&&v[0].opacity}if("number"!=typeof l)if(p){if(Object(s.h)(r)||Object(s.h)(r.arcade))return void y.error("Use of arcade expressions requires an arcade context");var d={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,O=h.getViewInfo(d),j=h.createExecContext(n,O);if(!b){var m=h.createSyntaxTree(i.valueExpression);b=h.createFunction(m),i.cache.compiledFunc=b}l=h.executeFunction(b,j)}else o&&(l=o[c]);var g=i.normalizationField,S=o?parseFloat(o[g]):void 0;if(null!=l&&(!g||a||!isNaN(S)&&0!==S)){isNaN(S)||a||(l/=S);var _=w(l,f);if(_){var k=_[0],x=_[1];if(k===x)return i.stops[k].opacity;var I=i.stops[k].opacity;return I+(i.stops[x].opacity-I)*_[2]}}}else y.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function O(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.RotationVariable"===i.declaredClass){var a=i.axis||"heading",n="heading"===a&&"arithmetic"===i.rotationType?90:0,o="heading"===a&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,c=l&&l.attributes,u=i.field,f=i.cache.hasExpression,p=i.cache.compiledFunc,b=0;if(!u&&!f)return b;if(f){if(Object(s.h)(r)||Object(s.h)(r.arcade))return void y.error("Use of arcade expressions requires an arcade context");var v={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},d=r.arcade.arcadeUtils,h=d.getViewInfo(v),O=d.createExecContext(l,h);if(!p){var j=d.createSyntaxTree(i.valueExpression);p=d.createFunction(j),i.cache.compiledFunc=p}b=d.executeFunction(p,O)}else c&&(b=c[u]||0);return b="number"!=typeof b||isNaN(b)?null:n+o*b}y.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function j(e,t,r){var i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(i){if("esri.renderers.visualVariables.SizeVariable"===i.declaredClass){var n=function(e,t,r,i,n){switch(t.transformationType){case"additive":return function(e,t,r,i){return e+(m(t.minSize,r,i)||t.minDataValue)}(e,t,r,i);case"constant":return function(e,t,r){var i=e.stops,a=i&&i.length&&i[0].size;return null==a&&(a=e.minSize),m(a,t,r)}(t,r,i);case"clamped-linear":return function(e,t,r,i){var a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=m(t.minSize,r,i),o=m(t.maxSize,r,i),l=Object(s.i)(i)?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if("area"===t.scaleBy&&l){var c="circle"===l,u=c?b*Math.pow(n/2,2):n*n,f=u+a*((c?b*Math.pow(o/2,2):o*o)-u);return c?2*Math.sqrt(f/b):Math.sqrt(f)}return n+a*(o-n)}(e,t,r,i);case"proportional":return function(e,t,r,i){var a=Object(s.i)(i)?i.shape:void 0,n=e/t.minDataValue,o=m(t.minSize,r,i),l=m(t.maxSize,r,i);return g("circle"===a?2*Math.sqrt(n*Math.pow(o/2,2)):"square"===a||"diamond"===a||"image"===a?Math.sqrt(n*Math.pow(o,2)):n*o,o,l)}(e,t,r,i);case"stops":return function(e,t,r,i,n){var s=w(e,n),o=Object(a.a)(s,3),l=o[0],c=o[1],u=o[2];if(l===c)return m(t.stops[l].size,r,i);var f=m(t.stops[l].size,r,i);return f+(m(t.stops[c].size,r,i)-f)*u}(e,t,r,i,n);case"real-world-size":return function(e,t,r,i){var a=(Object(s.i)(i)&&i.resolution?i.resolution:1)*u.a[t.valueUnit],n=m(t.minSize,r,i),o=m(t.maxSize,r,i),l=t.valueRepresentation;return g("area"===l?2*Math.sqrt(e/b)/a:"radius"===l||"distance"===l?2*e/a:e/a,n,o)}(e,t,r,i);case"identity":return e;case"unknown":return null}}(function(e,t,r){var i="number"==typeof t,a=i?null:t,n=a&&a.attributes,o=i?t:null,l=e.cache.isScaleDriven,c=e.cache.compiledFunc;if(l){var u=Object(s.i)(r)?r.scale:void 0,p=Object(s.i)(r)?r.view:void 0;o=null==u||"3d"===p?function(e){var t=null,r=null,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):u}else if(!i)switch(e.inputValueType){case"expression":if(Object(s.h)(r)||Object(s.h)(r.arcade))return void y.error("Use of arcade expressions requires an arcade context");var b={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,d=v.getViewInfo(b),h=v.createExecContext(a,d);if(!c){var O=v.createSyntaxTree(e.valueExpression);c=v.createFunction(O),e.cache.compiledFunc=c}o=v.executeFunction(c,h);break;case"field":n&&(o=n[e.field]);break;case"unknown":o=null}if(!Object(f.d)(o))return null;if(i||!e.normalizationField)return o;var j=n?parseFloat(n[e.normalizationField]):null;return Object(f.d)(j)&&0!==j?o/j:null}(i,t,r),i,t,r,i.cache.ipData);return null==n||isNaN(n)?0:n}y.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function m(e,t,r){return null==e?null:Object(f.c)(e)?j(e,t,r):Object(f.d)(e)?e:null}function g(e,t,r){return Object(f.d)(r)&&e>r?r:Object(f.d)(t)&&e<t?t:e}function S(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var i={scale:t,view:r},a=m(e.minSize,p,i),n=m(e.maxSize,p,i);if(null!=a||null!=n){if(a>n){var s=n;n=a,a=s}return{minSize:a,maxSize:n}}}function w(e,t){if(t){var r=0,i=t.length-1;return t.some((function(t,a){return e<t?(i=a,!0):(r=a,!1)})),[r,i,(e-t[r])/(t[i]-t[r])]}}function _(e,t,r){var a,s=["proportional","proportional","proportional"],o=Object(i.a)(e);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=l.useSymbolValue?"symbol-value":j(l,t,r);switch(l.axis){case"width":s[0]=c;break;case"depth":s[1]=c;break;case"height":s[2]=c;break;case"width-and-depth":s[0]=c,s[1]=c;break;case"all":case void 0:case null:s[0]=c,s[1]=c,s[2]=c;break;default:Object(n.a)(l.axis)}}}catch(u){o.e(u)}finally{o.f()}return s}}}]);
//# sourceMappingURL=71.091da481.chunk.js.map