(this.webpackJsonpgeometries=this.webpackJsonpgeometries||[]).push([[52,23],{1010:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return L}));var a=r(10),n=r.n(a),i=r(9),o=r(21),s=r(23),l=r(900),u=r(241),c=r(931),f=r(2),p=r(3),d=r(16),h=function(){function e(t){Object(f.a)(this,e),t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}return Object(p.a)(e,[{key:"decode",value:function(t,r,a){var n=this;if(!t||t.byteLength<10)throw new s.a("imagecanvasdecoder: decode","required a valid encoded data as input.");var i=r.width,o=r.height,l=r.format,u=r.applyJpegMask;if(u&&(!i||!o))throw new s.a("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return Object(d.c)((function(s,c){var f=null;"jpg"===l&&u&&(f=e.getMask(t,r));var p,h=new Blob([new Uint8Array(t)],{type:"image/"+l=="jpg"?"jpeg":l}),m=URL.createObjectURL(h),b=new Image;b.src=m,b.onload=function(){if(URL.revokeObjectURL(m),Object(d.o)(a))c(Object(d.e)());else{i=b.width,o=b.height,n.canvas?(n.canvas.width===i&&n.canvas.height===o||(n.canvas.width=i,n.canvas.height=o),n.ctx.clearRect(0,0,i,o)):(n.canvas=document.createElement("canvas"),n.canvas.width=i,n.canvas.height=o,n.ctx=n.canvas.getContext("2d")),n.ctx.drawImage(b,0,0);var e,t=n.ctx.getImageData(0,0,i,o);if(p=t.data,r.renderOnCanvas){if(f)for(e=0;e<f.length;e++)f[e]?p[4*e+3]=255:p[4*e+3]=0;return n.ctx.putImageData(t,0,0),void s(null)}var l=i*o,u=new Uint8Array(l),h=new Uint8Array(l),g=new Uint8Array(l);if(f)for(e=0;e<l;e++)u[e]=p[4*e],h[e]=p[4*e+1],g[e]=p[4*e+2];else for(f=new Uint8Array(l),e=0;e<l;e++)u[e]=p[4*e],h[e]=p[4*e+1],g[e]=p[4*e+2],f[e]=p[4*e+3];s({width:i,height:o,pixels:[u,h,g],mask:f,pixelType:"u8"})}},b.onerror=function(){URL.revokeObjectURL(m),c("cannot load image")}}))}}],[{key:"getMask",value:function(e,t){var r=null;try{var a=new Uint8Array(e),n=Math.ceil(a.length/2),i=0,o=a.length-2;for(i=n;i<o&&(255!==a[i]||217!==a[i+1]);i++);if((i+=2)<a.length-1){var s=new c.a(a.subarray(i)).getBytes();r=new Uint8Array(t.width*t.height);for(var l=0,u=0;u<s.length;u++)for(var f=7;f>=0;f--)r[l++]=s[u]>>f&1}}catch(e){}return r}}]),e}(),m=r(991),b=function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,null,[{key:"decode",value:function(e){var t=new Uint8Array(e),r=new m.a;r.parse(t);var a,n=r.width,i=r.height,o=r.numComponents,s=r.eof,l=r.getData(n,i,!0),u=n*i,f=0,p=0,d=0;if(s<t.length-1){var h=new c.a(t.subarray(s)).getBytes();a=new Uint8Array(u);var b=0;for(f=0;f<h.length;f++)for(d=7;d>=0;d--)a[b++]=h[f]>>d&1}var g,y=null;if(1===o)y=[l,l,l];else{for(y=[],f=0;f<3;f++)g=new Uint8Array(u),y.push(g);for(d=0,p=0;p<u;p++)for(f=0;f<3;f++)y[f][p]=l[d++]}return{width:n,height:i,pixels:y,mask:a}}}]),e}(),g=r(990),y=function(e,t){var r=t.width*t.height,a=t.pixelType;return Math.floor(e.byteLength/(r*v(a)))},v=function(e){var t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},w=function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,null,[{key:"decode",value:function(e,t){var r,a,n,i,o,s=t.pixelType,l=[],u=t.width*t.height,c=y(e,t),f=t.bandIds,p=t.format,d=f&&f.length||y(e,t),h=e.byteLength-e.byteLength%(u*v(s)),m=new s(e,0,u*c);if("bip"===p)for(r=0;r<d;r++){for(i=new s(u),o=f?f[r]:r,a=0;a<u;a++)i[a]=m[a*c+o];l.push(i)}else if("bsq"===p)for(r=0;r<d;r++)o=f?f[r]:r,l.push(m.subarray(o*u,(o+1)*u));return h<e.byteLength-1&&(n=function(e,t){if(8*e.byteLength<t)return null;var r=new Uint8Array(e,0,Math.ceil(t/8)),a=new Uint8Array(t),n=0,i=0,o=0,s=0;for(o=0;o<r.length-1;o++)for(i=r[o],s=7;s>=0;s--)a[n++]=i>>s&1;for(s=7;n<t-1;)i=r[r.length-1],a[n++]=i>>s&1,s--;return a}(e.slice(h),u)),{pixels:l,mask:n}}}]),e}(),O=r(968),j=r(1059),I=Object(u.b)((function(e){var t,r,a,n;t={unstuff:function(e,t,r,a,n,i,o,s){var l,u,c,f,p,d=(1<<r)-1,h=0,m=0,b=4*e.length-Math.ceil(r*a/8);if(e[e.length-1]<<=8*b,n)for(l=0;l<a;l++)0===m&&(c=e[h++],m=32),m>=r?(u=c>>>m-r&d,m-=r):(u=(c&d)<<(f=r-m)&d,u+=(c=e[h++])>>>(m=32-f)),t[l]=n[u];else for(p=Math.ceil((s-i)/o),l=0;l<a;l++)0===m&&(c=e[h++],m=32),m>=r?(u=c>>>m-r&d,m-=r):(u=(c&d)<<(f=r-m)&d,u+=(c=e[h++])>>>(m=32-f)),t[l]=u<p?i+u*o:s},unstuffLUT:function(e,t,r,a,n,i){var o,s=(1<<t)-1,l=0,u=0,c=0,f=0,p=0,d=[],h=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*h;var m=Math.ceil((i-a)/n);for(u=0;u<r;u++)0===f&&(o=e[l++],f=32),f>=t?(p=o>>>f-t&s,f-=t):(p=(o&s)<<(c=t-f)&s,p+=(o=e[l++])>>>(f=32-c)),d[u]=p<m?a+p*n:i;return d.unshift(a),d},unstuff2:function(e,t,r,a,n,i,o,s){var l,u,c,f,p=(1<<r)-1,d=0,h=0,m=0;if(n)for(l=0;l<a;l++)0===h&&(c=e[d++],h=32,m=0),h>=r?(u=c>>>m&p,h-=r,m+=r):(u=c>>>m&p,h=32-(f=r-h),u|=((c=e[d++])&(1<<f)-1)<<r-f,m=f),t[l]=n[u];else{var b=Math.ceil((s-i)/o);for(l=0;l<a;l++)0===h&&(c=e[d++],h=32,m=0),h>=r?(u=c>>>m&p,h-=r,m+=r):(u=c>>>m&p,h=32-(f=r-h),u|=((c=e[d++])&(1<<f)-1)<<r-f,m=f),t[l]=u<b?i+u*o:s}return t},unstuffLUT2:function(e,t,r,a,n,i){var o,s=(1<<t)-1,l=0,u=0,c=0,f=0,p=0,d=0,h=[],m=Math.ceil((i-a)/n);for(u=0;u<r;u++)0===f&&(o=e[l++],f=32,d=0),f>=t?(p=o>>>d&s,f-=t,d+=t):(p=o>>>d&s,f=32-(c=t-f),p|=((o=e[l++])&(1<<c)-1)<<t-c,d=c),h[u]=p<m?a+p*n:i;return h.unshift(a),h},originalUnstuff:function(e,t,r,a){var n,i,o,s,l=(1<<r)-1,u=0,c=0,f=4*e.length-Math.ceil(r*a/8);for(e[e.length-1]<<=8*f,n=0;n<a;n++)0===c&&(o=e[u++],c=32),c>=r?(i=o>>>c-r&l,c-=r):(i=(o&l)<<(s=r-c)&l,i+=(o=e[u++])>>>(c=32-s)),t[n]=i;return t},originalUnstuff2:function(e,t,r,a){var n,i,o,s,l=(1<<r)-1,u=0,c=0,f=0;for(n=0;n<a;n++)0===c&&(o=e[u++],c=32,f=0),c>=r?(i=o>>>f&l,c-=r,f+=r):(i=o>>>f&l,c=32-(s=r-c),i|=((o=e[u++])&(1<<s)-1)<<r-s,f=s),t[n]=i;return t}},r={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,a=e.length,n=Math.floor(a/2),i=0;n;){var o=n>=359?359:n;n-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&a&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,a=new Uint8Array(e,r,6),n={};if(n.fileIdentifierString=String.fromCharCode.apply(null,a),0!==n.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+n.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(n.fileVersion=s,r+=4,s>=3&&(n.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),n.height=o.getUint32(0,!0),n.width=o.getUint32(4,!0),r+=8,s>=4?(n.numDims=o.getUint32(8,!0),r+=4):n.numDims=1,o=new DataView(e,r,40),n.numValidPixel=o.getUint32(0,!0),n.microBlockSize=o.getInt32(4,!0),n.blobSize=o.getInt32(8,!0),n.imageType=o.getInt32(12,!0),n.maxZError=o.getFloat64(16,!0),n.zMin=o.getFloat64(24,!0),n.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=n,t.ptr=r,s>=3&&(i=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,n.blobSize-14))!==n.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,a=this.getDataTypeArray(r.imageType),n=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,a,n),o=this.readSubArray(e,t.ptr+n,a,n);t.ptr+=2*n;var s,l=!0;for(s=0;s<r.numDims;s++)if(i[s]!==o[s]){l=!1;break}return r.minValues=i,r.maxValues=o,l},readSubArray:function(e,t,r,a){var n;if(r===Uint8Array)n=new Uint8Array(e,t,a);else{var i=new ArrayBuffer(a);new Uint8Array(i).set(new Uint8Array(e,t,a)),n=new r(i)}return n},readMask:function(e,t){var r,a,n=t.ptr,i=t.headerInfo,o=i.width*i.height,s=i.numValidPixel,l=new DataView(e,n,4),u={};if(u.numBytes=l.getUint32(0,!0),n+=4,(0===s||o===s)&&0!==u.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(o/8)),u.bitset=r,a=new Uint8Array(o),t.pixels.resultMask=a,n+=u.numBytes;else if(u.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(l=new DataView(e,n,u.numBytes)).getInt16(0,!0),f=2,p=0,d=0;do{if(c>0)for(;c--;)r[p++]=l.getUint8(f++);else for(d=l.getUint8(f++),c=-c;c--;)r[p++]=d;c=l.getInt16(f,!0),f+=2}while(f<u.numBytes);if(-32768!==c||p<r.length)throw"Unexpected end of mask RLE encoding";a=new Uint8Array(o);var h=0,m=0;for(m=0;m<o;m++)7&m?(h=r[m>>3],h<<=7&m):h=r[m>>3],128&h&&(a[m]=1);t.pixels.resultMask=a,u.bitset=r,n+=u.numBytes}return t.ptr=n,t.mask=u,!0},readDataOneSweep:function(e,t,a){var n,i=t.ptr,o=t.headerInfo,s=o.numDims,l=o.width*o.height,u=o.imageType,c=o.numValidPixel*r.getDataTypeSize(u)*s,f=t.pixels.resultMask;if(a===Uint8Array)n=new Uint8Array(e,i,c);else{var p=new ArrayBuffer(c);new Uint8Array(p).set(new Uint8Array(e,i,c)),n=new a(p)}if(n.length===l*s)t.pixels.resultPixels=n;else{t.pixels.resultPixels=new a(l*s);var d=0,h=0,m=0,b=0;if(s>1)for(m=0;m<s;m++)for(b=m*l,h=0;h<l;h++)f[h]&&(t.pixels.resultPixels[b+h]=n[d++]);else for(h=0;h<l;h++)f[h]&&(t.pixels.resultPixels[h]=n[d++])}return i+=c,t.ptr=i,!0},readHuffmanTree:function(e,t){var n=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(e,t.ptr,16);if(t.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var o=i.getInt32(4,!0),s=i.getInt32(8,!0),l=i.getInt32(12,!0);if(s>=l)return!1;var u=new Uint32Array(l-s);r.decodeBits(e,t,u);var c,f,p,d,h=[];for(c=s;c<l;c++)h[f=c-(c<o?0:o)]={first:u[c-s],second:null};var m=e.byteLength-t.ptr,b=Math.ceil(m/4),g=new ArrayBuffer(4*b);new Uint8Array(g).set(new Uint8Array(e,t.ptr,m));var y,v=new Uint32Array(g),w=0,O=0;for(y=v[0],c=s;c<l;c++)(d=h[f=c-(c<o?0:o)].first)>0&&(h[f].second=y<<w>>>32-d,32-w>=d?32===(w+=d)&&(w=0,y=v[++O]):(w+=d-32,y=v[++O],h[f].second|=y>>>32-w));var j,I=0,M=new a;for(c=0;c<h.length;c++)void 0!==h[c]&&(I=Math.max(I,h[c].first));j=I>=n?n:I;var x,S,k,C,A,T=[];for(c=s;c<l;c++)if((d=h[f=c-(c<o?0:o)].first)>0)if(x=[d,f],d<=j)for(S=h[f].second<<j-d,k=1<<j-d,p=0;p<k;p++)T[S|p]=x;else for(S=h[f].second,A=M,C=d-1;C>=0;C--)S>>>C&1?(A.right||(A.right=new a),A=A.right):(A.left||(A.left=new a),A=A.left),0!==C||A.val||(A.val=x[1]);return{decodeLut:T,numBitsLUTQick:j,numBitsLUT:I,tree:M,stuffedData:v,srcPtr:O,bitPos:w}},readHuffman:function(e,t,r){var a,n,i,o,s,l,u,c,f,p=t.headerInfo,d=p.numDims,h=t.headerInfo.height,m=t.headerInfo.width,b=m*h,g=this.readHuffmanTree(e,t),y=g.decodeLut,v=g.tree,w=g.stuffedData,O=g.srcPtr,j=g.bitPos,I=g.numBitsLUTQick,M=g.numBitsLUT,x=0===t.headerInfo.imageType?128:0,S=t.pixels.resultMask,k=0;j>0&&(O++,j=0);var C,A=w[O],T=1===t.encodeMode,D=new r(b*d),R=D;for(C=0;C<p.numDims;C++){if(d>1&&(R=new r(D.buffer,b*C,b),k=0),t.headerInfo.numValidPixel===m*h)for(c=0,l=0;l<h;l++)for(u=0;u<m;u++,c++){if(n=0,s=o=A<<j>>>32-I,32-j<I&&(s=o|=w[O+1]>>>64-j-I),y[s])n=y[s][1],j+=y[s][0];else for(s=o=A<<j>>>32-M,32-j<M&&(s=o|=w[O+1]>>>64-j-M),a=v,f=0;f<M;f++)if(!(a=o>>>M-f-1&1?a.right:a.left).left&&!a.right){n=a.val,j=j+f+1;break}j>=32&&(j-=32,A=w[++O]),i=n-x,T?(i+=u>0?k:l>0?R[c-m]:k,i&=255,R[c]=i,k=i):R[c]=i}else for(c=0,l=0;l<h;l++)for(u=0;u<m;u++,c++)if(S[c]){if(n=0,s=o=A<<j>>>32-I,32-j<I&&(s=o|=w[O+1]>>>64-j-I),y[s])n=y[s][1],j+=y[s][0];else for(s=o=A<<j>>>32-M,32-j<M&&(s=o|=w[O+1]>>>64-j-M),a=v,f=0;f<M;f++)if(!(a=o>>>M-f-1&1?a.right:a.left).left&&!a.right){n=a.val,j=j+f+1;break}j>=32&&(j-=32,A=w[++O]),i=n-x,T?(u>0&&S[c-1]?i+=k:l>0&&S[c-m]?i+=R[c-m]:i+=k,i&=255,R[c]=i,k=i):R[c]=i}t.ptr=t.ptr+4*(O+1)+(j>0?4:0)}t.pixels.resultPixels=D},decodeBits:function(e,r,a,n,i){var o=r.headerInfo,s=o.fileVersion,l=0,u=e.byteLength-r.ptr>=5?5:e.byteLength-r.ptr,c=new DataView(e,r.ptr,u),f=c.getUint8(0);l++;var p=f>>6,d=0===p?4:3-p,h=(32&f)>0,m=31&f,b=0;if(1===d)b=c.getUint8(l),l++;else if(2===d)b=c.getUint16(l,!0),l+=2;else{if(4!==d)throw"Invalid valid pixel count type";b=c.getUint32(l,!0),l+=4}var g,y,v,w,O,j,I,M,x,S=2*o.maxZError,k=o.numDims>1?o.maxValues[i]:o.zMax;if(h){for(r.counter.lut++,M=c.getUint8(l),l++,w=Math.ceil((M-1)*m/8),O=Math.ceil(w/4),y=new ArrayBuffer(4*O),v=new Uint8Array(y),r.ptr+=l,v.set(new Uint8Array(e,r.ptr,w)),I=new Uint32Array(y),r.ptr+=w,x=0;M-1>>>x;)x++;w=Math.ceil(b*x/8),O=Math.ceil(w/4),y=new ArrayBuffer(4*O),(v=new Uint8Array(y)).set(new Uint8Array(e,r.ptr,w)),g=new Uint32Array(y),r.ptr+=w,j=s>=3?t.unstuffLUT2(I,m,M-1,n,S,k):t.unstuffLUT(I,m,M-1,n,S,k),s>=3?t.unstuff2(g,a,x,b,j):t.unstuff(g,a,x,b,j)}else r.counter.bitstuffer++,x=m,r.ptr+=l,x>0&&(w=Math.ceil(b*x/8),O=Math.ceil(w/4),y=new ArrayBuffer(4*O),(v=new Uint8Array(y)).set(new Uint8Array(e,r.ptr,w)),g=new Uint32Array(y),r.ptr+=w,s>=3?null==n?t.originalUnstuff2(g,a,x,b):t.unstuff2(g,a,x,b,!1,n,S,k):null==n?t.originalUnstuff(g,a,x,b):t.unstuff(g,a,x,b,!1,n,S,k))},readTiles:function(e,t,a){var n=t.headerInfo,i=n.width,o=n.height,s=n.microBlockSize,l=n.imageType,u=r.getDataTypeSize(l),c=Math.ceil(i/s),f=Math.ceil(o/s);t.pixels.numBlocksY=f,t.pixels.numBlocksX=c,t.pixels.ptr=0;var p,d,h,m,b,g,y,v,w,O,j=0,I=0,M=0,x=0,S=0,k=0,C=0,A=0,T=0,D=0,R=0,N=0,L=0,P=0,U=0,B=new a(s*s),E=o%s||s,_=i%s||s,z=n.numDims,V=t.pixels.resultMask,F=t.pixels.resultPixels,G=n.fileVersion>=5?14:15,H=n.zMax;for(M=0;M<f;M++)for(S=M!==f-1?s:E,x=0;x<c;x++)for(D=M*i*s+x*s,R=i-(k=x!==c-1?s:_),v=0;v<z;v++){if(z>1?(O=F,D=M*i*s+x*s,F=new a(t.pixels.resultPixels.buffer,i*o*v*u,i*o),H=n.maxValues[v]):O=null,C=e.byteLength-t.ptr,d={},U=0,A=(p=new DataView(e,t.ptr,Math.min(10,C))).getUint8(0),U++,w=n.fileVersion>=5?4&A:0,T=A>>6&255,(A>>2&G)!=(x*s>>3&G))throw"integrity issue";if(w&&0===v)throw"integrity issue";if((b=3&A)>3)throw t.ptr+=U,"Invalid block encoding ("+b+")";if(2!==b)if(0===b){if(w)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=U,N=(N=S*k*u)<(L=e.byteLength-t.ptr)?N:L,h=new ArrayBuffer(N%u==0?N:N+u-N%u),new Uint8Array(h).set(new Uint8Array(e,t.ptr,N)),m=new a(h),P=0,V)for(j=0;j<S;j++){for(I=0;I<k;I++)V[D]&&(F[D]=m[P++]),D++;D+=R}else for(j=0;j<S;j++){for(I=0;I<k;I++)F[D++]=m[P++];D+=R}t.ptr+=P*u}else if(g=r.getDataTypeUsed(w&&l<6?4:l,T),y=r.getOnePixel(d,U,g,p),U+=r.getDataTypeSize(g),3===b)if(t.ptr+=U,t.counter.constantoffset++,V)for(j=0;j<S;j++){for(I=0;I<k;I++)V[D]&&(F[D]=w?Math.min(H,O[D]+y):y),D++;D+=R}else for(j=0;j<S;j++){for(I=0;I<k;I++)F[D]=w?Math.min(H,O[D]+y):y,D++;D+=R}else if(t.ptr+=U,r.decodeBits(e,t,B,y,v),U=0,w)if(V)for(j=0;j<S;j++){for(I=0;I<k;I++)V[D]&&(F[D]=B[U++]+O[D]),D++;D+=R}else for(j=0;j<S;j++){for(I=0;I<k;I++)F[D]=B[U++]+O[D],D++;D+=R}else if(V)for(j=0;j<S;j++){for(I=0;I<k;I++)V[D]&&(F[D]=B[U++]),D++;D+=R}else for(j=0;j<S;j++){for(I=0;I<k;I++)F[D++]=B[U++];D+=R}else{if(w)if(V)for(j=0;j<S;j++)for(I=0;I<k;I++)V[D]&&(F[D]=O[D]),D++;else for(j=0;j<S;j++)for(I=0;I<k;I++)F[D]=O[D],D++;t.counter.constant++,t.ptr+=U}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:r.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t=e.headerInfo.zMax,r=e.headerInfo.numDims,a=e.headerInfo.height*e.headerInfo.width,n=0,i=0,o=0,s=e.pixels.resultMask,l=e.pixels.resultPixels;if(s)if(r>1)for(n=0;n<r;n++)for(o=n*a,t=e.headerInfo.maxValues[n],i=0;i<a;i++)s[i]&&(l[o+i]=t);else for(i=0;i<a;i++)s[i]&&(l[i]=t);else if(r>1)for(n=0;n<r;n++)for(o=n*a,t=e.headerInfo.maxValues[n],i=0;i<a;i++)l[o+i]=t;else for(i=0;i<a;i++)l[i]=t},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:t="F32";break;case 7:t="F64";break;default:t="F32"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=5e-324&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,a){var n=0;switch(r){case 0:n=a.getInt8(t);break;case 1:n=a.getUint8(t);break;case 2:n=a.getInt16(t,!0);break;case 3:n=a.getUint16(t,!0);break;case 4:n=a.getInt32(t,!0);break;case 5:n=a.getUInt32(t,!0);break;case 6:n=a.getFloat32(t,!0);break;case 7:n=a.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return n}},a=function(e,t,r){this.val=e,this.left=t,this.right=r},void 0!==(n={decode:function(e,t){var a=(t=t||{}).noDataValue,n=0,i={};if(i.ptr=t.inputOffset||0,i.pixels={},r.readHeaderInfo(e,i)){var o=i.headerInfo,s=o.fileVersion,l=r.getDataTypeArray(o.imageType);if(s>5)throw"unsupported lerc version 2."+s;r.readMask(e,i),o.numValidPixel===o.width*o.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var u,c=o.width*o.height;if(i.pixels.resultPixels=new l(c*o.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==o.numValidPixel)if(o.zMax===o.zMin)r.constructConstantSurface(i);else if(s>=4&&r.checkMinMaxRanges(e,i))r.constructConstantSurface(i);else{var f=new DataView(e,i.ptr,2),p=f.getUint8(0);if(i.ptr++,p)r.readDataOneSweep(e,i,l);else if(s>1&&o.imageType<=1&&Math.abs(o.maxZError-.5)<1e-5){var d=f.getUint8(1);if(i.ptr++,i.encodeMode=d,d>2||s<4&&d>1)throw"Invalid Huffman flag "+d;d?r.readHuffman(e,i,l):r.readTiles(e,i,l)}else r.readTiles(e,i,l)}i.eofOffset=i.ptr,t.inputOffset?(u=i.headerInfo.blobSize+t.inputOffset-i.ptr,Math.abs(u)>=1&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(u=i.headerInfo.blobSize-i.ptr,Math.abs(u)>=1&&(i.eofOffset=i.headerInfo.blobSize));var h={width:o.width,height:o.height,pixelData:i.pixels.resultPixels,minValue:o.zMin,maxValue:o.zMax,validPixelCount:o.numValidPixel,dimCount:o.numDims,dimStats:{minValues:o.minValues,maxValues:o.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&r.isValidPixelValue(o.imageType,a)){var m=i.pixels.resultMask;for(n=0;n<c;n++)m[n]||(h.pixelData[n]=a);h.noDataValue=a}return i.noDataValue=a,t.returnFileInfo&&(h.fileInfo=r.formatFileInfo(i)),h}},getBandCount:function(e){for(var t=0,a=0,n={ptr:0,pixels:{}};a<e.byteLength-58;)r.readHeaderInfo(e,n),a+=n.headerInfo.blobSize,t++,n.ptr=a;return t}})&&(e.exports=n)})),M=function(e){var t,r,a;function n(e){var t,r,a,n,i,o,s,l,u,c,f,p,d;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},n=this.readUInt16(),a=this.readUInt16()||100,i.delay=1e3*n/a,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,f=0;0<=t?f<t:f>t;0<=t?++f:--f)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(p=0;0<=u?p<u:p>u;0<=u?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(c=this.read(t)).indexOf(0),s=String.fromCharCode.apply(String,c.slice(0,o)),this.text[s]=String.fromCharCode.apply(String,c.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(d=this.colorType)||6===d,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return n.load=function(e,t,r){var a;return"function"==typeof t&&(r=t),(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){var e;return e=new n(new Uint8Array(a.response||a.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof r?r(e):void 0},a.send(null)},n.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(e){var t,r,a,n,i,o,s,l,u,f,p,d,h,m,b,g,y,v,w,O,j,I,M;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new c.a(e)).getBytes(),g=(d=this.pixelBitlength/8)*this.width,h=new Uint8Array(g*this.height),o=e.length,b=0,m=0,r=0;m<o;){switch(e[m++]){case 0:for(n=w=0;w<g;n=w+=1)h[r++]=e[m++];break;case 1:for(n=O=0;O<g;n=O+=1)t=e[m++],i=n<d?0:h[r-d],h[r++]=(t+i)%256;break;case 2:for(n=j=0;j<g;n=j+=1)t=e[m++],a=(n-n%d)/d,y=b&&h[(b-1)*g+a*d+n%d],h[r++]=(y+t)%256;break;case 3:for(n=I=0;I<g;n=I+=1)t=e[m++],a=(n-n%d)/d,i=n<d?0:h[r-d],y=b&&h[(b-1)*g+a*d+n%d],h[r++]=(t+Math.floor((i+y)/2))%256;break;case 4:for(n=M=0;M<g;n=M+=1)t=e[m++],a=(n-n%d)/d,i=n<d?0:h[r-d],0===b?y=v=0:(y=h[(b-1)*g+a*d+n%d],v=a&&h[(b-1)*g+(a-1)*d+n%d]),s=i+y-v,l=Math.abs(s-i),f=Math.abs(s-y),p=Math.abs(s-v),u=l<=f&&l<=p?i:f<=p?y:v,h[r++]=(t+u)%256;break;default:throw new Error("Invalid filter algorithm: "+e[m-1])}b++}return h},n.prototype.decodePalette=function(){var e,t,r,a,n,i,o,s,l;for(r=this.palette,i=this.transparency.indexed||[],n=new Uint8Array((i.length||0)+r.length),a=0,r.length,e=0,t=o=0,s=r.length;o<s;t=o+=3)n[a++]=r[t],n[a++]=r[t+1],n[a++]=r[t+2],n[a++]=null!=(l=i[e++])?l:255;return n},n.prototype.copyToImageData=function(e,t){var r,a,n,i,o,s,l,u,c,f,p;if(a=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(p=this._decodedPalette)?p:this._decodedPalette=this.decodePalette(),a=4,r=!0),u=(n=e.data||e).length,o=c||t,i=s=0,1===a)for(;i<u;)l=c?4*t[i/4]:s,f=o[l++],n[i++]=f,n[i++]=f,n[i++]=f,n[i++]=r?o[l++]:this.transparency.grayscale&&this.transparency.grayscale===f?0:255,s=l;else for(;i<u;)l=c?4*t[i/4]:s,n[i++]=o[l++],n[i++]=o[l++],n[i++]=o[l++],n[i++]=r?o[l++]:this.transparency.rgb&&this.transparency.rgb[1]===o[l-3]&&this.transparency.rgb[3]===o[l-2]&&this.transparency.rgb[5]===o[l-1]?0:255,s=l},n.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},r=e.document&&e.document.createElement("canvas"),a=r&&r.getContext("2d"),t=function(e){var t;return a.width=e.width,a.height=e.height,a.clearRect(0,0,e.width,e.height),a.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t},n.prototype.decodeFrames=function(e){var r,a,n,i,o,s,l,u;if(this.animation){for(u=[],a=o=0,s=(l=this.animation.frames).length;o<s;a=++o)r=l[a],n=e.createImageData(r.width,r.height),i=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(n,i),r.imageData=n,u.push(r.image=t(n));return u}},n.prototype.renderFrame=function(e,t){var r,a,n;return r=(a=this.animation.frames)[t],n=a[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},n.prototype.animate=function(e){var t,r,a,n,i,o,s=this;return r=0,o=this.animation,n=o.numFrames,a=o.frames,i=o.numPlays,(t=function(){var o,l;if(o=r++%n,l=a[o],s.renderFrame(e,o),n>1&&r/n<i)return s.animation._timeout=setTimeout(t,l.delay)})()},n.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},n.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},n}(self),x=new Set(["jpg","png","bmp","gif"]);function S(e,t){if(!O.a)throw new s.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,a,n=t.width,i=t.height,o=t.pixelType,u=N(o),c=u.pixelTypeCtor,f=null==t.noDataValue?u.noDataValue:t.noDataValue,p=0,d=0,h=e.byteLength-10;d<h;){var m=Object(g.a)(e,{inputOffset:d,encodedMaskData:r,returnMask:0===p,returnEncodedMask:0===p,returnFileInfo:!0,pixelType:c,noDataValue:f});if(n&&i&&(m.width!==n||m.height!==i))throw new s.a("rasterCoded:decode","lerc decoded result has width or height different from specified in options");if(d=m.fileInfo.eofOffset,0===p&&(r=m.encodedMaskData,a=new l.a({width:m.width,height:m.height,pixels:[],pixelType:o,mask:m.maskData,statistics:[]})),p++,a.addData({pixels:m.pixelData,statistics:{minValue:m.minValue,maxValue:m.maxValue,noDataValue:m.noDataValue}}),h-d>10){var b=String.fromCharCode.apply(null,new Uint8Array(e,d,10));d=d+b.indexOf("CntZ")>-1?b.indexOf("CntZ"):0}}return a}function k(e,t){if(!O.a)throw new s.a("rasterCoded:decode","lerc decoder is not supported on big endian platform");for(var r,a,n,i=0,o=0,u=0,c=e.byteLength-10,f=[],p=t.width,d=t.height;o<c;){var h;if(a=I.decode(e,{inputOffset:o,maskData:r,returnFileInfo:!0}),p&&d&&(a.width!==p||a.height!==d))throw new s.a("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");if(o=a.fileInfo.eofOffset,0===i&&(u=a.fileInfo.numValidPixel,r=a.maskData,n=new l.a({width:a.width,height:a.height,pixels:[],pixelType:a.fileInfo.pixelType,mask:a.maskData,statistics:[]})),a.fileInfo.mask&&a.fileInfo.mask.numBytes>0&&f.push(a.maskData),a.dimCount>1&&(null==(h=a.pixelData)?void 0:h.length)===a.width*a.height*a.dimCount){var m,b,g,y;a.pixelData=a.pixelData.slice(-a.width*a.height);var v=null==(m=a.dimStats)||null==(b=m.minValues)?void 0:b[a.dimCount-1],w=null==(g=a.dimStats)||null==(y=g.maxValues)?void 0:y[a.dimCount-1];null!=v&&null!=w&&(a.minValue=v,a.maxValue=w)}if(i++,n.addData({pixels:a.pixelData,statistics:{minValue:a.minValue,maxValue:a.maxValue}}),c-o>10){var j=String.fromCharCode.apply(null,new Uint8Array(e,o,10));o+=j.indexOf("Lerc")>-1?j.indexOf("Lerc"):0}}var M=0,x=0,S=0;if(f.length>1){for(S=n.width*n.height,(r=new Uint8Array(S)).set(f[0]),M=1;M<f.length;M++){var k=f[M];for(x=0;x<S;x++)r[x]=r[x]&k[x]}for(u=0,x=0;x<S;x++)u+=r[x];n.mask=r}return n.validPixelCount=u,n}function C(e){var t=Object(j.a)(e),r=new l.a({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),mask:t.mask,statistics:null});return r.updateStatistics(),r}function A(e){var t=b.decode(e),r=new l.a({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return r.updateStatistics(),r}function T(e,t){var r,a=new Uint8Array(e),n=new M(a),i=t.width,o=t.height,s=i*o,u=n.decode(),c=0,f=0,p=new Uint8Array(s);for(c=0;c<s;c++)p[c]=u[4*c+3];var d=new l.a({width:i,height:o,pixels:[],pixelType:"U8",mask:p,statistics:[]});for(c=0;c<3;c++){for(r=new Uint8Array(s),f=0;f<s;f++)r[f]=u[4*f+c];d.addData({pixels:r})}return d.updateStatistics(),d}function D(e){if(null==e)throw new s.a("rasterCodec:decode","parameter encodeddata is required.");var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?r="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]?r="tiff":71===t[0]&&73===t[1]&&70===t[2]?r="gif":66===t[0]&&77===t[1]?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="error"),r}function R(e){var t=null;switch(e){case"lerc":t=S;break;case"lerc2":t=k;break;case"jpg":t=A;break;case"png":t=T;break;case"bsq":case"bip":t=function(t,r){return function(e,t,r){var a=N(t.pixelType).pixelTypeCtor,n=(0,w.decode)(e,{width:t.width,height:t.height,pixelType:a,format:r}),i=new l.a({width:t.width,height:t.height,pixels:n.pixels,pixelType:t.pixelType,mask:n.mask,statistics:null});return i.updateStatistics(),i}(t,r,e)};break;case"tiff":t=C;break;case"error":t=function(){throw new s.a("rasterCodec:decode","input data contains error")};break;default:t=function(){throw new s.a("rasterCodec:decode","unsupported raster format")}}return t}function N(e){var t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=Math.pow(2,8)-1,t=Uint8Array;break;case"u16":r=r||Math.pow(2,16)-1,t=Uint16Array;break;case"u32":r=r||Math.pow(2,32)-1,t=Uint32Array;break;case"s8":r=r||0-Math.pow(2,7),t=Int8Array;break;case"s16":r=r||0-Math.pow(2,15),t=Int16Array;break;case"s32":r=r||0-Math.pow(2,31),t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function L(e){var t=D(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t}function P(e,t,r){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(n.a.mark((function e(t,r,a){var u,c,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new s.a("rasterCodec:decode","missing encodeddata parameter.");case 2:if(null!=r&&null!=r.width&&null!=r.height){e.next=4;break}throw new s.a("rasterCodec:decode","requires width and height in options parameter.");case 4:if("tiff"!==(f=r.format&&r.format.toLowerCase())||!r.customOptions){e.next=9;break}e.t0=function(e,t){var r=Object(j.b)(e,t.customOptions),a=new l.a({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return a.updateStatistics(),a}(t,r),e.next=18;break;case 9:if((!f||"bsq"!==f&&"bip"!==f)&&(f=D(t)),!r.useCanvas||!x.has(f)){e.next=16;break}return e.next=13,function(){var e=Object(o.a)(n.a.mark((function e(t,r,a,o){var s,u,c,f;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new h,u=Object(i.a)({applyJpegMask:!1,format:r},a),e.next=4,s.decode(t,u,o);case 4:return c=e.sent,f=new l.a(c),e.abrupt("return",(f.updateStatistics(),f));case 7:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}()(t,f,r,a);case 13:c=e.sent,e.next=17;break;case 16:u=R(f),r.isPoint&&((r=Object(i.a)({},r)).width++,r.height++),c=u(t,r),r.isPoint&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e){var r=e.pixels,a=e.width,n=e.height,i=e.mask;if(r&&0!==r.length){var o,s,u,c,f,p,d,h=r.length,m=a-1,b=n-1,g=[],y=l.a.getPixelArrayConstructor(e.pixelType);if(0===t){for(o=0;o<h;o++){for(f=r[o],p=new y(m*b),s=0;s<b;s++)for(c=s*a,u=0;u<m;u++)p[s*m+u]=f[c+u];g.push(p)}if(i)for(d=new Uint8Array(m*b),s=0;s<b;s++)for(c=s*a,u=0;u<m;u++)d[s*m+u]=i[c+u]}else{for(o=0;o<h;o++){for(f=r[o],p=new y(m*b),s=0;s<b;s++)for(c=s*a,u=0;u<m;u++)p[s*m+u]=(f[c+u]+f[c+u+1]+f[c+a+u]+f[c+a+u+1])/4;g.push(p)}if(i)for(d=new Uint8Array(m*b),s=0;s<b;s++)for(c=s*a,u=0;u<m;u++)d[s*m+u]=Math.min.apply(null,[i[c+u],i[c+u+1],i[c+a+u],i[c+a+u+1]])}e.width=m,e.height=b,e.mask=d,e.pixels=g}}}(c);case 17:e.t0=c;case 18:return e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1018:function(e,t,r){"use strict";function a(e,t){for(var r=0,a="",n=0,i=0,o=e.length;r<o;)(n=(i=e[r++])>>4)<8?n=1:15===n?(n=4,i=(7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):14===n?(n=3,i=(15&i)<<12|(63&e[r++])<<6|63&e[r++]):(n=2,i=(31&i)<<6|63&e[r++]),(0!==i||t)&&(a+=String.fromCharCode(i));return a}r.d(t,"a",(function(){return a}))},1019:function(e,t,r){"use strict";var a=function(){var e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e}(),n=function(){var e=[].concat(a);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e}(),i=function(){var e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e}(),o=new Map;o.set("EXIFIFD",n),o.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);var s={TIFF_TAGS:a,ifdTags:o,GEO_KEYS:i,getTagName:function(e,t){var r=(t||a)[e];return void 0===r&&(r="unknown"+String(e)),r}};t.a=s},1024:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var a=new(r(50).a)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),n={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},1025:function(e,t,r){"use strict";var a,n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(24)),c=(r(14),r(15)),f=r(1),p=r(8),d=(r(11),r(19),r(20),r(28)),h=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).variableName=null,a.dimensionName=null,a.values=[],a.isSlice=!1,a}return Object(i.a)(r,[{key:"clone",value:function(){return new a({variableName:this.variableName,dimensionName:this.dimensionName,values:Object(u.a)(this.values),isSlice:this.isSlice})}}]),r}(d.a);Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],h.prototype,"variableName",void 0),Object(l.a)([Object(f.b)({type:String,json:{write:!0}})],h.prototype,"dimensionName",void 0),Object(l.a)([Object(f.b)({type:c.p.array(c.p.oneOf([c.p.native(Number),c.p.array(c.p.native(Number))])),json:{write:!0}})],h.prototype,"values",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],h.prototype,"isSlice",void 0);var m=h=a=Object(l.a)([Object(p.a)("esri.layers.support.DimensionalDefinition")],h);t.a=m},1042:function(e,t,r){"use strict";r.r(t);var a,n,i,o=r(12),s=r(9),l=r(2),u=r(3),c=r(5),f=r(6),p=r(0),d=(r(13),r(4)),h=r(14),m=r(15),b=r(1),g=r(8),y=r(47),v=r(11),w=(r(19),r(20),r(16)),O=r(276),j=r(243),I=r(795),M=r(787),x=r(809),S=r(866),k=r(380),C=r(802),A=r(801),T=r(379),D=r(825),R=r(812),N=r(10),L=r.n(N),P=r(21),U=r(24),B=r(35),E=r(50),_=r(63),z=r(23),V=r(44),F=r(37),G=r(62),H=r(82),Z=(r(77),r(81)),J=r(75),W=r(900),K=r(971),q=r(245),Q=r(790),X=r(362),Y=r(277),$=r(402),ee=r(1025),te=r(42),re=r(28),ae=new Set(["Raster","Raster2","DEM","FillRaster"]),ne=new Set(["Rasters"]),ie=function(e){return e&&e.rasterFunction?se.fromJSON(e):e},oe=function(e){return e&&e instanceof se?e.toJSON():e};(i=n||(n={}))[i.MOSAIC=0]="MOSAIC",i[i.GROUP=1]="GROUP",i[i.ITEM=2]="ITEM";var se=a=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).functionArguments=null,a.functionName=null,a.outputPixelType="unknown",a.variableName=null,a.description=null,a.functionDefinition=null,a.thumbnail=null,a}return Object(u.a)(r,[{key:"readFunctionArguments",value:function(e,t){return function(e){if(null==e)return null;for(var t={},r=0,a=Object.keys(e);r<a.length;r++){var n=a[r];ae.has(n)?t[n]=ie(e[n]):ne.has(n)&&Array.isArray(e[n])?t[n]=e[n].map(ie):t[n]=e[n]}return t}(t.arguments||t.rasterFunctionArguments)}},{key:"writeFunctionArguments",value:function(e,t,r){for(var a={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];ae.has(o)?a[o]=oe(e[o]):ne.has(o)&&Array.isArray(e[o])?a[o]=e[o].map(oe):a[o]=oe(e[o])}this.functionDefinition?t.arguments=a:t[r]=a}},{key:"readFunctionName",value:function(e,t){var r=t.rasterFunctionInfos;return t.name||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunction)}},{key:"writeFunctionName",value:function(e,t,r){this.functionDefinition?t.name=e:t[r]=e}},{key:"readFunctionType",value:function(e){return n[e]}},{key:"writeFunctionType",value:function(e,t,r){t[r]=n[e]}},{key:"clone",value:function(){return new a({functionName:this.functionName,functionArguments:Object(U.a)(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})}}]),r}(re.a);Object(p.a)([Object(b.b)({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],se.prototype,"functionArguments",void 0),Object(p.a)([Object(_.a)("functionArguments",["rasterFunctionArguments","arguments"])],se.prototype,"readFunctionArguments",null),Object(p.a)([Object(y.a)("functionArguments")],se.prototype,"writeFunctionArguments",null),Object(p.a)([Object(b.b)({json:{type:String,write:{target:"rasterFunction"}}})],se.prototype,"functionName",void 0),Object(p.a)([Object(_.a)("functionName",["rasterFunction","rasterFunctionInfos","name"])],se.prototype,"readFunctionName",null),Object(p.a)([Object(y.a)("functionName")],se.prototype,"writeFunctionName",null),Object(p.a)([Object(te.a)({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),Object(b.b)({json:{default:"unknown"}})],se.prototype,"outputPixelType",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:!0,write:!0}})],se.prototype,"variableName",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],se.prototype,"description",void 0),Object(p.a)([Object(b.b)({json:{origins:{"web-document":{read:!1,write:!1}}}})],se.prototype,"functionType",void 0),Object(p.a)([Object(_.a)("functionType")],se.prototype,"readFunctionType",null),Object(p.a)([Object(y.a)("functionType")],se.prototype,"writeFunctionType",null),Object(p.a)([Object(b.b)({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],se.prototype,"functionDefinition",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],se.prototype,"thumbnail",void 0);var le=se=a=Object(p.a)([Object(g.a)("esri.layers.support.RasterFunction")],se),ue=r(885),ce=r(947),fe=r(1024),pe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},de={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},he=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function me(e){return he.has(e.type)}function be(e,t){if(!e||!t)return Object(U.a)(e||t);var r=Object(U.a)(e);return"none"!==t.functionName.toLowerCase()&&(ge(r.functionArguments).Raster=t),r}function ge(e){var t=e.Raster;return t&&"esri.layers.support.RasterFunction"===t.declaredClass?ge(t.functionArguments):e}var ye={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function ve(e,t){var r=pe[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function we(e){if(e){var t=e.fields,r=t&&t.find((function(e){return e&&e.name&&"value"===e.name.toLowerCase()}));return r&&r.name}}var Oe,je=r(73),Ie=Object(E.b)()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),Me=Object(E.b)()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"}),xe=Oe=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).ascending=!0,a.itemRenderingRule=null,a.lockRasterIds=null,a.method=null,a.multidimensionalDefinition=null,a.objectIds=null,a.operation=null,a.sortField=null,a.sortValue=null,a.viewpoint=null,a.where=null,a}return Object(u.a)(r,[{key:"readAscending",value:function(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}},{key:"readMethod",value:function(e,t){return function(e){var t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;case"none":default:t="esriMosaicNone"}return Me.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}},{key:"readOperation",value:function(e,t){var r=t.mosaicOperation,a=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),n=r||(a?Ie.toJSON(a):null);return Ie.fromJSON(n)||"first"}},{key:"castSortValue",value:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)}},{key:"clone",value:function(){return new Oe({ascending:this.ascending,itemRenderingRule:Object(U.a)(this.itemRenderingRule),lockRasterIds:Object(U.a)(this.lockRasterIds),method:this.method,multidimensionalDefinition:Object(U.a)(this.multidimensionalDefinition),objectIds:Object(U.a)(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Object(U.a)(this.viewpoint),where:this.where})}}]),r}(re.a);Object(p.a)([Object(b.b)({type:Boolean,json:{write:!0}})],xe.prototype,"ascending",void 0),Object(p.a)([Object(_.a)("ascending",["ascending","sortAscending"])],xe.prototype,"readAscending",null),Object(p.a)([Object(b.b)({type:le,json:{write:!0}})],xe.prototype,"itemRenderingRule",void 0),Object(p.a)([Object(b.b)({type:[m.a],json:{write:{overridePolicy:function(){return{enabled:"lock-raster"===this.method}}}}})],xe.prototype,"lockRasterIds",void 0),Object(p.a)([Object(b.b)({type:String,json:{type:Me.jsonValues,write:{target:"mosaicMethod",writer:Me.write}}})],xe.prototype,"method",void 0),Object(p.a)([Object(_.a)("method",["mosaicMethod","defaultMosaicMethod"])],xe.prototype,"readMethod",null),Object(p.a)([Object(b.b)({type:[ee.a],json:{write:!0}})],xe.prototype,"multidimensionalDefinition",void 0),Object(p.a)([Object(b.b)({type:[m.a],json:{name:"fids",write:!0}})],xe.prototype,"objectIds",void 0),Object(p.a)([Object(b.b)({json:{type:Ie.jsonValues,read:{reader:Ie.read},write:{target:"mosaicOperation",writer:Ie.write}}})],xe.prototype,"operation",void 0),Object(p.a)([Object(_.a)("operation",["mosaicOperation","mosaicOperator"])],xe.prototype,"readOperation",null),Object(p.a)([Object(b.b)({type:String,json:{write:{overridePolicy:function(){return{enabled:"attribute"===this.method}}}}})],xe.prototype,"sortField",void 0),Object(p.a)([Object(b.b)({type:[String,Number],json:{write:{allowNull:!0,overridePolicy:function(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],xe.prototype,"sortValue",void 0),Object(p.a)([Object(je.a)("sortValue")],xe.prototype,"castSortValue",null),Object(p.a)([Object(b.b)({type:F.a,json:{write:!0}})],xe.prototype,"viewpoint",void 0),Object(p.a)([Object(b.b)({type:String,json:{write:!0}})],xe.prototype,"where",void 0);var Se=xe=Oe=Object(p.a)([Object(g.a)("esri.layers.support.MosaicRule")],xe),ke=new E.a({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),Ce=new E.a({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),Ae=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).layer=null,e.adjustAspectRatio=void 0,e.bandIds=void 0,e.compression=void 0,e.compressionQuality=void 0,e.compressionTolerance=.01,e.format=null,e.interpolation=null,e.noData=null,e.noDataInterpretation=void 0,e.pixelType=void 0,e.lercVersion=2,e}return Object(u.a)(r,[{key:"writeAdjustAspectRatio",value:function(e,t,r){this.layer.version<10.3||(t[r]=e)}},{key:"writeCompressionQuality",value:function(e,t,r){this.format&&this.format.toLowerCase().indexOf("jpg")>-1&&null!=e&&(t[r]=e)}},{key:"writeCompressionTolerance",value:function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}},{key:"writeLercVersion",value:function(e,t,r){"lerc"===this.format&&this.layer.version>=10.5&&(t[r]=e)}},{key:"version",get:function(){var e=this.layer;return e.bandIds,e.format,e.compressionQuality,e.compressionTolerance,e.interpolation,e.noData,e.noDataInterpretation,e.mosaicRule,e.renderingRule,e.adjustAspectRatio,e.pixelFilter,e.renderer,e.definitionExpression,(this._get("version")||0)+1},set:function(e){this._set("version",e)}},{key:"mosaicRule",get:function(){var e=this.layer,t=e.mosaicRule,r=e.definitionExpression;return t?r&&r!==t.where&&((t=t.clone()).where=r):r&&(t=new Se({where:r})),t}},{key:"renderingRule",get:function(){var e=this.layer,t=e.renderingRule,r=e.pixelFilter,a=!e.format||e.format.indexOf("jpg")>-1||e.format.indexOf("png")>-1;return t=this._addResampleRasterFunction(t),a&&!r&&(t=this.combineRendererWithRenderingRule()),t}},{key:"combineRendererWithRenderingRule",value:function(){var e,t=this.layer,r=t.rasterInfo,a=t.renderingRule,n=t.renderer;return n&&me(n)?be(function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){var r=new le;r.functionName="Stretch";var a=ye[fe.b.toJSON(e.stretchType)],n="u8",i={StretchType:a,Statistics:function(e){var t=[];return e.forEach((function(e){var r=e;if(Array.isArray(r))t.push(r);else{if(null==r.min||null==r.max)return;var a=[r.min,r.max,r.avg||0,r.stddev||0];t.push(a)}})),t}(e.statistics),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(i.Min=e.outputMin),null!=e.outputMax&&(i.Max=e.outputMax),a===ye.standardDeviation?(i.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType=n):a===ye.percentClip?(i.MinPercent=e.minPercent,i.MaxPercent=e.maxPercent,r.outputPixelType=n):a===ye.minMax?r.outputPixelType=n:a===ye.sigmoid&&(i.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=i,r.variableName="Raster",e.colorRamp){var o=e.colorRamp,s=new le,l=Object(ce.c)(o);return l?s.functionArguments={colorRamp:l}:!t.convertColorRampToColormap||"algorithmic"!==o.type&&"multipart"!==o.type?s.functionArguments={colorRamp:e.colorRamp.toJSON()}:s.functionArguments={Colormap:Object(ce.b)(o,256)},s.variableName="Raster",s.functionName="Colormap",s.functionArguments.Raster=r,s}return r}(e,t);case"class-breaks":return function(e,t){var r=[],a=[],n=[],i=[],o=1e-6,s=t.pixelType,l=t.rasterAttributeTable,u=l&&l.features,c=we(l);if(u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((function(t,r){var a,n=t.symbol.color;n.a&&u.forEach((function(o){((a=o.attributes[e.field])>=t.minValue&&a<t.maxValue||r===e.classBreakInfos.length-1&&a>=t.minValue)&&i.push([o.attributes[c],n.r,n.g,n.b])}))}));var f=s?ve(i,s):i,p=new le;return p.functionName="Colormap",p.functionArguments={},p.functionArguments.Colormap=f,p.variableName="Raster",p}e.classBreakInfos.forEach((function(e,t){var s=e.symbol&&e.symbol.color;s.a?(0===t?r.push(e.minValue,e.maxValue+o):r.push(e.minValue+o,e.maxValue+o),a.push(t),i.push([t,s.r,s.g,s.b])):n.push(e.minValue,e.maxValue)}));var d=s?ve(i,s):i,h=new le;h.functionName="Remap",h.functionArguments={InputRanges:r,OutputValues:a,NoDataRanges:n},h.variableName="Raster";var m=new le;return m.functionName="Colormap",m.functionArguments={Colormap:d,Raster:h},m}(e,t);case"unique-value":return function(e,t){var r=[],a=t.pixelType,n=t.rasterAttributeTable,i=n&&n.features,o=we(n),s=!1;if(e.uniqueValueInfos&&e.uniqueValueInfos.forEach((function(t){var a=t.symbol.color;a.a&&(e.field!==o&&i?i&&i.forEach((function(n){String(n.attributes[e.field])===String(t.value)&&r.push([n.attributes[o],a.r,a.g,a.b])})):isNaN(+t.value)?s=!0:r.push([+t.value,a.r,a.g,a.b]))})),s)return null;var l=a&&r.length>0?ve(r,a):r,u=new le;return u.functionName="Colormap",u.functionArguments={},u.functionArguments.Colormap=l,u.variableName="Raster",u}(e,t);case"raster-colormap":return function(e,t){var r=e.extractColormap();if(r&&0!==r.length){var a=t.pixelType,n=a?ve(r,a):r,i=new le;return i.functionName="Colormap",i.functionArguments={},i.functionArguments.Colormap=n,i}}(e,t);case"vector-field":return function(e,t){var r=new le;r.functionName="VectorFieldRenderer";var a,n,i=t.dataType,o=t.bandProperties,s="vector-uv"===i;o&&2===o.length&&(a=o.map((function(e){return e.BandName.toLowerCase()})).indexOf("magnitude"),n=o.map((function(e){return e.BandName.toLowerCase()})).indexOf("direction")),-1!==a&&null!==a||(a=0,n=1);var l="arithmetic"===e.rotationType?1:2,u="flow-from"===e.flowRepresentation?0:1,c=e.visualVariables?e.visualVariables.filter((function(e){return"Magnitude"===e.field}))[0]:new ue.a,f={magnitudeBandID:a,directionBandID:n,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:de[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};return r.functionArguments=f,r}(e,t);case"raster-shaded-relief":return function(e,t){if("elevation"!==t.dataType)return new le;var r=new le;r.functionName="Hillshade";var a="traditional"===e.hillshadeType?0:1,n="none"===e.scalingType?1:3,i={HillshadeType:a,SlopeType:n,ZFactor:e.zFactor};return 0===a&&(i.Azimuth=e.azimuth,i.Altitude=e.altitude),3===n&&(i.PSPower=e.pixelSizePower,i.PSZFactor=e.pixelSizeFactor),r.functionArguments=i,r.variableName="Raster",e.colorRamp&&(r.functionName="ShadedRelief",i.Colormap=Object(ce.b)(e.colorRamp,256)),r}(e,t)}}(n,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandProperties:null==(e=r.keyProperties)?void 0:e.BandProperties,convertColorRampToColormap:t.version<10.6}),a):a}},{key:"_addResampleRasterFunction",value:function(e){var t,r=null;if("vector-field"===(null==(t=this.layer.renderer)?void 0:t.type)){var a={},n=this.layer.renderingRule;if(!n||"Resample"!==n.functionName){var i="esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10;a.rasterFunction="Resample",a.rasterFunctionArguments={ResamplingType:i,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}}r=le.fromJSON(a)}return be(r,e)}}]),r}(re.a);Object(p.a)([Object(b.b)()],Ae.prototype,"layer",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Ae.prototype,"adjustAspectRatio",void 0),Object(p.a)([Object(y.a)("adjustAspectRatio")],Ae.prototype,"writeAdjustAspectRatio",null),Object(p.a)([Object(b.b)({json:{write:!0}}),Object(B.a)("layer.bandIds")],Ae.prototype,"bandIds",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Ae.prototype,"compression",void 0),Object(p.a)([Object(b.b)({json:{write:!0}}),Object(B.a)("layer.compressionQuality")],Ae.prototype,"compressionQuality",void 0),Object(p.a)([Object(y.a)("compressionQuality")],Ae.prototype,"writeCompressionQuality",null),Object(p.a)([Object(b.b)({json:{write:!0}}),Object(B.a)("layer.compressionTolerance")],Ae.prototype,"compressionTolerance",void 0),Object(p.a)([Object(y.a)("compressionTolerance")],Ae.prototype,"writeCompressionTolerance",null),Object(p.a)([Object(b.b)({json:{write:!0}}),Object(B.a)("layer.format")],Ae.prototype,"format",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:{reader:ke.read},write:{writer:ke.write}}}),Object(B.a)("layer.interpolation")],Ae.prototype,"interpolation",void 0),Object(p.a)([Object(b.b)({json:{write:!0}}),Object(B.a)("layer.noData")],Ae.prototype,"noData",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:{reader:Ce.read},write:{writer:Ce.write}}}),Object(B.a)("layer.noDataInterpretation")],Ae.prototype,"noDataInterpretation",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Ae.prototype,"pixelType",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Ae.prototype,"lercVersion",void 0),Object(p.a)([Object(y.a)("lercVersion")],Ae.prototype,"writeLercVersion",null),Object(p.a)([Object(b.b)({type:Number,dependsOn:["layer.adjustAspectRatio","layer.bandIds","layer.format","layer.compressionQuality","layer.compressionTolerance","layer.definitionExpression","layer.interpolation","layer.noData","layer.noDataInterpretation","layer.mosaicRule","layer.renderingRule","layer.pixelFilter","layer.renderer","lercVersion","pixelType"]})],Ae.prototype,"version",null),Object(p.a)([Object(b.b)({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],Ae.prototype,"mosaicRule",null),Object(p.a)([Object(b.b)({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],Ae.prototype,"renderingRule",null),Ae=Object(p.a)([Object(g.a)("esri.layers.mixins.ExportImageServiceParameters")],Ae);var Te=r(924),De=r(1098),Re=r(1010),Ne=r(1104),Le=r(1057),Pe=r(381),Ue=r(114),Be=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).catalogItemVisibilities=null,e.catalogItems=null,e.location=null,e.name=null,e.objectId=null,e.processedValues=null,e.properties=null,e.value=null,e}return r}(re.a);Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"catalogItemVisibilities",void 0),Object(p.a)([Object(b.b)({type:X.default,json:{write:!0}})],Be.prototype,"catalogItems",void 0),Object(p.a)([Object(b.b)({type:F.a,json:{write:!0}})],Be.prototype,"location",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"name",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"objectId",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"processedValues",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"properties",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Be.prototype,"value",void 0);var Ee=Be=Object(p.a)([Object(g.a)("esri.tasks.support.ImageIdentifyResult")],Be);function _e(e,t,r){return ze.apply(this,arguments)}function ze(){return(ze=Object(P.a)(L.a.mark((function e(t,r,a){var n,i,o,l,u,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(Ue.c)(t),i=r.geometry?[r.geometry]:[],e.next=4,Object(Pe.a)(i);case 4:return o=e.sent,function(e){var t=null==e?void 0:e.time;if(t&&(null!=t.start||null!=t.end)){var r=[];null!=t.start&&r.push(t.start),null!=t.end&&-1===r.indexOf(t.end)&&r.push(t.end),e.time=r.join(",")}}(l=r.toJSON()),u=o&&o[0],Object(d.i)(u)&&(l.geometry=u.toJSON()),c=Object(Ue.b)(Object(s.a)(Object(s.a)({},n.query),{},{f:"json"},l)),e.abrupt("return",Object(Ue.a)(c,a));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t,r){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(P.a)(L.a.mark((function e(t,r,a){var n,i,o,s,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,r,a);case 2:return n=e.sent,i=Object(Ue.c)(t),e.next=6,Object(Z.default)("".concat(i.path,"/computeStatisticsHistograms"),n);case 6:return o=e.sent,s=o.data,l=s.statistics,e.abrupt("return",(null!=l&&l.length&&l.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:l,histograms:s.histograms}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,t,r){return He.apply(this,arguments)}function He(){return(He=Object(P.a)(L.a.mark((function e(t,r,a){var n,i,o,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,r,a);case 2:return n=e.sent,i=Object(Ue.c)(t),e.next=6,Object(Z.default)("".concat(i.path,"/computeHistograms"),n);case 6:return o=e.sent,s=o.data,e.abrupt("return",{histograms:s.histograms});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){return(Ze=Object(P.a)(L.a.mark((function e(t,r,a){var n,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(Ue.c)(t),i=r.geometry?[r.geometry]:[],e.abrupt("return",Object(Pe.a)(i).then((function(e){var t=r.toJSON(),i=e&&e[0];Object(d.i)(i)&&(t.geometry=JSON.stringify(i.toJSON()));var o=Object(Ue.b)(Object(s.a)(Object(s.a)({},n.query),{},{f:"json"},t)),l=Object(Ue.a)(o,a);return Object(Z.default)(n.path+"/identify",l)})).then((function(e){return Ee.fromJSON(e.data)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je,We=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"execute",value:function(e,t){return function(e,t,r){return Ze.apply(this,arguments)}(this.url,e,t)}}]),r}(r(313).a),Ke=We=Object(p.a)([Object(g.a)("esri.tasks.ImageIdentifyTask")],We),qe=r(58),Qe=r(304),Xe=Je=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments)).geometry=null,e.renderingRules=null,e.pixelSize=null,e.returnGeometry=!0,e.returnCatalogItems=!0,e.returnPixelValues=!0,e.maxItemCount=null,e.timeExtent=null,e.raster=void 0,e.viewId=void 0,e}return Object(u.a)(r,[{key:"writeGeometry",value:function(e,t,r){null!=e&&(t.geometryType=Object(qe.c)(e),t[r]=JSON.stringify(e.toJSON()))}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=Se.fromJSON(Object(s.a)(Object(s.a)({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"writeMosaicRule",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))}},{key:"renderingRule",set:function(e){var t=e;t&&t.rasterFunction&&(t=le.fromJSON(Object(s.a)(Object(s.a)({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)}},{key:"writeRenderingRule",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))}},{key:"writeRenderingRules",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((function(e){return e.toJSON()}))))}},{key:"writePixelSize",value:function(e,t,r){null!=e&&(t[r]=JSON.stringify(e))}},{key:"writeTimeExtent",value:function(e,t,r){if(null!=e){var a=e.start?e.start.getTime():null,n=e.end?e.end.getTime():null;t[r]=null!=a?null!=n?"".concat(a,",").concat(n):"".concat(a):null}}},{key:"clone",value:function(){return new Je(Object(U.a)({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}}]),r}(re.a);Object(p.a)([Object(b.b)({json:{write:!0}})],Xe.prototype,"geometry",void 0),Object(p.a)([Object(y.a)("geometry")],Xe.prototype,"writeGeometry",null),Object(p.a)([Object(b.b)({type:Se,json:{write:!0}})],Xe.prototype,"mosaicRule",null),Object(p.a)([Object(y.a)("mosaicRule")],Xe.prototype,"writeMosaicRule",null),Object(p.a)([Object(b.b)({type:le,json:{write:!0}})],Xe.prototype,"renderingRule",null),Object(p.a)([Object(y.a)("renderingRule")],Xe.prototype,"writeRenderingRule",null),Object(p.a)([Object(b.b)({type:[le],json:{write:!0}})],Xe.prototype,"renderingRules",void 0),Object(p.a)([Object(y.a)("renderingRules")],Xe.prototype,"writeRenderingRules",null),Object(p.a)([Object(b.b)({type:F.a,json:{write:!0}})],Xe.prototype,"pixelSize",void 0),Object(p.a)([Object(y.a)("pixelSize")],Xe.prototype,"writePixelSize",null),Object(p.a)([Object(b.b)({type:Boolean,json:{write:!0}})],Xe.prototype,"returnGeometry",void 0),Object(p.a)([Object(b.b)({type:Boolean,json:{write:!0}})],Xe.prototype,"returnCatalogItems",void 0),Object(p.a)([Object(b.b)({type:Boolean,json:{write:!0}})],Xe.prototype,"returnPixelValues",void 0),Object(p.a)([Object(b.b)({type:Number,json:{write:!0}})],Xe.prototype,"maxItemCount",void 0),Object(p.a)([Object(b.b)({type:Qe.a,json:{write:{target:"time"}}})],Xe.prototype,"timeExtent",void 0),Object(p.a)([Object(y.a)("timeExtent")],Xe.prototype,"writeTimeExtent",null),Object(p.a)([Object(b.b)({json:{write:!0}})],Xe.prototype,"raster",void 0),Object(p.a)([Object(b.b)({json:{write:!0}})],Xe.prototype,"viewId",void 0);var Ye=Xe=Je=Object(p.a)([Object(g.a)("esri.tasks.support.ImageIdentifyParameters")],Xe),$e=h.a.getLogger("esri.layers.mixins.ArcGISImageService"),et=Object(E.b)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),tt=Object(E.b)()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),rt=Object(E.b)()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),at=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),nt=Object(b.a)(m.i,{min:0,max:255}),it=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).legendEnabled=!0,e.isReference=null,e.operationalLayerType="ArcGISImageServiceLayer",e.popupEnabled=!0,e.popupTemplate=null,e.type="imagery",e}return Object(u.a)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?Object(s.a)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=Object(d.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).then((function(){return t._fetchService(r)}),(function(){return t._fetchService(r)}))),Object(w.u)(this)}},{key:"writeOperationalLayerType",value:function(e,t,r){var a,n="vector-field"===(null==(a=this.renderer)?void 0:a.type);t[r]=n?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"createPopupTemplate",value:function(e){var t=this.rasterFields,r=this.title,a=new Set,n=!1,i=!1;this.capabilities&&(i=(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));var l=new Set;n&&(l.add("raster.itempixelvalue"),i&&l.add("raster.magnitude").add("raster.direction"));var u,c=Object(o.a)(t);try{for(c.s();!(u=c.n()).done;){var f=u.value,p=f.name.toLowerCase();l.has(p)||p.indexOf("raster.servicepixelvalue.")>-1||a.add(f.name)}}catch(d){c.e(d)}finally{c.f()}return Object(R.a)({fields:t,title:r},Object(s.a)(Object(s.a)({},e),{},{visibleFieldNames:a}))}},{key:"redraw",value:function(){this.emit("redraw")}}]),r}(Object(k.a)(Object(D.a)(Object(A.a)(Object(T.a)(Object(x.a)(Object(C.a)(function(e){var t=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.apply(this,arguments))._functionRasterInfos={},e._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},e._symbolizer=null,e._defaultServiceMosaicRule=null,e.rasterAttributeTableFieldPrefix="Raster.",e.adjustAspectRatio=null,e.bandCount=null,e.bandIds=void 0,e.capabilities=null,e.compressionQuality=void 0,e.compressionTolerance=.01,e.copyright=null,e.definitionExpression=null,e.exportImageServiceParameters=null,e.rasterInfo=null,e.fields=null,e.fullExtent=null,e.hasMultidimensions=!1,e.imageMaxHeight=4100,e.imageMaxWidth=4100,e.interpolation=void 0,e.minScale=0,e.maxScale=0,e.multidimensionalInfo=null,e.noData=null,e.noDataInterpretation=void 0,e.objectIdField=null,e.pixelSizeX=null,e.pixelSizeY=null,e.pixelFilter=null,e.raster=void 0,e.viewId=void 0,e.renderer=null,e.rasterAttributeTable=null,e.rasterFunctionInfos=null,e.serviceDataType=null,e.spatialReference=null,e.pixelType=null,e.serviceRasterInfo=null,e.sourceJSON=null,e.url=null,e.version=null,e}return Object(u.a)(r,[{key:"initialize",value:function(){this._set("exportImageServiceParameters",new Ae({layer:this}))}},{key:"readDefaultServiceMosaicRule",value:function(e,t){return Se.fromJSON(t)}},{key:"rasterFunctionNamesIndex",get:function(){var e=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos.length<1||this.rasterFunctionInfos.forEach((function(t){e.set(t.name.toLowerCase().replace(/ /gi,"_"),t.name)})),e}},{key:"queryTask",get:function(){return new $.a({url:this.url})}},{key:"readBandIds",value:function(e,t){if(Array.isArray(e)&&e.length>0&&e.every((function(e){return"number"==typeof e})))return e}},{key:"readCapabilities",value:function(e,t){return this._readCapabilities(t)}},{key:"writeCompressionQuality",value:function(e,t,r){null!=e&&"lerc"!==this.format&&(t[r]=e)}},{key:"writeCompressionTolerance",value:function(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}},{key:"fieldsIndex",get:function(){return this.fields?new Q.a(this.fields):null}},{key:"format",set:function(e){e&&at.has(e.toLowerCase())&&this._set("format",e.toLowerCase())}},{key:"readFormat",value:function(e,t){return"esriImageServiceDataTypeVector-UV"===t.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===t.serviceDataType||null!=this.pixelFilter?"lerc":"jpgpng"}},{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"mosaicRule",set:function(e){var t=e;t&&t.mosaicMethod&&(t=Se.fromJSON(Object(s.a)(Object(s.a)({},t.toJSON()),{},{mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation}))),this._set("mosaicRule",t)}},{key:"readMosaicRule",value:function(e,t){return Se.fromJSON(e||t.mosaicRule||t)}},{key:"writeMosaicRule",value:function(e,t,r){var a=this.mosaicRule,n=this.definitionExpression;a?n&&n!==a.where&&((a=a.clone()).where=n):n&&(a=new Se({where:n})),this._isValidCustomizedMosaicRule(a)&&(t[r]=a.toJSON())}},{key:"writeNoData",value:function(e,t,r){null!=e&&"number"==typeof e&&(t[r]=nt(e))}},{key:"readObjectIdField",value:function(e,t){if(!e){var r=t.fields.filter((function(e){return"esriFieldTypeOID"===e.type||"oid"===e.type}));e=r&&r[0]&&r[0].name}return e}},{key:"parsedUrl",get:function(){return this.url?Object(v.I)(this.url):null}},{key:"readRenderer",value:function(e,t,r){var a=t&&t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.renderer,n=Object(K.b)(a,r)||void 0;if(null!=n)return me(n)||$e.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),n}},{key:"rasterFields",get:function(){var e=this.rasterAttributeTableFieldPrefix||"Raster.",t=new q.a({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),r=new q.a({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),a=new q.a({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=this.fields?Object(U.a)(this.fields):[];n.push(r),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&n.push(t),this.version>=10.4&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some((function(e){return"none"===e.name.toLowerCase()}))&&n.push(a),this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((function(e){return"none"!==e.name.toLowerCase()})).forEach((function(e){n.push(new q.a({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(n.push(new q.a({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),n.push(new q.a({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));var i=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(i&&i.length>0){var o=i.filter((function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()})).map((function(t){var r=Object(U.a)(t);return r.name=e+t.name,r}));n=n.concat(o)}return n}},{key:"renderingRule",set:function(e){var t=e;t&&t.rasterFunction&&(t=le.fromJSON(Object(s.a)(Object(s.a)({},t.toJSON()),{},{rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments}))),this._set("renderingRule",t)}},{key:"readRenderingRule",value:function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&"None"!==r[0].name?le.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}},{key:"writeRenderingRule",value:function(e,t,r){this._isRFTJson(e)||(t[r]=e.toJSON())}},{key:"readSpatialReference",value:function(e,t){var r=e||t.extent.spatialReference;return r?V.a.fromJSON(r):null}},{key:"readPixelType",value:function(e){return rt.fromJSON(e)||e}},{key:"writePixelType",value:function(e,t,r){(Object(d.h)(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[r]=rt.toJSON(e))}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),r}},{key:"applyFilter",value:function(e){var t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}},{key:"applyRenderer",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i,o,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,this._isPicture()||!this.renderer||!this._symbolizer||this.pixelFilter){e.next=17;break}if(n=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),i=this._rasterJobHandler.instance,o=this.bandIds,!i){e.next=16;break}if(e.t0=n,!e.t0){e.next=10;break}return this._symbolizer.bind(),e.next=9,i.updateSymbolizer(this._symbolizer,r);case 9:this._cachedRendererJson=this.renderer.toJSON();case 10:return e.next=12,i.symbolize(Object(s.a)({bandIds:o},t),r);case 12:l=e.sent,a={extent:t.extent,pixelBlock:l},e.next=17;break;case 16:a={extent:t.extent,pixelBlock:this._symbolizer.symbolize(Object(s.a)({bandIds:o},t))};case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._shutdownJobHandler()}},{key:"increaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount++}},{key:"decreaseRasterJobHandlerUsage",value:function(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}},{key:"computeHistograms",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null==r?void 0:r.signal,e.next=3,this._fetchCapabilities(a);case 3:if(this.capabilities.operations.supportsComputeHistograms){e.next=5;break}throw new z.a("imagery-layer:compute-histograms","this operation is not supported on the input image service");case 5:return t=t.clone(),n=this.raster,i=this.mosaicRule,o=this.renderingRule,e.abrupt("return",(o&&null==t.renderingRule&&(t.renderingRule=o),i&&null==t.mosaicRule&&(t.mosaicRule=i),n&&null==t.raster&&(t.raster=n),Ge(this.url,t,{signal:a})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"computeStatisticsHistograms",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null==r?void 0:r.signal,e.next=3,this._fetchCapabilities(a);case 3:if(this.capabilities.operations.supportsComputeStatisticsHistograms){e.next=5;break}throw new z.a("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");case 5:return t=t.clone(),n=this.raster,i=this.mosaicRule,o=this.renderingRule,e.abrupt("return",(o&&null==t.renderingRule&&(t.renderingRule=o),i&&null==t.mosaicRule&&(t.mosaicRule=i),n&&null==t.raster&&(t.raster=n),Ve(this.url,t,{signal:a})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchImage",value:function(e,t,r){var a=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null==e||null==t||null==r)return Object(w.t)(new z.a("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var i=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:n.signal}):null;return Object(w.y)(i).then((function(i){i&&(a.rasterInfo=i);var o={imageServiceParameters:a.getExportImageServiceParameters(e,t,r,n.timeExtent),imageProps:{extent:e,width:t,height:r,format:a.format},requestAsImageElement:n.requestAsImageElement&&!a.pixelFilter||!1,signal:n.signal};return a._requestArrayBuffer(o)}))}},{key:"fetchKeyProperties",value:function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return Object(Z.default)(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return e.data}))}},{key:"fetchRasterAttributeTable",value:function(e){var t=e&&e.renderingRule&&e.renderingRule.toJSON();return this.version<10.1?Object(w.t)(new z.a("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Object(Z.default)(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3&&t?JSON.stringify(t):null})}).then((function(e){return X.default.fromJSON(e.data)}))}},{key:"getCatalogItemRasterInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i,o,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Z.default)(this.parsedUrl.path+"/"+t+"/info",Object(s.a)({query:this._getQueryParams()},r)).then((function(e){return e.data})),n=Object(Z.default)(this.parsedUrl.path+"/"+t+"/info/keyProperties",Object(s.a)({query:this._getQueryParams()},r)).then((function(e){return e.data})).catch((function(){})),e.next=4,Object(w.b)([a,n]);case 4:if((i=e.sent)[0]){e.next=7;break}return e.abrupt("return");case 7:return o=G.a.fromJSON(i[0].extent),l=i[0].statistics?i[0].statistics.map((function(e){return{min:e[0],max:e[1],avg:e[2],stddev:e[3]}})):null,e.abrupt("return",new Te.a({bandCount:i[0].bandCount,extent:o,spatialReference:o.sr,pixelSize:new F.a({x:i[0].pixelSizeX,y:i[0].pixelSizeY,spatialReference:o.sr}),pixelType:i[0].pixelType.toLowerCase(),statistics:l,histograms:i[0].histograms,keyProperties:i[1]||{}}));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getCatalogItemICSInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i,o,l,u,c,f,p,d,h,m,b,g,y,v,O,j,I,M,x,S,k,C,A,T,D,R,N,P,U,B,E;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.default)(this.parsedUrl.path+"/"+t+"/info/ics",Object(s.a)({query:this._getQueryParams()},r));case 2:if(a=e.sent,n=a.data,i=n&&n.ics){e.next=7;break}return e.abrupt("return");case 7:return o=null,e.prev=8,e.next=11,Object(Z.default)(this.parsedUrl.path+"/"+t+"/info",Object(s.a)({query:this._getQueryParams()},r));case 11:o=e.sent.data.extent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:if(o&&o.spatialReference){e.next=18;break}return e.abrupt("return",{ics:i,icsToPixelTransform:null,icsExtent:null,northDirection:null});case 18:for(l=this.version>=10.7?Object(Z.default)(this.parsedUrl.path+"/"+t+"/info/icstopixel",Object(s.a)({query:this._getQueryParams()},r)).then((function(e){return e.data})).catch((function(){return{}})):{},u=o.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[o]}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+t},f=Object(Z.default)(this.parsedUrl.path+"/project",Object(s.a)({query:this._getQueryParams(c)},r)).then((function(e){return e.data})).catch((function(){return{}})),p=(o.xmin+o.xmax)/2,d=(o.ymax-o.ymin)/6,h=o.ymin+d,m=[],b=0;b<5;b++)m.push({x:p,y:h+d*b});return g={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:m}),inSR:u.wkid||JSON.stringify(u),outSR:"0:"+t},y=Object(Z.default)(this.parsedUrl.path+"/project",Object(s.a)({query:this._getQueryParams(g)},r)).then((function(e){return e.data})).catch((function(){return{}})),e.next=24,Object(w.b)([l,f,y]);case 24:if(v=e.sent,null==(O=v[0].ipxf)&&"topup"===(null==(x=null==(j=i.geodataXform)?void 0:j.xf_0)||null==(I=x.name)?void 0:I.toLowerCase())&&6===(null==x||null==(M=x.coefficients)?void 0:M.length)&&(O={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:x.coefficients,cellsizeRatio:0,type:"GeometricXform"}}),(S=G.a.fromJSON(v[1]&&v[1].geometries&&v[1].geometries[0]))&&(S.spatialReference=new V.a({wkid:0,imageCoordinateSystem:i})),k=v[2].geometries?v[2].geometries.filter((function(e){return null!=e&&null!=e.x&&null!=e.y&&"NaN"!==e.x&&"NaN"!==e.y})):[],!((C=k.length)<3)){e.next=32;break}return e.abrupt("return",{ics:i,icsToPixelTransform:O,icsExtent:S,northDirection:null});case 32:for(A=0,T=0,D=0,R=0,N=0;N<C;N++)A+=k[N].x,T+=k[N].y,D+=k[N].x*k[N].x,R+=k[N].x*k[N].y;return P=(C*R-A*T)/(C*D-A*A),U=0,B=k[4].x>k[0].x,E=k[4].y>k[0].y,e.abrupt("return",(P===1/0?U=E?90:270:0===P?U=B?0:180:P>0?U=B?180*Math.atan(P)/Math.PI:180*Math.atan(P)/Math.PI+180:P<0&&(U=E?180+180*Math.atan(P)/Math.PI:360+180*Math.atan(P)/Math.PI),{ics:i,icsToPixelTransform:O,icsExtent:S,northDirection:U}));case 38:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"generateRasterInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"none"!==t.functionName.toLowerCase()||!Object(d.i)(this.serviceRasterInfo)){e.next=2;break}return e.abrupt("return",this.serviceRasterInfo);case 2:if(a=function(e){if(!e)return null;var t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),r=null==t?void 0:t.map((function(e){return e.replace('"rasterFunction":"',"").replace('"',"")}));return r?r.join("/"):null}(t),!this._functionRasterInfos[a]){e.next=5;break}return e.abrupt("return",this._functionRasterInfos[a]);case 5:return n=this._generateRasterInfo(t,r),this._functionRasterInfos[a]=n,e.prev=7,e.next=10,n;case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",(this._functionRasterInfos[a]=null,null));case 16:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getExportImageServiceParameters",value:function(e,t,r,a){var n,i=(e=e.clone().shiftCentralMeridian()).spatialReference;if(i.imageCoordinateSystem){var o=i.imageCoordinateSystem,l=o.id,u=o.referenceServiceName;n=null!=l?u?this.parsedUrl.path.toLowerCase().indexOf("/"+u.toLowerCase()+"/")>-1?"0:"+l:JSON.stringify({icsid:l,icsns:u}):"0:"+l:JSON.stringify({ics:i.imageCoordinateSystem})}else n=i.wkid||JSON.stringify(i.toJSON());Object(d.i)(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);var c=this.exportImageServiceParameters.toJSON(),f=c.bandIds,p=c.noData,h=c.mosaicRule,m=c.renderingRule;f instanceof Array&&f.length>0&&(c.bandIds=f.join(",")),p instanceof Array&&p.length>0&&(c.noData=p.join(","));var b=this.timeInfo;h&&h.multidimensionalDefinition&&a&&b&&b.startField&&(h.multidimensionalDefinition=h.multidimensionalDefinition.filter((function(e){return e.dimensionName!==b.startField}))),c.mosaicRule=h&&JSON.stringify(h),c.renderingRule=m&&JSON.stringify(m);var g={};if(a){var y=a.toJSON(),v=y.start,w=y.end;v&&w&&v===w?g.time=""+v:null==v&&null==w||(g.time="".concat(null==v?"null":v,",").concat(null==w?"null":w))}return Object(s.a)(Object(s.a)({bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:n,imageSR:n,size:t+","+r},c),g)}},{key:"identify",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null==r?void 0:r.signal);case 2:if(this.capabilities.operations.supportsIdentify){e.next=4;break}throw new z.a("imagery-layer:query-rasters","query operation is not supported on the input image service");case 4:return t=t.clone(),a=this.raster,n=this.mosaicRule,(i=this.renderingRule)&&null==t.renderingRule&&(t.renderingRule=i),n&&null==t.mosaicRule&&(t.mosaicRule=n),a&&null==t.raster&&(t.raster=a),e.abrupt("return",new Ke({url:this.url}).execute(t,r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRasters",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchCapabilities(null==r?void 0:r.signal);case 2:if(this.capabilities.operations.supportsQuery){e.next=4;break}throw new z.a("imagery-layer:query-rasters","query operation is not supported on the input image service");case 4:return e.abrupt("return",this.queryTask.execute(t,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryVisibleRasters",value:function(e,t){var r=this;if(!e)return Object(w.t)(new z.a("imagery-layer: query-visible-rasters","missing query parameter"));var a=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1},n=a.pixelSize,i=a.returnDomainValues,o=a.returnTopmostRaster,s=a.showNoDataRecords,l=!1,u=null,c=null,f="raster.servicepixelvalue",p=this.rasterFunctionNamesIndex;if(Object(d.i)(e.outFields)&&(l=e.outFields.some((function(e){return-1===e.toLowerCase().indexOf(f)})),this.version>=10.4)){var h=e.outFields.filter((function(e){return e.toLowerCase().indexOf(f)>-1&&e.length>f.length})).map((function(e){var t=e.slice(f.length+1);return[r._updateRenderingRulesFunctionName(t,p),t]}));u=h.map((function(e){return new le({functionName:e[0]})})),c=h.map((function(e){return e[1]})),0===u.length?this.renderingRule?(u.push(this.renderingRule),c.push(this.renderingRule.functionName)):u=null:this.renderingRule&&!u.some((function(e){return e.functionName===r.renderingRule.functionName}))&&(u.push(this.renderingRule),c.push(this.renderingRule.functionName))}var m=Object(d.h)(e.outSpatialReference)||e.outSpatialReference.equals(this.spatialReference),b=this._getQueryParams({geometry:e.geometry,timeExtent:e.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:u,pixelSize:n,returnCatalogItems:l,returnGeometry:m,maxItemCount:o?1:null});delete b.f;var g=new Ye(b),y=new Ke({url:this.url}),v=this.generateRasterInfo(this.renderingRule);return Object(w.c)((function(t){v.then((function(){y.execute(g).then((function(a){var n=e.outFields;if(l&&!m&&a.catalogItems&&a.catalogItems.features&&a.catalogItems.features.length>0){var o=r.objectIdField||"ObjectId",u=a.catalogItems.features,f=u.map((function(e){return e.attributes&&e.attributes[o]})),p=new Y.a({objectIds:f,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[o]});return r.queryRasters(p).then((function(l){l&&l.features&&l.features.length>0&&l.features.forEach((function(t){u.forEach((function(r){r.attributes[o]===t.attributes[o]&&(r.geometry=new H.a(t.geometry),r.geometry.spatialReference=e.outSpatialReference)}))})),t(r._processVisibleRastersResponse(a,{returnDomainValues:i,templateRRFunctionNames:c,showNoDataRecords:s,templateFields:n}))})).catch((function(){throw new z.a("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry")}))}t(r._processVisibleRastersResponse(a,{returnDomainValues:i,templateRRFunctionNames:c,showNoDataRecords:s,templateFields:n}))})).catch((function(){throw new z.a("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}))}))}))}},{key:"fetchVariableStatisticsHistograms",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n,i;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(Z.default)(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:t}),signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.statistics})),n=Object(Z.default)(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:t}),signal:r}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),e.next=4,Object(w.b)([a,n]);case 4:return i=e.sent,e.abrupt("return",(i[0]&&i[0].forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:i[0]||null,histograms:i[1]||null}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchService",value:function(){var e=Object(P.a)(L.a.mark((function e(t){var r,a,n,i=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchServiceInfo(t);case 2:return Object(d.i)(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo),r=this.sourceJSON,a=Object(d.i)(this.serviceRasterInfo)?Object(w.u)(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:r,signal:t}).then((function(e){return i._set("serviceRasterInfo",e),e})),n=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,{signal:t}):null,e.abrupt("return",Object(w.b)([a,n]).then((function(e){e[1]?i._set("rasterInfo",e[1]):i._set("rasterInfo",e[0]),i.renderer&&Object(Ne.d)(i.rasterInfo).indexOf(i.renderer.type)<0&&(i.renderer=null,$e.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),i._configDefaultRenderer(),i.watch("renderer",(function(){return i._configDefaultRenderer()})),i.watch("renderingRule",(function(e){(i.renderer||i._symbolizer||i.popupEnabled&&i.popupTemplate)&&i.generateRasterInfo(e).then((function(e){e&&(i.rasterInfo=e)}))}));var t=Object(d.i)(i.serviceRasterInfo)&&i.serviceRasterInfo.multidimensionalInfo;t&&i._updateMultidimensionalDefinition(t)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_initJobHandler",value:function(){var e=Object(P.a)(L.a.mark((function e(){var t,r=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._rasterJobHandler.connectionPromise){e.next=2;break}return e.abrupt("return",this._rasterJobHandler.connectionPromise);case 2:return t=new De.a,this._rasterJobHandler.connectionPromise=t.initialize().then((function(){r._rasterJobHandler.instance=t}),(function(){return null})),e.next=6,this._rasterJobHandler.connectionPromise;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_shutdownJobHandler",value:function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0}},{key:"_fetchCapabilities",value:function(){var e=Object(P.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.capabilities,e.t0){e.next=4;break}return e.next=4,this._fetchServiceInfo(t);case 4:return e.abrupt("return",this.capabilities);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchServiceInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t){var r,a,n,i,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.sourceJSON){e.next=8;break}return e.next=4,Object(Z.default)(this.parsedUrl.path,{query:this._getQueryParams(),signal:t});case 4:n=e.sent,i=n.data,o=n.ssl,a=i,this.sourceJSON=a,o&&(this.url=this.url.replace(/^http:/i,"https:"));case 8:if(!((null==(r=a.capabilities)?void 0:r.toLowerCase().split(",").map((function(e){return e.trim()})).indexOf("tilesonly"))>-1)){e.next=10;break}throw new z.a("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");case 10:this.read(a,{origin:"service",url:this.parsedUrl});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isPicture",value:function(){return!this.format||this.format.indexOf("jpg")>-1||this.format.indexOf("png")>-1}},{key:"_configDefaultRenderer",value:function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){var e=Object(Ne.b)(this.rasterInfo);!e||3===this.rasterInfo.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}var t,r;this.renderer||(this.renderer=Object(Ne.a)(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(t=this.mosaicRule)||null==(r=t.multidimensionalDefinition)?void 0:r[0].variableName})),this._symbolizer?(this._symbolizer.rendererJSON=this.renderer.toJSON(),this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new Le.a({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo}),this._symbolizer.bind()||(this._symbolizer=null)}}},{key:"_clonePixelData",value:function(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:e.pixelBlock&&e.pixelBlock.clone()}}},{key:"_getQueryParams",value:function(e){var t=this.raster,r=this.viewId;return Object(s.a)({raster:t,viewId:r,f:"json"},e)}},{key:"_decodePixelBlock",value:function(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):Object(Re.a)(e,t,r)}},{key:"_fetchMultidimensionalInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t){var r,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.default)(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:t}).then((function(e){var t;return null==(t=e.data)?void 0:t.multidimensionalInfo}));case 2:return a=e.sent,e.abrupt("return",(null!=(r=a.variables)&&r.length&&a.variables.forEach((function(e){var t;null!=(t=e.statistics)&&t.length&&e.statistics.forEach((function(e){e.avg=e.mean,e.stddev=e.standardDeviation}))})),a));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchAuxiliaryRasterInfo",value:function(e){var t=e&&e.serviceInfo;if(!t)return Object(w.t)(new z.a("imagery-layer:fetch-metadata","valid serviceInfo is required"));var r=e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,a=e.signal,n=!!(t.hasRasterAttributeTable&&this.version>=10.1)&&Object(Z.default)(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:a}).then((function(e){return X.default.fromJSON(e.data)})).catch((function(){return null})),i=!!(t.hasColormap&&this.version>=10.1)&&Object(Z.default)(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:this.version>=10.6?r:null}),signal:a}).then((function(e){var t;return null==(t=e.data)?void 0:t.colormap})),o=!!(t.hasHistograms&&this.version>=10.1)&&Object(Z.default)(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:this.version>=10.1?r:null}),signal:a}).then((function(e){var t;return null==(t=e.data)?void 0:t.histograms})),s=this.version>=10.3&&Object(Z.default)(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:r}),signal:a}).then((function(e){return e.data})).catch((function(){})),l=!!(t.hasMultidimensions&&this.version>=10.3)&&this._fetchMultidimensionalInfo();return Object(w.b)([n,i,o,s,l]).then((function(e){var r=null;if(t.minValues&&t.minValues.length===t.bandCount){r=[];for(var a=0;a<t.minValues.length;a++)r.push({min:t.minValues[a],max:t.maxValues[a],avg:t.meanValues[a],stddev:t.stdvValues[a]})}var n=Math.ceil((t.extent.xmax-t.extent.xmin)/t.pixelSizeX-.1),i=Math.ceil((t.extent.ymax-t.extent.ymin)/t.pixelSizeY-.1),o=V.a.fromJSON(t.spatialReference||t.extent.spatialReference);return new Te.a({width:n,height:i,bandCount:t.bandCount,extent:G.a.fromJSON(t.extent),spatialReference:o,pixelSize:new F.a({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:o}),pixelType:t.pixelType.toLowerCase(),statistics:r,attributeTable:e[0]||null,colormap:e[1]||null,histograms:e[2]||null,keyProperties:e[3]||{},multidimensionalInfo:e[4]||null})}))}},{key:"_requestArrayBuffer",value:function(e){var t=this,r=e.imageProps,a=e.requestAsImageElement,n=e.signal;if(a&&!this.pixelFilter&&r.format&&r.format.indexOf("png")>-1)return Object(Z.default)(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams(Object(s.a)({f:"image"},e.imageServiceParameters)),signal:n}).then((function(e){return{imageElement:e.data,params:r}}));var i=this._initJobHandler(),o=Object(Z.default)(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams(Object(s.a)({f:"image"},e.imageServiceParameters)),signal:n});return Object(w.b)([o,i]).then((function(e){var a=e[0].data,i=r.format||"jpgpng",o=i;if("bsq"!==o&&"bip"!==o&&(o=Object(Re.b)(a)),!o)throw new z.a("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(a)));var l="gif"===i||"bmp"===i||i.indexOf("png")>-1&&("png"===o||"jpg"===o),u={signal:n};return l?Object(Re.a)(a,Object(s.a)({useCanvas:!0},r),u).then((function(e){return{pixelData:{pixelBlock:e,extent:r.extent},params:r}})):t._decodePixelBlock(a,{width:r.width,height:r.height,planes:null,pixelType:null,noDataValue:null,format:i},u).then((function(e){return{pixelData:{pixelBlock:e,extent:r.extent},params:r}}))}))}},{key:"_generateRasterInfo",value:function(){var e=Object(P.a)(L.a.mark((function e(t,r){var a,n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.default)(this.parsedUrl.path,Object(s.a)({query:this._getQueryParams({renderingRule:t})},r));case 2:return a=e.sent,n=a.data,e.next=6,this._fetchAuxiliaryRasterInfo(Object(s.a)({serviceInfo:n,renderingRule:t},r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_isValidCustomizedMosaicRule",value:function(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())}},{key:"_updateMultidimensionalDefinition",value:function(e){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var t=e.variables[0].dimensions,r=[];for(var a in t)if(t.hasOwnProperty(a)){var n=t[a],i=n.extent,o=!0,s=[i[0]];n.hasRanges&&!0===n.hasRanges?(o=!1,s=[n.values[0]]):"stdz"===n.name.toLowerCase()&&Math.abs(i[1])<=Math.abs(i[0])&&(s=[i[1]]),r.push(new ee.a({variableName:"",dimensionName:t[a].name,isSlice:o,values:s}))}if(r.length>0){this.mosaicRule=this.mosaicRule||new Se;var l=this.mosaicRule.multidimensionalDefinition;(!l||l&&l.length<=0)&&(this.mosaicRule.multidimensionalDefinition=r)}}}},{key:"_formatAttributeValue",value:function(e,t){if("string"==typeof e){var r,a,n=this.popupTemplate&&this.popupTemplate.fieldInfos,i=this._getFieldInfo(n,t),o=i&&i.format;if(o)return e.trim().indexOf(",")>-1?(a=(r=",")+" ",this._formatDelimitedString(e,r,a,o)):e.trim().indexOf(" ")>-1?(r=a=" ",this._formatDelimitedString(e,r,a,o)):this._formatNumberFromString(e,o)}return e}},{key:"_getFieldInfo",value:function(e,t){if(e&&e.length&&t){var r,a=t.toLowerCase();return e.some((function(e){return!(!e.fieldName||e.fieldName.toLowerCase()!==a&&e.fieldName.toLowerCase()!==a.replace(/ /g,"_"))&&(r=e,!0)})),r}}},{key:"_formatDelimitedString",value:function(e,t,r,a){var n=this;return e&&t&&r&&a?e.trim().split(t).map((function(e){return n._formatNumberFromString(e,a)})).join(r):e}},{key:"_formatNumberFromString",value:function(e,t){if(!e||!t)return e;var r=Number(e);return isNaN(r)?e:t.format(r)}},{key:"_processVisibleRastersResponse",value:function(e,t){t=t||{};var r,a,n,i=e.value,o=t,s=o.templateRRFunctionNames,l=o.showNoDataRecords,u=o.returnDomainValues,c=o.templateFields,f=e.processedValues,p=e.catalogItems&&e.catalogItems.features,h=e.properties&&e.properties.Values&&e.properties.Values.map((function(e){return e.replace(/ /gi,", ")}))||[],m=this.objectIdField||"ObjectId",b="string"==typeof i&&i.toLowerCase().indexOf("nodata")>-1,g=[];if(i&&!p&&!b){var y={};y[m]=0,h=[i],p=[new J.a(this.fullExtent,null,y)]}if(!p)return[];this._updateResponseFieldNames(p,c);for(var v=0;v<p.length;v++){if(r=p[v],null!=i&&!b){if(a=h[v],n=this.renderingRule&&f&&f.length>0&&s&&s.length>0&&s.indexOf(this.renderingRule.functionName)>-1?f[s.indexOf(this.renderingRule.functionName)]:i,"nodata"===a.toLowerCase()&&!l)continue;var w="Raster.ItemPixelValue",O="Raster.ServicePixelValue";r.attributes[w]=this._formatAttributeValue(a,w),r.attributes[O]=this._formatAttributeValue(n,O),this._updateFeatureWithMagDirValues(r,a);var j=this.fields&&this.fields.length>0,I=this.renderingRule&&Object(d.i)(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?j?a:i:n;this.renderingRule||(I=j?a:i),this._updateFeatureWithRasterAttributeTableValues(r,I)}if(r.sourceLayer=this,u&&this._updateFeatureWithDomainValues(r),s&&f&&s.length===f.length)for(var M=0;M<s.length;M++){var x="Raster.ServicePixelValue."+s[M];r.attributes[x]=this._formatAttributeValue(f[M],x)}g.push(p[v])}return g}},{key:"_updateFeatureWithRasterAttributeTableValues",value:function(e,t){var r=this,a=this.rasterInfo&&this.rasterInfo.attributeTable||Object(d.i)(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,n=a&&a.features;if(n){var i=a.fields,o=i.map((function(e){return e.name})).filter((function(e){return"value"===e.toLowerCase()})),s=o&&o[0];if(s){var l=n.filter((function(e){return e.attributes[s]===(null!=t?parseInt(t,10):null)}));l&&l[0]&&i.forEach((function(t){var a=r.rasterAttributeTableFieldPrefix+t.name;e.attributes[a]=r._formatAttributeValue(l[0].attributes[t.name],a)}))}}}},{key:"_updateFeatureWithMagDirValues",value:function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var r=t.replace(" ",",").split(",").map((function(e){return parseFloat(e)})),a=r.map((function(e){return[e]})),n=r.map((function(e){return{minValue:e,maxValue:e,noDataValue:null}})),i=new W.a({height:1,width:1,pixelType:"f32",pixels:a,statistics:n});this.pixelFilter({pixelBlock:i,extent:new G.a(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=i.pixels[0][0],e.attributes["Raster.Direction"]=i.pixels[1][0]}}},{key:"_updateFeatureWithDomainValues",value:function(e){var t=this.fields&&this.fields.filter((function(e){return e.domain&&"coded-value"===e.domain.type}));null!=t&&t.forEach((function(t){var r=e.attributes[t.name];if(null!=r){var a=t.domain.codedValues.filter((function(e){return e.code===r}))[0];a&&(e.attributes[t.name]=a.name)}}))}},{key:"_updateResponseFieldNames",value:function(e,t){if(t&&!(t.length<1)){var r=this.fieldsIndex;r&&e.forEach((function(e){if(e&&e.attributes){var a,n=Object(o.a)(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(r.has(i)){var s=r.get(i).name;s!==i&&(e.attributes[i]=e.attributes[s],delete e.attributes[s])}}}catch(l){n.e(l)}finally{n.f()}}}))}}},{key:"_updateRenderingRulesFunctionName",value:function(e,t){if(e&&!(e.length<1)){if("Raw"===e)return e.replace("Raw","None");var r=e.toLowerCase().replace(/ /gi,"_");return t.has(r)?t.get(r):e}}},{key:"_isRFTJson",value:function(e){return e.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")}},{key:"_readCapabilities",value:function(e){var t=e.capabilities?e.capabilities.toLowerCase().split(",").map((function(e){return e.trim()})):["image","catalog"],r=e.currentVersion,a=e.advancedQueryCapabilities,n=e.maxRecordCount,i=t.indexOf("image")>-1,o="esriImageServiceDataTypeElevation"===e.serviceDataType,s=!!(e.spatialReference||e.extent&&e.extent.spatialReference);return{operations:{supportsComputeHistograms:i,supportsExportImage:i,supportsIdentify:i,supportsMeasure:t.indexOf("mensuration")>-1&&s,supportsDownload:t.indexOf("download")>-1,supportsQuery:t.indexOf("catalog")>-1&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&i,supportsProject:r>=10.3&&i,supportsComputeStatisticsHistograms:r>=10.4&&i,supportsQueryBoundary:r>=10.6&&i,supportsCalculateVolume:r>=10.7&&o,supportsComputePixelLocation:r>=10.7&&t.indexOf("catalog")>-1},query:{supportsStatistics:!(!a||!a.supportsStatistics),supportsOrderBy:!(!a||!a.supportsOrderBy),supportsDistinct:!(!a||!a.supportsDistinct),supportsPagination:!(!a||!a.supportsPagination),supportsStandardizedQueriesOnly:!(!a||!a.useStandardizedQueries),maxRecordCount:n}}}}]),r}(e);return Object(p.a)([Object(b.b)()],t.prototype,"_functionRasterInfos",void 0),Object(p.a)([Object(b.b)()],t.prototype,"_rasterJobHandler",void 0),Object(p.a)([Object(b.b)()],t.prototype,"_symbolizer",void 0),Object(p.a)([Object(b.b)()],t.prototype,"_defaultServiceMosaicRule",void 0),Object(p.a)([Object(_.a)("_defaultServiceMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultServiceMosaicRule",null),Object(p.a)([Object(b.b)()],t.prototype,"_cachedRendererJson",void 0),Object(p.a)([Object(b.b)()],t.prototype,"rasterAttributeTableFieldPrefix",void 0),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["rasterFunctionInfos"]})],t.prototype,"rasterFunctionNamesIndex",null),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["url"]})],t.prototype,"queryTask",null),Object(p.a)([Object(b.b)()],t.prototype,"adjustAspectRatio",void 0),Object(p.a)([Object(b.b)({readOnly:!0}),Object(B.a)("serviceRasterInfo.bandCount")],t.prototype,"bandCount",void 0),Object(p.a)([Object(b.b)({type:[m.a],json:{write:!0}})],t.prototype,"bandIds",void 0),Object(p.a)([Object(_.a)("bandIds")],t.prototype,"readBandIds",null),Object(p.a)([Object(b.b)({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),Object(p.a)([Object(_.a)("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),Object(p.a)([Object(b.b)({type:Number})],t.prototype,"compressionQuality",void 0),Object(p.a)([Object(y.a)("compressionQuality")],t.prototype,"writeCompressionQuality",null),Object(p.a)([Object(b.b)({type:Number})],t.prototype,"compressionTolerance",void 0),Object(p.a)([Object(y.a)("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),Object(p.a)([Object(b.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(p.a)([Object(b.b)({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),Object(p.a)([Object(b.b)({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),Object(p.a)([Object(b.b)()],t.prototype,"rasterInfo",void 0),Object(p.a)([Object(b.b)({readOnly:!0,type:[q.a]})],t.prototype,"fields",void 0),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null),Object(p.a)([Object(b.b)({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],t.prototype,"format",null),Object(p.a)([Object(_.a)("service","format",["serviceDataType"])],t.prototype,"readFormat",null),Object(p.a)([Object(b.b)({type:G.a})],t.prototype,"fullExtent",void 0),Object(p.a)([Object(b.b)({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),Object(p.a)([Object(b.b)({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),Object(p.a)([Object(b.b)({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),Object(p.a)([Object(b.b)({type:String,json:{type:et.jsonValues,read:et.read,write:et.write}})],t.prototype,"interpolation",void 0),Object(p.a)([Object(b.b)()],t.prototype,"minScale",void 0),Object(p.a)([Object(_.a)("service","minScale")],t.prototype,"readMinScale",null),Object(p.a)([Object(b.b)()],t.prototype,"maxScale",void 0),Object(p.a)([Object(_.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(p.a)([Object(b.b)({type:Se})],t.prototype,"mosaicRule",null),Object(p.a)([Object(_.a)("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),Object(p.a)([Object(y.a)("mosaicRule")],t.prototype,"writeMosaicRule",null),Object(p.a)([Object(b.b)({readOnly:!0}),Object(B.a)("serviceRasterInfo.multidimensionalInfo")],t.prototype,"multidimensionalInfo",void 0),Object(p.a)([Object(b.b)({json:{type:m.a}})],t.prototype,"noData",void 0),Object(p.a)([Object(y.a)("noData")],t.prototype,"writeNoData",null),Object(p.a)([Object(b.b)({type:String,json:{type:tt.jsonValues,read:tt.read,write:tt.write}})],t.prototype,"noDataInterpretation",void 0),Object(p.a)([Object(b.b)({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),Object(p.a)([Object(_.a)("objectIdField")],t.prototype,"readObjectIdField",null),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),Object(p.a)([Object(b.b)({readOnly:!0}),Object(B.a)("serviceRasterInfo.pixelSize.x")],t.prototype,"pixelSizeX",void 0),Object(p.a)([Object(b.b)({readOnly:!0}),Object(B.a)("serviceRasterInfo.pixelSize.y")],t.prototype,"pixelSizeY",void 0),Object(p.a)([Object(b.b)({type:Function})],t.prototype,"pixelFilter",void 0),Object(p.a)([Object(b.b)()],t.prototype,"raster",void 0),Object(p.a)([Object(b.b)()],t.prototype,"viewId",void 0),Object(p.a)([Object(b.b)({types:K.a,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:K.c,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e){return{enabled:e&&"vector-field"!==e.type}}}}}}})],t.prototype,"renderer",void 0),Object(p.a)([Object(_.a)("renderer")],t.prototype,"readRenderer",null),Object(p.a)([Object(b.b)(M.f)],t.prototype,"opacity",void 0),Object(p.a)([Object(b.b)({readOnly:!0}),Object(B.a)("serviceRasterInfo.attributeTable")],t.prototype,"rasterAttributeTable",void 0),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["fields","rasterInfo","capabilities"]})],t.prototype,"rasterFields",null),Object(p.a)([Object(b.b)({readOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),Object(p.a)([Object(b.b)({type:le})],t.prototype,"renderingRule",null),Object(p.a)([Object(_.a)("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),Object(p.a)([Object(y.a)("renderingRule")],t.prototype,"writeRenderingRule",null),Object(p.a)([Object(b.b)()],t.prototype,"serviceDataType",void 0),Object(p.a)([Object(b.b)({readOnly:!0,type:V.a})],t.prototype,"spatialReference",void 0),Object(p.a)([Object(_.a)("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),Object(p.a)([Object(b.b)({json:{type:rt.jsonValues}})],t.prototype,"pixelType",void 0),Object(p.a)([Object(_.a)("pixelType")],t.prototype,"readPixelType",null),Object(p.a)([Object(y.a)("pixelType")],t.prototype,"writePixelType",null),Object(p.a)([Object(b.b)({constructOnly:!0,type:Te.a})],t.prototype,"serviceRasterInfo",void 0),Object(p.a)([Object(b.b)()],t.prototype,"sourceJSON",void 0),Object(p.a)([Object(b.b)(M.j)],t.prototype,"url",void 0),Object(p.a)([Object(b.b)({readOnly:!0})],t.prototype,"version",void 0),Object(p.a)([Object(_.a)("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=Object(p.a)([Object(g.a)("esri.layers.mixins.ArcGISImageService")],t)}(Object(S.a)(Object(I.a)(j.a))))))))));Object(p.a)([Object(b.b)(M.d)],it.prototype,"legendEnabled",void 0),Object(p.a)([Object(b.b)({type:["show","hide"]})],it.prototype,"listMode",void 0),Object(p.a)([Object(b.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],it.prototype,"isReference",void 0),Object(p.a)([Object(b.b)({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],it.prototype,"operationalLayerType",void 0),Object(p.a)([Object(y.a)("web-map","operationalLayerType")],it.prototype,"writeOperationalLayerType",null),Object(p.a)([Object(b.b)(M.g)],it.prototype,"popupEnabled",void 0),Object(p.a)([Object(b.b)({type:O.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],it.prototype,"popupTemplate",void 0),Object(p.a)([Object(b.b)({readOnly:!0,dependsOn:["fields","title"]})],it.prototype,"defaultPopupTemplate",null),Object(p.a)([Object(b.b)({readOnly:!0,json:{read:!1}})],it.prototype,"type",void 0);var ot=it=Object(p.a)([Object(g.a)("esri.layers.ImageryLayer")],it);t.default=ot},1057:function(e,t,r){"use strict";var a=r(9),n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(4)),c=r(14),f=(r(15),r(1)),p=r(8),d=(r(11),r(19),r(20),r(28)),h=r(946),m=r(947),b=r(924),g=r(915),y=r(32),v=r(900),w=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0};function O(e){var t=e.altitude,r=e.azimuth,a=e.hillshadeType,n=e.pixelSizePower,i=e.pixelSizeFactor,o=e.scalingType,s=e.isGCS,l=e.resolution,u="multi-directional"===a?2*e.zFactor:e.zFactor,c=l.x,f=l.y,p=u/(8*c),d=u/(8*f);if(s&&u>.001&&(p/=111e3,d/=111e3),"adjusted"===o)if(s){var h=111e3*c,m=111e3*f;p=(u+Math.pow(h,n)*i)/(8*h),d=(u+Math.pow(m,n)*i)/(8*m)}else p=(u+Math.pow(c,n)*i)/(8*c),d=(u+Math.pow(f,n)*i)/(8*f);var b=(90-t)*Math.PI/180,g=Math.cos(b),y=(360-r+90)*Math.PI/180,v=Math.sin(b)*Math.cos(y),w=Math.sin(b)*Math.sin(y),O=[315,270,225,360,180,0],j=[60,60,60,60,60,90],I=new Float32Array([3,5,3,2,1,4]),M=I.reduce((function(e,t){return e+t})),x=I.map((function(e){return e/M})),S="multi-directional"===a?O.length:1,k=new Float32Array(6),C=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===a)for(var T=0;T<S;T++)r=O[T],b=(90-(t=j[T]))*Math.PI/180,g=Math.cos(b),y=(360-r+90)*Math.PI/180,v=Math.sin(b)*Math.cos(y),w=Math.sin(b)*Math.sin(y),k[T]=g,C[T]=v,A[T]=w;else k.fill(g),C.fill(v),A.fill(w);return{resolution:l,factor:[p,d],sinZcosA:v,sinZsinA:w,cosZ:g,sinZcosAs:C,sinZsinAs:A,cosZs:k,weights:x,hillshadeType:["traditional","multi-directional"].indexOf(a)}}var j=c.a.getLogger("esri.renderers.support.RasterSymbolizer"),I={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},M=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){return Object(n.a)(this,r),t.call(this,e)}return Object(i.a)(r,[{key:"bind",value:function(){var e,t=this.rendererJSON;if(!t)return!1;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":e=this._updateUVRenderer(t);break;case"rasterColormap":e=this._updateColormapRenderer(t);break;case"rasterStretch":e=this._updateStretchRenderer(t);break;case"classBreaks":e=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":e=this._updateShadedReliefRenderer(t)}return e}},{key:"symbolize",value:function(e){var t=e&&e.pixelBlock;if(!this.isValidPixelBlock(t))return t;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{var r;switch(t.pixels.length>3&&(t=Object(g.g)(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolize_colormap(t);break;case"classBreaks":r=this._symbolize_classBreaks(t);break;case"rasterStretch":r=this._symbolize_stretch(t,e.bandIds);break;case"rasterShadedRelief":var a=e.extent,n=a.spatialReference.isGeographic,i={x:(a.xmax-a.xmin)/t.width,y:(a.ymax-a.ymin)/t.height};r=this._symbolize_shadedRelief(t,{isGCS:n,resolution:i})}return r}catch(e){return j.error("symbolize",e.message),t}}},{key:"simpleStretch",value:function(e,t){if(!this.isValidPixelBlock(e))return e;try{return e.pixels.length>3&&(e=Object(g.g)(e,[0,1,2])),Object(g.n)(e,t)}catch(t){return j.error("symbolize",t.message),e}}},{key:"generateWebGLParameters",value:function(e){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var t=this.lookup.colormapLut;return{colormap:t.indexedColormap,colormapOffset:t.offset,type:"lut"}}var r=e.pixelBlock,a=e.isGCS,n=e.resolution,i=e.bandIds,o=this.rendererJSON;return"rasterStretch"===o.type?this.generateStretchWebGLParams(r,o,i):"rasterShadedRelief"===o.type?this.generateShadedReliefWebGLParams(o,a,n):null}},{key:"_isLUTChanged",value:function(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){var t=this.rendererJSON.colorRamp;if(e)return JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);var r=Object(a.a)({},this.rendererJSON),n=Object(a.a)({},this.lookup.rendererJSON);return r.colorRamp=null,n.colorRamp=null,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}},{key:"_symbolize_colormap",value:function(e){return this._isLUTChanged()&&!this.bind()?e:Object(g.b)(e,this.lookup.colormapLut)}},{key:"_symbolize_classBreaks",value:function(e){var t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1;return this._isLUTChanged()&&!this.bind()?e:r?Object(g.b)(e,this.lookup.colormapLut):Object(g.k)(e,this.lookup.remapLut)}},{key:"_symbolize_stretch",value:function(e,t){var r,n,i=this.rasterInfo,o=i.pixelType,s=i.bandCount,l=this.rendererJSON,u=["u8","u16","s8","s16"].indexOf(o)>-1,c=l.gamma,f=l.useGamma;if(u){var p;if(l.dra){var d=this.getStretchCutoff(l,e,t);r=Object(g.d)(Object(a.a)(Object(a.a)({pixelType:o},d),{},{gamma:f?c:null}))}else if(this._isLUTChanged()){if(!this.bind())return e;r=this.lookup?this.lookup.stretchLut:null}else r=this.lookup?this.lookup.stretchLut:null;if(!r)return e;s>1&&(null==t?void 0:t.length)===e.pixels.length&&(null==(p=r)?void 0:p.lut.length)===s&&(r={lut:t.map((function(e){return r.lut[e]})),offset:r.offset}),n=Object(g.h)(e,r)}else{var h=this.getStretchCutoff(l,e,t);n=Object(g.n)(e,Object(a.a)(Object(a.a)({},h),{},{gamma:f?c:null}))}if(l.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return e;n=Object(g.b)(n,this.lookup.colormapLut)}return n}},{key:"_symbolize_shadedRelief",value:function(e,t){var r,n,i,o=this.rendererJSON,s=function(e,t){if(!w(e))return e;var r=e.width,a=e.height,n=e.mask,i=new Uint8Array(r*a);n&&i.set(n);for(var o,s,l,u,c,f,p,d,h=O(t),m=h.factor,b=h.sinZcosA,g=h.sinZsinA,j=h.cosZ,I=h.sinZcosAs,M=h.sinZsinAs,x=h.cosZs,S=h.weights,k=Object(y.a)(m,2),C=k[0],A=k[1],T=t.hillshadeType,D=e.pixels[0],R=new Uint8Array(r*a),N=1;N<a-1;N++)for(var L=N*r,P=1;P<r-1;P++)if(!n||n[L+P]){var U=8;if(n&&(U=n[L-r+P-1]+n[L-r+P]+n[L-r+P+1]+n[L+P-1]+n[L+P+1]+n[L+r+P-1]+n[L+r+P]+n[L+r+P+1])<7)R[L+P]=0,i[L+P]=0;else{7===U?(o=n[L-r+P-1]?D[L-r+P-1]:D[L+P],s=n[L-r+P]?D[L-r+P]:D[L+P],l=n[L-r+P+1]?D[L-r+P+1]:D[L+P],u=n[L+P-1]?D[L+P-1]:D[L+P],c=n[L+P+1]?D[L+P+1]:D[L+P],f=n[L+r+P-1]?D[L+r+P-1]:D[L+P],p=n[L+r+P]?D[L+r+P]:D[L+P],d=n[L+r+P+1]?D[L+r+P+1]:D[L+P]):(o=D[L-r+P-1],s=D[L-r+P],l=D[L-r+P+1],u=D[L+P-1],c=D[L+P+1],f=D[L+r+P-1],p=D[L+r+P],d=D[L+r+P+1]);var B=(l+c+c+d-(o+u+u+f))*C,E=(f+p+p+d-(o+s+s+l))*A,_=Math.sqrt(1+B*B+E*E),z=0;if("traditional"===T){var V=255*(j+g*E-b*B)/_;V<0&&(V=0),z=V}else for(var F=M.length,G=0;G<F;G++){var H=255*(x[G]+M[G]*E-I[G]*B)/_;H<0&&(H=0),z+=H*S[G]}R[L+P]=255&z}}else R[L+P]=0;for(var Z=0;Z<a;Z++)R[Z*r]=R[Z*r+1],R[(Z+1)*r-1]=R[(Z+1)*r-2];for(var J=1;J<r-1;J++)R[J]=R[J+r],R[J+(a-1)*r]=R[J+(a-2)*r];return new v.a({width:r,height:a,pixels:[R],mask:n?i:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}(e,Object(a.a)(Object(a.a)({},o),t));if(!o.colorRamp)return s;if(this._isLUTChanged(!0)){if(!this.bind())return s;i=this.lookup?this.lookup.hsvMap:null}else i=this.lookup?this.lookup.hsvMap:null;return i?(function(e,t,r,a){if(w(e)&&w(t)){for(var n=a.min,i=a.max,o=e.pixels[0],s=t.pixels,l=t.mask,u=s[0],c=255.00001/(i-n),f=new Uint8ClampedArray(u.length),p=new Uint8ClampedArray(u.length),d=new Uint8ClampedArray(u.length),h=r.length-1,m=0;m<u.length;m++)if(!l||0!==l[m]){var b=Math.floor((u[m]-n)*c),g=Object(y.a)(r[b<0?0:b>h?h:b],2),v=g[0],O=g[1],j=o[m],I=j*O,M=I*(1-Math.abs(v%2-1)),x=j-I;switch(Math.floor(v)){case 0:f[m]=I+x,p[m]=M+x,d[m]=x;break;case 1:f[m]=M+x,p[m]=I+x,d[m]=x;break;case 2:f[m]=x,p[m]=I+x,d[m]=M+x;break;case 3:f[m]=x,p[m]=M+x,d[m]=I+x;break;case 4:f[m]=M+x,p[m]=x,d[m]=I+x;break;case 5:case 6:f[m]=I+x,p[m]=x,d[m]=M+x}}e.pixels=[f,p,d],e.updateStatistics()}}(s,e,i,null!=(r=null==(n=Object(u.o)(this.rasterInfo.statistics))?void 0:n[0])?r:{min:0,max:8e3}),s):s}},{key:"_updateUVRenderer",value:function(e){var t=this.rasterInfo,r=t.bandCount,a=t.attributeTable,n=t.statistics,i=t.pixelType,o=e.field1;if(!o)return!1;var s=["u8","s8"].indexOf(i)>-1&&n&&null!=n[0].min&&null!=n[0].max;if(!(function(e,t){var r=e.attributeTable,a=e.bandCount;return!(!Object(u.i)(r)||a>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}(this.rasterInfo,o)||1===r&&s))return!1;var l=[];if(a){var c=a.fields.filter((function(e){return"value"===e.name.toLowerCase()}))[0];if(!c)return!1;a.features.forEach((function(t){var r,a=e.uniqueValueInfos.filter((function(e){return String(e.value)===String(t.attributes[o])}))[0],n=null==a||null==(r=a.symbol)?void 0:r.color;n&&l.push([t.attributes[c.name]].concat(n))}))}else{if("value"!==o.toLowerCase())return!1;e.uniqueValueInfos.forEach((function(e){var t,r=null==e||null==(t=e.symbol)?void 0:t.color;r&&l.push([parseInt(""+e.value,10)].concat(r))}))}if(0===l.length)return!1;var f=Object(g.c)({colormap:l});return this.lookup={rendererJSON:e,colormapLut:f},this.canRenderInWebGL=!0,!0}},{key:"_updateColormapRenderer",value:function(e){if(!function(e){var t=e.bandCount,r=e.colormap;return Object(u.i)(r)&&r.length&&1===t}(this.rasterInfo))return!1;var t=e.colormapInfos.map((function(e){return[e.value].concat(e.color)})).sort((function(e,t){return e[0]-t[0]}));if(!t||0===t.length)return!1;var r=Object(g.c)({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,!0}},{key:"_updateShadedReliefRenderer",value:function(e){if("elevation"!==this.rasterInfo.dataType)return!1;if(e.colorRamp){for(var t=Object(m.b)(e.colorRamp,256,!0),r=Object(g.c)({colormap:t}),a=[],n=r.indexedColormap,i=0;i<n.length;i+=4){var o=Object(h.b)({r:n[i],g:n[i+1],b:n[i+2]});a.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:a}}else this.lookup=null;return this.canRenderInWebGL=!0,!0}},{key:"_updateClassBreaksRenderer",value:function(e){var t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1,a=e.classBreakInfos;if(null==a||!a.length)return!1;var n=a.sort((function(e,t){return e.classMaxValue-t.classMaxValue})),i=n[n.length-1],o=e.minValue;if(!r){for(var s=[],l=0;l<n.length;l++){var u;s.push({value:null!=(u=n[l].classMinValue)?u:o,mappedColor:n[l].symbol.color}),o=n[l].classMaxValue}return s.push({value:i.classMaxValue,mappedColor:i.symbol.color}),this.lookup={rendererJSON:e,remapLut:s},this.canRenderInWebGL=!1,!0}var c=[];o=e.minValue;for(var f=0;f<n.length;f++){for(var p=n[f],d=o;d<p.classMaxValue;d++)c.push([d].concat(p.symbol.color));o=p.classMaxValue}c.push([i.classMaxValue].concat(i.symbol.color));var h=Object(g.c)({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:h},this.canRenderInWebGL=!0,!0}},{key:"_updateStretchRenderer",value:function(e){if(!("none"===e.stretchType||e.statistics||this.rasterInfo.statistics||e.dra))return!1;var t=e.histograms||this.rasterInfo.histograms;if(!e.dra&&"percentClip"===e.stretchType&&!t)return!1;var r=e.gamma,n=e.useGamma,i=e.colorRamp,o=this.rasterInfo.pixelType;if(!e.dra&&["u8","u16","s8","s16"].indexOf(o)>-1){var s=this.getStretchCutoff(e),l=Object(g.d)(Object(a.a)(Object(a.a)({pixelType:o},s),{},{gamma:n?r:null}));this.lookup={rendererJSON:e,stretchLut:l}}if(i){var u=Object(m.b)(i,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=Object(g.c)({colormap:u}),this.lookup.rendererJSON=e}return this.canRenderInWebGL=!0,!0}},{key:"getStretchCutoff",value:function(e,t,r){var a,n,i,o=e.stretchType;if(e.dra)if("minMax"===o&&t.statistics)a=t.statistics.map((function(e){return[e.minValue,e.maxValue,0,0]}));else{var s=Object(g.f)(t);a=s.statistics,n=s.histograms}else a=(null==(i=e.statistics)?void 0:i.length)>0?e.statistics:Object(u.o)(this.rasterInfo.statistics),n=e.histograms||Object(u.o)(this.rasterInfo.histograms);var l,c,f,p,d,h,m,b,y,v=a||n?(a||n).length:this.rasterInfo.bandCount,w=[],O=[];switch(a&&!Array.isArray(a[0])&&(a=a.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),o){case"none":var j=I[this.rasterInfo.pixelType]||I.f32;for(b=0;b<v;b++)w[b]=j[0],O[b]=j[1];break;case"minMax":for(b=0;b<v;b++)w[b]=a[b][0],O[b]=a[b][1];break;case"standardDeviation":for(b=0;b<v;b++)w[b]=a[b][2]-e.numberOfStandardDeviations*a[b][3],O[b]=a[b][2]+e.numberOfStandardDeviations*a[b][3],w[b]<a[b][0]&&(w[b]=a[b][0]),O[b]>a[b][1]&&(O[b]=a[b][1]);break;case"percentClip":for(b=0;b<n.length;b++){for(l=n[b],d=new Uint32Array(l.size),p=l.counts,f=0,c=(l.max-l.min)/l.size,m=-.5===l.min&&1===c?.5:0,y=0;y<l.size;y++)f+=p[y],d[y]=f;for(h=e.minPercent*f/100,y=0;y<l.size;y++)if(d[y]>h){w[b]=l.min+c*(y+m);break}for(h=(1-e.maxPercent/100)*f,y=l.size-2;y>=0;y--)if(d[y]<h){O[b]=l.min+c*(y+2-m);break}}break;default:for(b=0;b<v;b++)w[b]=a[b][0],O[b]=a[b][1]}var M={minCutOff:w,maxCutOff:O,outMax:e.max||255,outMin:e.min||0};return this.getSelectedBandCutoffs(M,r)}},{key:"getSelectedBandCutoffs",value:function(e,t){if(null==t||0===t.length)return e;var r=Math.max.apply(null,t),a=e.minCutOff,n=e.maxCutOff,i=e.outMin,o=e.outMax;return a.length===t.length||a.length<=r?e:{minCutOff:t.map((function(e){return a[e]})),maxCutOff:t.map((function(e){return n[e]})),outMin:i,outMax:o}}},{key:"generateStretchWebGLParams",value:function(e,t,r){var a=null,n=null,i=this.lookup&&this.lookup.colormapLut;t.colorRamp&&i&&(a=i.indexedColormap,n=i.offset);var o=t.gamma,s=!!(t.useGamma&&o&&o.some((function(e){return 1!==e}))),l=this.getStretchCutoff(t,e,r),u=l.minCutOff,c=l.maxCutOff,f=l.outMin,p=l.outMax;e&&e.pixels&&2===e.pixels.length&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]);var d,h=Math.min(3,r&&r.length||e&&e.getPlaneCount()||this.rasterInfo.bandCount),m=new Float32Array(h),b=a||s?1:255;for(d=0;d<h;d++)m[d]=(p-f)/(c[d]-u[d])/b;var g=new Float32Array(h);if(s)for(d=0;d<h;d++)o[d]>1?o[d]>2?g[d]=6.5+Math.pow(o[d]-2,2.5):g[d]=6.5+100*Math.pow(2-o[d],4):g[d]=1;return{bandCount:h,outMin:f/b,outMax:p/b,minCutOff:u,maxCutOff:c,factor:m,useGamma:s,gamma:s?o:[1,1,1],gammaCorrection:s?g:[1,1,1],colormap:a,colormapOffset:n,type:"stretch"}}},{key:"generateShadedReliefWebGLParams",value:function(e,t,r){var n,i,o,s=null,l=null,c=this.lookup&&this.lookup.colormapLut;e.colorRamp&&c&&(s=c.indexedColormap,l=c.offset);var f=O(Object(a.a)(Object(a.a)({},e),{},{isGCS:t,resolution:r})),p=null==(n=Object(u.o)(this.rasterInfo.statistics))?void 0:n[0];return Object(a.a)(Object(a.a)({},f),{},{minValue:null!=(i=p.min)?i:0,maxValue:null!=(o=p.max)?o:8e3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:s,colormapOffset:l})}},{key:"isValidPixelBlock",value:function(e){return!!(e&&e.pixels&&e.pixels.length>0&&0!==e.validPixelCount)}}]),r}(d.a);Object(l.a)([Object(f.b)({json:{write:!0}})],M.prototype,"rendererJSON",void 0),Object(l.a)([Object(f.b)({type:b.a,json:{write:!0}})],M.prototype,"rasterInfo",void 0),Object(l.a)([Object(f.b)({json:{write:!0}})],M.prototype,"lookup",void 0),Object(l.a)([Object(f.b)({})],M.prototype,"canRenderInWebGL",void 0);var x=M=Object(l.a)([Object(p.a)("esri.renderers.support.RasterSymbolizer")],M);t.a=x},1059:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return O})),r.d(t,"d",(function(){return w})),r.d(t,"e",(function(){return S})),r.d(t,"f",(function(){return x}));var a=r(9),n=r(931),i=r(991),o=r(1018);function s(){for(var e=[],t=0;t<=257;t++)e[t]=[t];return e}function l(e,t){for(var r=0;r<t.length;r++)e.push(t[r])}var u=new Set;u.add(511),u.add(1023),u.add(2047),u.add(4095),u.add(8191);var c=r(1019),f=r(968),p=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8];function d(e,t){var r="unknown";return 3===e?r="f32":1===e?1===t?r="u1":2===t?r="u2":4===t?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):2===e&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function h(e){var t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function m(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function b(e,t){var r=e.get(t);return r&&r.values}function g(e,t){var r=e.get(t);return r&&r.values[0]}function y(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.a.TIFF_TAGS,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,o=8===i,s=o?j(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),l=4+2*i,u=o?8:2,f=u+s*l;if(r+f>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:f};for(var p,d,h,m,b,g,y,v=r+f+4<=e.byteLength?M(new DataView(e,r+f,8===i?8:4),0,t,8===i):null,O=r+u,I=new Map,x=0;x<s;x++)h=(d=new DataView(e,O+l*x,l)).getUint16(0,t),b=d.getUint16(2,t),m=c.a.getTagName(h,n),2===i?(g=d.getUint16(4,t),y=d.getUint16(6,t)):4===i?(g=d.getUint32(4,t),y=d.getUint32(8,t)):8===i&&(g=M(d,4,t,!0),y=M(d,12,t,!0)),w(e,t,p={id:h,type:b,valueCount:g,valueOffset:y,values:null},a,!1,i),I.set(m,p);return{success:!0,ifd:I,nextIFD:v,requiredBufferSize:f}}var v=function(e,t,r,a,o){var c,p,m,b,y,v,w=f.a===t,O=g(r,"BITSPERSAMPLE"),j=d(g(r,"SAMPLEFORMAT")||1,O),I=g(r,"COMPRESSION")||1,M=h(j);if(1===I)m=e.slice(a,a+o),b=new Uint8Array(m);else if(8===I||32946===I)b=new Uint8Array(e,a,o),v=new n.a(b).getBytes(),m=new ArrayBuffer(v.length),(b=new Uint8Array(m)).set(v);else if(6===I){b=new Uint8Array(e,a,o);var x=new i.a;x.parse(b);var S=x.getData(x.width,x.height,!0);m=new ArrayBuffer(S.length),(b=new Uint8Array(m)).set(S)}else 5===I&&(m=(b=function(e,t,r){for(var a=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t%4!=0||r%4!=0){var n=new ArrayBuffer(4*Math.ceil(r/4)),i=new Uint8Array(n),o=new Uint8Array(e,t,r);if(a)for(var s=0;s<i.length;s+=4)i[s]=o[s+3],i[s+1]=o[s+2],i[s+2]=o[s+1],i[s+3]=o[s];else i.set(o);return new Uint32Array(i.buffer)}if(a){for(var l=new Uint8Array(e,t,r),u=new Uint8Array(l.length),c=0;c<u.length;c+=4)u[c]=l[c+3],u[c+1]=l[c+2],u[c+2]=l[c+1],u[c+3]=l[c];return new Uint32Array(u.buffer)}return new Uint32Array(e,t,r/4)}(e,t,r,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),n=9,i=s(),o=32,c=i.length,f=[],p=1,d=a[0],h=0,m=a.length,b=8*(4*m-r),g=[];null!=d;){if(o>=n)o-=n,h=d>>>32-n,d<<=n;else{var y=n-o;h=((h=d>>>32-o)<<y)+((d=a[p++])>>>(o=32-y)),d<<=y}if(257===h)break;if(256!==h){var v=i[h];if(null==v){if(h>i.length)throw"data integrity issue: code does not exist on code page";f.push(f[0]),i[c++]=f.slice(),l(g,f)}else l(g,v),f.push(v[0]),f.length>1&&(i[c++]=f.slice()),f=v.slice();if(u.has(c)&&n++,0===o&&(d=a[p++],o=32),p>m||p===m&&o<=b)break}else n=9,c=(i=s()).length,f=[]}return new Uint8Array(g)}(e,a,o,t)).buffer);if("u8"===j||"s8"===j||w)p=new M(m);else{switch(m=new ArrayBuffer(b.length),y=new Uint8Array(m),j){case"u16":case"s16":for(c=0;c<b.length;c+=2)y[c]=b[c+1],y[c+1]=b[c];break;case"u32":case"s32":case"f32":for(c=0;c<b.length;c+=4)y[c]=b[c+3],y[c+1]=b[c+2],y[c+2]=b[c+1],y[c+3]=b[c]}p=new M(m)}return p};function w(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;if(r.values)return!0;var o,s,l=r.type,u=r.valueCount,c=r.valueOffset,f=[],d=p[l],h=8*d,m=u*d,b=u*p[l]*8,g=8===i?64:32;if(b>g&&m>(n?e.byteLength:e?e.byteLength-c+a:0))return r.offlineOffsetSize=[c,m],r.values=null,!1;if(b<=g)if(t||(c>>>=32-b),1===u)f=[c];else if(64===g){var y=c>>>0,v=Math.round((c-y)/4294967296),w=y,O=32;for(s=1;s<=u;s++){var M=32-h*s%32;if(O<h){var x=w<<M>>>32-O,S=v<<32-O>>>32-O;w=v,f.push(x+S*Math.pow(2,h-O)),O-=32-(h-O)}else f.push(w<<M>>>32-h),O-=h;0===O&&(O=32,w=v)}}else for(s=1;s<=u;s++){var k=32-h*s;f.push(c<<k>>>32-h)}else{c-=a,n&&(c=0);for(var C=c;C<c+m;C+=d){switch(l){case 1:case 2:o=new DataView(e,C,1).getUint8(0);break;case 3:o=new DataView(e,C,2).getUint16(0,t);break;case 4:o=new DataView(e,C,4).getUint32(0,t);break;case 5:o=new DataView(e,C,4).getUint32(0,t)/new DataView(e,C+4,4).getUint32(0,t);break;case 6:o=new DataView(e,C,1).getInt8(0);break;case 7:o=new DataView(e,C,1).getUint8(0);break;case 8:o=new DataView(e,C,2).getInt16(0,t);break;case 9:o=new DataView(e,C,4).getInt32(0,t);break;case 10:o=new DataView(e,C,4).getInt32(0,t)/new DataView(e,C+4,4).getInt32(0,t);break;case 11:o=new DataView(e,C,4).getFloat32(0,t);break;case 12:o=new DataView(e,C,8).getFloat64(0,t);break;case 16:case 18:o=j(new DataView(e,C,8),0,t);break;case 17:o=I(new DataView(e,C,8),0,t);break;default:o=null}f.push(o)}}if(2===l){var A="",T=f;for(f=[],s=0;s<T.length;s++)0===T[s]&&""!==A?(f.push(A),A=""):A+=String.fromCharCode(T[s]);""===A&&0!==f.length||f.push(A)}return r.values=f,!0}function O(e){var t,r=e[0],a=g(r,"TILEWIDTH"),n=g(r,"TILELENGTH"),i=g(r,"IMAGEWIDTH"),o=g(r,"IMAGELENGTH"),s=g(r,"BITSPERSAMPLE"),l=g(r,"SAMPLESPERPIXEL"),u=g(r,"SAMPLEFORMAT")||1,c=d(u,s),f=!!b(r,"PLANARCONFIGURATION")&&2===b(r,"PLANARCONFIGURATION")[0],p=b(r,"GDAL_NODATA");null!=p&&("string"==typeof p[0]?(t=p.map((function(e){return parseFloat(e)}))).some((function(e){return isNaN(e)}))&&(t=null):"number"==typeof p[0]&&(t=p));var h,y=g(r,"COMPRESSION")||1;switch(y){case 1:h="NONE";break;case 2:case 3:case 4:case 32771:h="CCITT";break;case 5:h="LZW";break;case 6:case 7:h="JPEG";break;case 32773:h="PACKBITS";break;case 8:case 32946:h="DEFLATE";break;case 34712:h="JPEG2000";break;default:h=String(y)}var v=!0,w="";1!==y&&5!==y&&6!==y&&8!==y&&32946!==y&&(v=!1,w+="unsupported tag compression "+y),u>3&&(v=!1,w+="unsupported tag sampleFormat "+u),s%8!=0&&(v=!1,w+="unsupported tag bitsPerSample "+s);var O,j=g(r,"GEOASCIIPARAMS");if(j){var I=j.split("|").filter((function(e){return e.indexOf("ESRI PE String = ")>-1}))[0],M=I?I.replace("ESRI PE String = ",""):"";O=0===M.indexOf("PROJCS")||0===M.indexOf("GEOGCS")?{wkid:null,wkt:M}:null}var x,S,k=b(r,"GEOTIEPOINTS"),C=b(r,"GEOPIXELSCALE"),A=b(r,"GEOTRANSMATRIX"),T=r.has("GEOKEYDIRECTORY")?r.get("GEOKEYDIRECTORY").data:null,D=!1;if(T){D=2===g(T,"GTRasterTypeGeoKey");var R=g(T,"GTModelTypeGeoKey");if(2===R){var N=g(T,"GeographicTypeGeoKey");N>=1024&&N<=32766&&(O={wkid:N})}else if(1===R){var L=g(T,"ProjectedCSTypeGeoKey");L>=1024&&L<=32766&&(O={wkid:L})}}if(C&&k&&k.length>=6?(x=[C[0],0,k[3]-k[0]*C[0],0,-Math.abs(C[1]),k[4]-k[1]*C[1]],D&&(x[2]-=.5*x[0]+.5*x[1],x[5]-=.5*x[3]+.5*x[4])):A&&16===A.length&&(x=[A[0],A[1],A[3],A[4],A[5],A[7]]),x){for(var P,U=[{x:0,y:o},{x:0,y:0},{x:i,y:o},{x:i,y:0}],B=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY,V=0;V<U.length;V++)B=(P=m(U[V],x)).x>B?B:P.x,_=P.x<_?_:P.x,E=P.y>E?E:P.y,z=P.y<z?z:P.y;S={xmin:B,xmax:_,ymin:E,ymax:z,spatialReference:O}}var F,G,H,Z,J,W=e.filter((function(e){return 1===g(e,"NEWSUBFILETYPE")}));W.length>0&&(F=Math.round(Math.log(i/g(W[0],"IMAGEWIDTH"))/Math.LN2),G=Math.round(Math.log(i/g(W[W.length-1],"IMAGEWIDTH"))/Math.LN2),H=g(W[W.length-1],"TILEWIDTH"),Z=g(W[W.length-1],"TILEHEIGHT")),H=G>0?H||a:null,Z=G>0?Z||n:null,a&&(J=[{maxCol:Math.ceil(i/a)-1,maxRow:Math.ceil(o/n)-1,minRow:0,minCol:0}],W.forEach((function(e){J.push({maxCol:Math.ceil(g(e,"IMAGEWIDTH")/g(e,"TILEWIDTH"))-1,maxRow:Math.ceil(g(e,"IMAGELENGTH")/g(e,"TILELENGTH"))-1,minRow:0,minCol:0})})));var K=function(e){if(!e)return null;var t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;for(var r,a,n,i,o,s=new Map,l=0;l<t.length;l++)a=(r=t[l]).slice("<Item ".length,r.indexOf(">")),(i=r.indexOf("sample="))>-1&&(o=r.slice(i+'sample="'.length,r.indexOf('"',i+'sample="'.length))),(i=r.indexOf("name="))>-1&&(a=r.slice(i+'name="'.length,r.indexOf('"',i+'name="'.length))),a&&(n=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),null!=o?s.has(a)?s.get(a)[o]=n:s.set(a,[n]):s.set(a,n)),o=null;var u=s.get("STATISTICS_MINIMUM"),c=s.get("STATISTICS_MAXIMUM"),f=s.get("STATISTICS_MEAN"),p=s.get("STATISTICS_STDDEV"),d=null;if(u&&c){d=[];for(var h=0;h<u.length;h++)d.push({min:parseFloat(u[h]),max:parseFloat(c[h]),avg:f&&parseFloat(f[h]),stddev:p&&parseFloat(p[h])})}var m=s.get("BandName"),b=s.get("WavelengthMin"),g=s.get("WavelengthMax"),y=null;if(m){y=[];for(var v=0;v<m.length;v++)y.push({BandName:m[v],WavelengthMin:b&&parseFloat(b[v]),WavelengthMax:g&&parseFloat(g[v])})}return{statistics:d,bandProperties:y,dataType:s.get("DataType"),rawMetadata:s}}(g(e[0],"GDAL_METADATA"));return{width:i,height:o,tileWidth:a,tileHeight:n,planes:l,isBSQ:f,pixelType:c,compression:h,noData:t,isSupported:v,message:w,extent:S,firstPyramidLevel:F,maximumPyramidLevel:G,pyramidBlockWidth:H,pyramidBlockHeight:Z,tileBoundary:J,metadata:K}}function j(e,t,r){var a=e.getUint32(t,r),n=e.getUint32(t+4,r);return r?4294967296*n+a:4294967296*a+n}function I(e,t,r){var a=r?e.getInt32(t,r):e.getUint32(t,r),n=r?e.getUint32(t+4,r):e.getInt32(t+4,r),i=(r?a:n)>=0?1:-1;return r?a*=i:n*=i,i*(r?4294967296*n+a:4294967296*a+n)}function M(e,t,r,a){return a?j(e,t,r):e.getUint32(t,r)}function x(e){var t=new DataView(e,0,16),r=t.getUint16(0,!1),a=null;if(18761===r)a=!0;else{if(19789!==r)throw"unexpected endianess byte";a=!1}var n=t.getUint16(2,a);if(42!==n&&43!==n)throw"unexpected tiff identifier";var i=4,o=43===n;if(o){var s=t.getUint16(i,a);if(i+=2,8!==s)throw"unsupported bigtiff version";if(0!==t.getUint16(i,a))throw"unsupported bigtiff version";i+=2}return{littleEndian:a,isBigTiff:o,firstIFD:M(t,i,a,o)}}function S(e,t,r){var a,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.a.TIFF_TAGS,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4,l=y(e,t,r,n,i,s),u=l.ifd;if(u){if(c.a.ifdTags.forEach((function(r,i){u.has(i)&&((a=u.get(i)).data=y(e,t,a.valueOffset-n,n,r).ifd)})),u.has("GEOKEYDIRECTORY")){var f=(a=u.get("GEOKEYDIRECTORY")).values;if(f&&f.length>4){var p=f[0]+"."+f[1]+"."+f[2];a.data=y(e,t,a.valueOffset+6-n,n,c.a.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[p]})}}if(u.has("XMP")){var d=(a=u.get("XMP")).values;"number"==typeof d[0]&&7===a.type&&(a.values=[Object(o.a)(new Uint8Array(d))])}}return l}function k(e,t){for(var r,a=t.headerInfo,n=t.ifd,i=v(e,a.littleEndian,n,t.offset||0,t.size||e.byteLength),o=a.pixelType,s=a.isBSQ,l=a.planes,u=h(o),c=i.length/l,f=[],p=0;p<l;p++){if(r=new u(c),s)r=i.slice(c*p,c*(p+1));else for(var d=0;d<c;d++)r[d]=i[d*l+p];f.push(r)}var m,b,y=g(n,"TILEWIDTH"),w=g(n,"TILELENGTH"),O=a.noData?a.noData[0]:null,j=a.metadata?a.metadata.statistics:null,I=j?j.map((function(e){return e.min})):null,M=j?j.map((function(e){return e.max})):null;if(null!=O)if(m=new Uint8Array(c),Math.abs(O)>1e24)for(b=0;b<c;b++)Math.abs((f[0][b]-O)/O)<1e-6?m[b]=0:m[b]=1;else for(b=0;b<c;b++)f[0][b]===O?m[b]=0:m[b]=1;else I&&M&&t.applyMinMaxConstraint&&(m=function(e,t,r){if(!(e&&e.length>0&&t&&r))return null;for(var a,n,i,o=e[0].length,s=e.length,l=new Uint8Array(o),u=0;u<s;u++)if(a=e[u],n=t[u],i=r[u],0===u)for(var c=0;c<o;c++)l[c]=a[c]<n||a[c]>i?0:1;else for(var f=0;f<o;f++)l[f]&&(l[f]=a[f]<n||a[f]>i?0:1);return l}(f,I,M));return{pixelType:o,width:y,height:w,pixels:f,mask:m,noDataValue:O}}function C(e,t){var r,o,s=t=t||function(e){var t=x(e),r=t.littleEndian,n=t.isBigTiff,i=t.firstIFD,o=[];do{var s=S(e,r,i,0,c.a.TIFF_TAGS,n?8:4);if(!s.success)break;o.push(s.ifd),i=s.nextIFD}while(i>0);return Object(a.a)(Object(a.a)({},O(o)),{},{littleEndian:r,isBigTiff:n,ifds:o})}(e),l=s.ifds,u=s.noData;if(0===l.length)throw"no valid image file directory";var p=l[0],d=u?u[0]:null;if(o=t.tileWidth?function(e,t,r){var a=b(r,"TILEOFFSETS");if(void 0===a)return null;for(var n,i,o,s,l,u,c,f,p,d,m,g,y,w=b(r,"TILEBYTECOUNTS"),O=t.tileWidth,j=t.tileHeight,I=t.width,M=t.height,x=t.pixelType,S=t.isBSQ,k=t.planes,C=I*M,A=b(r,"BITSPERSAMPLE")[0],T=h(x),D=[],R=0;R<k;R++)D.push(new T(C));var N=Math.ceil(I/O);if(A%8==0)for(n=0;n<a.length;n++)for(f=(u=Math.floor(n/N)*j)*I+(c=n%N*O),o=v(e,t.littleEndian,r,a[n],w[n]),d=0,p=f,g=Math.min(O,I-c),m=Math.min(j,M-u),i=0;i<k;i++)if(y=D[i],S)for(s=0;s<m;s++)for(p=f+s*I,d=O*j*i+s*O,l=0;l<g;l++,p++,d++)y[p]=o[d];else for(s=0;s<m;s++)for(p=f+s*I,d=s*O*k+i,l=0;l<g;l++,p++,d+=k)y[p]=o[d];return{width:I,height:M,pixelType:x,pixels:D}}(e,t,p):function(e,t,r){var a=f.a===t.littleEndian,o=b(r,"STRIPOFFSETS");if(void 0===o)return null;var s,l,u,c,p,d,m,g,y,v,w=t.width,O=t.height,j=t.pixelType,I=t.planes,M=w*O,x=b(r,"BITSPERSAMPLE")[0],S=h(j),k=new S(M*I),C=b(r,"STRIPBYTECOUNTS"),A=b(r,"ROWSPERSTRIP")[0],T=b(r,"COMPRESSION")?b(r,"COMPRESSION")[0]:1,D=A;if(x%8==0)for(s=0;s<o.length;s++){if(p=s*(A*w)*I,D=(s+1)*A>O?O-s*A:A,"u8"===j||"s8"===j||a){if(8===T||32946===T)m=new Uint8Array(e,o[s],C[s]),v=new n.a(m).getBytes(),d=new ArrayBuffer(v.length),(m=new Uint8Array(d)).set(v),m.length!==D*w*I*x/8&&console.log("strip byte counts is different than expected");else if(6===T){m=new Uint8Array(e,o[s],C[s]);var R=new i.a;R.parse(m);var N=R.getData(R.width,R.height,!0);d=new ArrayBuffer(N.length),(m=new Uint8Array(d)).set(N)}else 1===T&&(C[s]!==D*w*I*x/8&&console.log("strip byte counts is different than expected"),d=e.slice(o[s],o[s]+C[s]));c=new S(d)}else{switch(6===T||8===T||32946===T?(m=new Uint8Array(e,o[s],C[s]),m=new n.a(m).getBytes(),d=new ArrayBuffer(m.length),g=new Uint8Array(d),m.length!==D*w*I*x/8&&console.log("strip byte counts is different than expected")):1===T&&(C[s]!==D*w*I*x/8&&console.log("strip byte counts is different than expected"),d=new ArrayBuffer(C[s]),m=new Uint8Array(e,o[s],C[s]),g=new Uint8Array(d)),j){case"u16":case"s16":for(u=0;u<m.length;u+=2)g[u]=m[u+1],g[u+1]=m[u];break;case"u32":case"s32":case"f32":for(u=0;u<m.length;u+=4)g[u]=m[u+3],g[u+1]=m[u+2],g[u+2]=m[u+1],g[u+3]=m[u]}c=new S(d)}k.set(c,p)}var L=[];if(1===I)L.push(k);else for(s=0;s<I;s++){for(y=new S(M),l=0;l<M;l++)y[l]=k[l*I+s];L.push(y)}return{width:w,height:O,pixelType:j,pixels:L}}(e,t,p),null!==d){if(o.mask=new Uint8Array(o.width*o.height),Math.abs(d)>1e24)for(r=0;r<o.width*o.height;r++)Math.abs((o.pixels[0][r]-d)/d)<1e-6?o.mask[r]=0:o.mask[r]=1;else for(r=0;r<o.width*o.height;r++)o.pixels[0][r]===d?o.mask[r]=0:o.mask[r]=1;o.noDataValue=d}return o}},1098:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(9),n=r(10),i=r.n(n),o=r(21),s=r(2),l=r(3),u=r(23),c=r(16),f=r(900),p=r(383),d=function(){function e(){Object(s.a)(this,e),this._workerThread=null,this._destroyed=!1}return Object(l.a)(e,[{key:"initialize",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)("RasterWorker");case 2:t=e.sent,this._destroyed?t.close():this._workerThread=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}},{key:"decode",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return e.next=4,this._workerThread.invoke("decode",t,r);case 4:return a=e.sent,e.abrupt("return",a?new f.a(a):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"symbolize",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return a={extent:t.extent&&t.extent.toJSON(),pixelBlock:t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},e.next=5,this._workerThread.invoke("symbolize",a,r);case 5:return n=e.sent,e.abrupt("return",n?new f.a(n):null);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateSymbolizer",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:return n=null==t||null==(a=t.rendererJSON)?void 0:a.histograms,e.next=5,Object(c.b)(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:n},r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"stretch",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},e.next=7,this._workerThread.invoke("stretch",a,r);case 7:return n=e.sent,e.abrupt("return",n?new f.a(n):null);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"split",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},e.next=7,this._workerThread.invoke("split",a,r);case 7:return n=e.sent,e.abrupt("return",(n&&n.forEach((function(e,t){n.set(t,e?f.a.fromJSON(e):null)})),Object(c.u)(n)));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"estimateStatisticsHistograms",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&t.pixelBlock){e.next=4;break}return e.abrupt("return",null);case 4:return a={srcPixelBlock:t.pixelBlock.toJSON()},e.next=7,this._workerThread.invoke("estimateStatisticsHistograms",a,r);case 7:return n=e.sent,e.abrupt("return",Object(c.u)(n));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"mosaicAndTransform",value:function(){var e=Object(o.a)(i.a.mark((function e(t,r){var n,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._workerThread){e.next=2;break}throw new u.a("raster-jobhandler:no-connection","no available worker connection");case 2:if(null!=t&&null!=(n=t.srcPixelBlocks)&&n.length){e.next=4;break}return e.abrupt("return",null);case 4:return o=Object(a.a)(Object(a.a)({},t),{},{srcPixelBlocks:t.srcPixelBlocks.map((function(e){return e?e.toJSON():null}))}),e.next=7,this._workerThread.invoke("mosaicAndTransform",o,r);case 7:return s=e.sent,e.abrupt("return",s?new f.a(s):null);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()},1104:function(e,t,r){"use strict";r.d(t,"a",(function(){return N})),r.d(t,"b",(function(){return B})),r.d(t,"c",(function(){return P})),r.d(t,"d",(function(){return L}));var a=r(9),n=r(4),i=r(52),o=(r(54),r(1079)),s=(r(994),r(823),r(947)),l=r(941),u=(r(935),r(936)),c=r(1080),f=r(832),p=r(940),d=(r(971),r(924)),h=r(2),m=r(3),b=r(5),g=r(6),y=r(0),v=(r(13),r(14),r(15),r(1)),w=r(50),O=r(8),j=(r(11),r(19),r(20),r(28)),I=r(105),M=r(956),x=new w.a({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"}),S=function(e){Object(b.a)(r,e);var t=Object(g.a)(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).baseSymbol=null,e.colorRamp=null,e.type=null,e}return r}(j.a);Object(y.a)([Object(v.b)({type:I.a,json:{write:!0}})],S.prototype,"baseSymbol",void 0),Object(y.a)([Object(v.b)({types:M.b,json:{read:{reader:M.a},write:!0}})],S.prototype,"colorRamp",void 0),Object(y.a)([Object(v.b)({json:{read:x.read,write:x.write}})],S.prototype,"type",void 0);var k=S=Object(y.a)([Object(O.a)("esri.tasks.support.ClassificationDefinition")],S),C=new w.a({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),A=new w.a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),T=function(e){Object(b.a)(r,e);var t=Object(g.a)(r);function r(){var e;return Object(h.a)(this,r),(e=t.apply(this,arguments)).breakCount=null,e.classificationField=null,e.classificationMethod=null,e.normalizationField=null,e.normalizationType=null,e.type="class-breaks-definition",e}return Object(m.a)(r,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}}]),r}(k);Object(y.a)([Object(v.b)({json:{write:!0}})],T.prototype,"breakCount",void 0),Object(y.a)([Object(v.b)({json:{write:!0}})],T.prototype,"classificationField",void 0),Object(y.a)([Object(v.b)({type:String,json:{read:C.read,write:C.write}})],T.prototype,"classificationMethod",void 0),Object(y.a)([Object(v.b)({json:{write:!0}})],T.prototype,"normalizationField",void 0),Object(y.a)([Object(v.b)({json:{read:A.read,write:A.write}})],T.prototype,"normalizationType",void 0),Object(y.a)([Object(v.b)({value:null,json:{write:!0}})],T.prototype,"standardDeviationInterval",null),Object(y.a)([Object(v.b)()],T.prototype,"type",void 0);T=Object(y.a)([Object(O.a)("esri.tasks.support.ClassBreaksDefinition")],T);var D=o.a.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),R=o.a.fromJSON(s.a[0]);function N(e,t){var r=e.attributeTable,a=e.colormap,o=e.dataType;if("vector-uv"===o||"vector-magdir"===o)return new p.a;if(Object(n.i)(a)){var d=function(e){if(!V(e))return null;var t,r=e.attributeTable,a=e.colormap;if(Object(n.i)(r)){var i=_(r,"value"),o=E(r);"string"===o.type&&(t={},r.features.forEach((function(e){var r=e.attributes;t[r[i.name]]=o?r[o.name]:r[i.name]})))}return l.a.createFromColormap(Object(n.o)(a),t)}(e);if(Object(n.i)(d))return d}if(Object(n.i)(r)){var h=function(e,t){if(!z(e,t))return null;var r=e.attributeTable,a=E(r,t),n=_(r,"red"),o=_(r,"green"),l=_(r,"blue"),u=[],p=new Set,d=!!(n&&o&&l);if(r.features.forEach((function(e){var t=e.attributes[a.name];p.has(e.attributes[a.name])||null==t||(p.add(t),u.push(new c.a({value:e.attributes[a.name],label:e.attributes[a.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:new i.a(d?[e.attributes[n.name],e.attributes[o.name],e.attributes[l.name],1]:[0,0,0,0])}})))})),!d){var h=Object(s.b)(R,u.length);u.forEach((function(e,t){return e.symbol.color=new i.a(h[t].slice(1,4))}))}return new f.a({field:a.name,uniqueValueInfos:u})}(e);if(Object(n.i)(h))return h}return function(e,t){var r,a,i,o,s=(e=U(e,null==t?void 0:t.variableName)).bandCount,l=t||{},c=l.bandIds,f=l.stretchType;null!=(r=c)&&r.some((function(e){return e>=s}))&&(c=null);var p,d=Object(n.o)(e.statistics),h=Object(n.o)(e.histograms);s>1?(c=null!=(p=c)&&p.length?c:B(e),d=null==d?null:c.map((function(e){return d[e]})),h=null==h?null:c.map((function(e){return h[e]}))):c=[0],null==f&&(f=function(e){var t="percent-clip",r=e.pixelType,a=e.dataType,i=e.histograms,o=e.statistics;return"u8"!==r||"processed"!==a&&Object(n.i)(i)&&Object(n.i)(o)?"u8"===r||"elevation"===a||"scientific"===a?t="min-max":Object(n.i)(i)?t="percent-clip":Object(n.i)(o)&&(t="min-max",t="min-max"):t="none",t}(e));var m=!1;switch(f){case"none":m=!1;break;case"percent-clip":m=!(null!=(a=h)&&a.length);break;default:m=!(null!=(i=d)&&i.length)}var b=1===(null==(o=c)?void 0:o.length)&&"scientific"===e.dataType?D:null,g=new u.a({stretchType:f,dynamicRangeAdjustment:m,colorRamp:b,outputMin:0,outputMax:255,gamma:1===c.length?[1]:[1,1,1],useGamma:!1});return"percent-clip"===f?g.maxPercent=g.minPercent=.25:"standard-deviation"===f&&(g.numberOfStandardDeviations=2),m||("percent-clip"===f?g.histograms=h:"min-max"!==f&&"standard-deviation"!==f||(g.statistics=d)),g}(e,t)}function L(e){var t=["raster-stretch"];return V(e)&&t.push("raster-colormap"),z(e)&&t.push("unique-value"),G(e)&&t.push("class-breaks"),F(e)&&t.push("raster-shaded-relief"),function(e){var t=e.dataType;return"vector-uv"===t||"vector-magdir"===t}(e)&&t.push("vector-field"),t}function P(e,t,r){var a=["nearest","bilinear","cubic","majority"].find((function(e){return e===(null==r?void 0:r.toLowerCase())}));return"Map"===t?null!=a?a:"bilinear":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===a||"majority"===a?a:"nearest":null!=a?a:"bilinear"}function U(e,t){if(null==t)return e;var r=Object(n.o)(e.statistics),i=Object(n.o)(e.histograms),o=e.multidimensionalInfo;if(t&&Object(n.i)(o)){var s=o.variables.find((function(e){return e.name===t})),l=s.statistics,u=s.histograms;null!=l&&l.length&&(r=l),null!=u&&u.length&&(i=u)}return d.a.fromJSON(Object(a.a)(Object(a.a)({},e.toJSON()),{},{statistics:r,histograms:i}))}function B(e){var t=e.bandCount;if(1===t)return null;if(2===t)return[0];var r,a=e.keyProperties&&e.keyProperties.BandProperties;if(a&&a.length===t){var n=function(e){for(var t={},r=0;r<e.length;r++){var a,n=e[r],i=null==(a=n.BandName)?void 0:a.toLowerCase();if("red"===i)t.red=r;else if("green"===i)t.green=r;else if("blue"===i)t.blue=r;else if("nearinfrared"===i||"nearinfrared_1"===i||"nir"===i)t.nir=r;else if(n.WavelengthMax&&n.WavelengthMin){var o=n.WavelengthMin,s=n.WavelengthMax;null==t.blue&&o>=410&&o<=480&&s>=480&&s<=540?t.blue=r:null==t.green&&o>=490&&o<=560&&s>=560&&s<=610?t.green=r:null==t.red&&o>=595&&o<=670&&s>=660&&s<=730?t.red=r:null==t.nir&&o>=700&&o<=860&&s>=800&&s<=950&&(t.nir=r)}}return t}(a),i=n.red,o=n.green,s=n.blue,l=n.nir;null!=i&&null!=o&&null!=s?r=[i,o,s]:null!=l&&null!=i&&null!=o&&(r=[l,i,o])}return!r&&t>=3&&(r=[0,1,2]),r}function E(e,t){var r=e.fields.find((function(e){return"string"===e.type&&(t===e.name.toLowerCase()||e.name.toLowerCase().indexOf("class")>-1)}));return r||((r=e.fields.find((function(e){return"string"===e.type})))||(r=_(e,"value"))),r}function _(e,t){return e.fields.find((function(e){return e.name.toLowerCase()===t}))}function z(e,t){var r=e.attributeTable,a=e.bandCount;return!(!Object(n.i)(r)||a>1)&&(!t||null!=r.fields.find((function(e){return e.name.toLowerCase()===t.toLowerCase()})))}function V(e){var t=e.bandCount,r=e.colormap;return Object(n.i)(r)&&r.length&&1===t}function F(e){return"elevation"===e.dataType}function G(e){var t=e.attributeTable;return 1===e.bandCount&&(Object(n.i)(t)||Object(n.i)(e.histograms))}},790:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(12),n=r(2),i=r(3);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return e.toLowerCase().trim()}var l=function(){function e(t){if(Object(n.a)(this,e),this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],t){var r,i=[],l=Object(a.a)(t);try{for(l.s();!(r=l.n()).done;){var u=r.value,c=u&&u.name;if(c){var f=s(c);this._fieldsMap.set(c,u),this._fieldsMap.set(f,u),i.push(f),o(u)&&(this.dateFields.push(u),this._dateFieldsSet.add(u))}}}catch(p){l.e(p)}finally{l.f()}i.sort(),this.uid=i.join(",")}}return Object(i.a)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(s(e)):void 0}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t=this.get(e);if(t)return t.name}}]),e}()},794:function(e,t,r){"use strict";function a(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function i(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function o(e,t){var r=t||i(e),a=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===a?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return n}))},797:function(e,t,r){"use strict";var a,n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(14),r(15),r(1)),c=r(8),f=(r(11),r(19),r(20),r(28)),p=r(173),d=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).value=0,a.unit="milliseconds",a}return Object(i.a)(r,[{key:"toMilliseconds",value:function(){return this.value*p.b[this.unit]}},{key:"clone",value:function(){return new a({value:this.value,unit:this.unit})}}]),r}(f.a);Object(l.a)([Object(u.b)({type:Number,json:{write:!0},nonNullable:!0})],d.prototype,"value",void 0),Object(l.a)([Object(u.b)({type:p.d.apiValues,json:{type:p.d.jsonValues,read:p.d.read,write:p.d.write},nonNullable:!0})],d.prototype,"unit",void 0);var h=d=a=Object(l.a)([Object(c.a)("esri.TimeInterval")],d);t.a=h},801:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(2),n=r(3),i=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15),r(1)),u=r(8),c=(r(11),r(19),r(20),function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).refreshInterval=0,e}return Object(n.a)(r,[{key:"refresh",value:function(){this.emit("refresh")}}]),r}(e);return Object(s.a)([Object(l.b)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=Object(s.a)([Object(u.a)("esri.layers.mixins.RefreshableLayer")],t)})},804:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return b}));var a=r(26),n=r(12),i=r(4),o=r(98),s=r(33),l=r(40),u=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function c(e){return e instanceof s.a}function f(e){return e instanceof l.a?Object.keys(e.items):c(e)?Object(o.a)(e).keys():e?Object.keys(e):[]}function p(e,t){return e instanceof l.a?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function h(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=f(e),s=f(t);if(0!==o.length||0!==s.length){if(!o.length||!s.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,m=s.filter((function(e){return-1===o.indexOf(e)})),b=o.filter((function(e){return-1===s.indexOf(e)})),g=o.filter((function(r){return s.indexOf(r)>-1&&p(e,r)!==p(t,r)})).concat(m,b).sort(),y=d(e);if(y&&u.indexOf(y)>-1&&g.length)return{type:"complete",oldValue:e,newValue:t};var v,w=c(e)&&c(t),O=Object(n.a)(g);try{for(O.s();!(v=O.n()).done;){var j=v.value,I=p(e,j),M=p(t,j),x=void 0;(w||"function"!=typeof I&&"function"!=typeof M)&&I!==M&&(null==I&&null==M||(x=r&&r[j]&&"function"==typeof r[j]?r[j](I,M):"object"==typeof I&&"object"==typeof M&&d(I)===d(M)?h(I,M):{type:"complete",oldValue:I,newValue:M},Object(i.i)(x)&&(Object(i.i)(l)?l.diff[j]=x:l={type:"partial",diff:Object(a.a)({},j,x)})))}}catch(S){O.e(S)}finally{O.f()}return l}}function m(e,t){if(Object(i.h)(e))return!1;var r,a=t.split("."),o=e,s=Object(n.a)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var u=o.diff[l];if(!u)return!1;o=u}}catch(c){s.e(c)}finally{s.f()}return!0}function b(e,t){var r,a=Object(n.a)(t);try{for(a.s();!(r=a.n()).done;){if(m(e,r.value))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}function g(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:h(e,t)}},806:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return c}));var a=r(32),n=r(12),i=r(2),o=r(3),s=r(129),l=-3,u=function(){function e(t,r,a){Object(i.a)(this,e),this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",a&&(this._storage.registerRemoveFunc(this._namespace,a),this._removeFunc=!0)}return Object(o.a)(e,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)}},{key:"put",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,r,a)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;Object(i.a)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new s.a}return Object(o.a)(e,[{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs=this._removeFuncs.filter((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,r,a){var n=this._db.get(e);if(n&&(this._size-=n.size,this._db.delete(e),n.entry!==t&&this._notifyRemoved(e,n.entry)),r>this._maxSize)this._notifyRemoved(e,t);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var i=1+Math.max(a,-3)- -3;this._db.set(e,{entry:t,size:r,lifetime:i,lives:i}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r){var a=this._db.get(e);a&&a.entry===t&&(this._size-=a.size,r>this._maxSize?this._notifyRemoved(e,t):(a.size=r,this._size+=r,this._checkSizeLimit()))}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},a=new Array;this._db.forEach((function(t,n){var i=t.lifetime;a[i]=(a[i]||0)+t.size,e._users.forAll((function(e){var a=e.namespace;if(n.startsWith(a)){var i=r[a]||0;r[a]=i+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var a=r[t]||0;r[t]=a,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var i=Object.keys(r);i.forEach((function(t){return r[t]=r[t]/e._size*100})),i.sort((function(e,t){return r[t]-r[e]})),i.forEach((function(e){return t[e]=Math.round(r[e])+"% / "+n[e]}));for(var o=a.length-1;o>=0;--o){var s=a[o];s&&(t["Priority "+(o+-3-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(r,a){a.startsWith(e)&&(t._size-=r.size,t._db.delete(a),t._notifyRemoved(a,r.entry))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemoved(r,t.entry)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemoved",value:function(e,t){this._removeFuncs.forEach((function(r){e.startsWith(r[0])&&r[1](t)}))}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=Object(n.a)(this._db);try{for(t.s();!(e=t.n()).done;){var r=Object(a.a)(e.value,2),i=r[0],o=r[1];if(this._db.delete(i),o.lives<=1?(this._size-=o.size,this._notifyRemoved(i,o.entry)):(--o.lives,this._db.set(i,o)),this._size<=.9*this.maxSize)return}}catch(s){t.e(s)}finally{t.f()}}}}]),e}()},807:function(e,t,r){"use strict";var a,n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(24)),c=(r(14),r(15),r(1)),f=r(63),p=r(8),d=r(47),h=(r(11),r(19),r(20),r(28)),m=r(173),b=r(304),g=r(797),y=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).respectsDaylightSaving=!1,a.timezone=null,a}return Object(i.a)(r,[{key:"readRespectsDaylightSaving",value:function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}},{key:"clone",value:function(){var e=this.respectsDaylightSaving,t=this.timezone;return new a({respectsDaylightSaving:e,timezone:t})}}]),r}(h.a);Object(l.a)([Object(c.b)({type:Boolean,json:{write:!0}})],y.prototype,"respectsDaylightSaving",void 0),Object(l.a)([Object(f.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],y.prototype,"readRespectsDaylightSaving",null),Object(l.a)([Object(c.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],y.prototype,"timezone",void 0);var v,w=y=a=Object(l.a)([Object(p.a)("esri.layers.support.TimeReference")],y),O=v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).cumulative=!1,a.endField=null,a.fullTimeExtent=null,a.hasLiveData=!1,a.interval=null,a.startField=null,a.timeReference=null,a.trackIdField=null,a.useTime=!0,a}return Object(i.a)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),a=new Date(t.timeExtent[1]);return new b.a({start:r,end:a})}},{key:"writeFullTimeExtent",value:function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?new g.a({value:t.timeInterval,unit:m.d.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new g.a({value:t.defaultTimeInterval,unit:m.d.fromJSON(t.defaultTimeIntervalUnits)}):null}},{key:"writeInterval",value:function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}},{key:"clone",value:function(){var e=this.cumulative,t=this.endField,r=this.hasLiveData,a=this.interval,n=this.startField,i=this.timeReference,o=this.fullTimeExtent,s=this.trackIdField,l=this.useTime;return new v({cumulative:e,endField:t,hasLiveData:r,interval:a,startField:n,timeReference:Object(u.a)(i),fullTimeExtent:Object(u.a)(o),trackIdField:s,useTime:l})}}]),r}(h.a);Object(l.a)([Object(c.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],O.prototype,"cumulative",void 0),Object(l.a)([Object(c.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],O.prototype,"endField",void 0),Object(l.a)([Object(c.b)({type:b.a,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"fullTimeExtent",void 0),Object(l.a)([Object(f.a)("fullTimeExtent",["timeExtent"])],O.prototype,"readFullTimeExtent",null),Object(l.a)([Object(d.a)("fullTimeExtent")],O.prototype,"writeFullTimeExtent",null),Object(l.a)([Object(c.b)({type:Boolean,json:{write:!0}})],O.prototype,"hasLiveData",void 0),Object(l.a)([Object(c.b)({type:g.a,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"interval",void 0),Object(l.a)([Object(f.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],O.prototype,"readInterval",null),Object(l.a)([Object(d.a)("interval")],O.prototype,"writeInterval",null),Object(l.a)([Object(c.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],O.prototype,"startField",void 0),Object(l.a)([Object(c.b)({type:w,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"timeReference",void 0),Object(l.a)([Object(c.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],O.prototype,"trackIdField",void 0),Object(l.a)([Object(c.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],O.prototype,"useTime",void 0);var j=O=v=Object(l.a)([Object(p.a)("esri.layers.support.TimeInfo")],O);t.a=j},812:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var a=r(157),n=(r(130),r(213)),i=(r(308),r(309)),o=r(214),s=r(215),l=(r(216),r(178),r(276)),u=["oid","global-id"],c=["oid","global-id","guid"];function f(e,t){var r=e.displayField,i=e.editFieldsInfo,o=e.fields,u=e.objectIdField,c=e.title;if(!o)return null;var f=g({editFieldsInfo:i,fields:o,objectIdField:u},t);if(!f.length)return null;var p=function(e){var t=Object(a.l)(e),r=e.titleBase;return t?"".concat(r,": {").concat(t.trim(),"}"):r}({titleBase:c,fields:o,displayField:r}),d=[new s.a,new n.a];return new l.a({title:p,content:d,fieldInfos:f})}var p=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],d=function(e,t){var r=t.editFieldsInfo,a=t.objectIdField,n=t.visibleFieldNames;return n?n.has(e.name):!m(e.name,r)&&(!a||e.name!==a)&&!(u.indexOf(e.type)>-1)&&!p.some((function(t){return t.test(e.name)}))};function h(e,t){return"oid"===e.type?-1:"oid"===t.type?1:v(e)?-1:v(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function m(e,t){if(!e||!t)return!1;var r=t.creationDateField,a=t.creatorField,n=t.editDateField,i=t.editorField;return-1!==[r&&r.toLowerCase(),a&&a.toLowerCase(),n&&n.toLowerCase(),i&&i.toLowerCase()].indexOf(e.toLowerCase())}function b(e,t){return e.editable&&-1===c.indexOf(e.type)&&!m(e.name,t)}function g(e,t){var r=e.editFieldsInfo,a=e.fields,n=e.objectIdField;return function(e,t){var r=e;return t&&(e=e.filter((function(e){return-1===t.indexOf(e.type)}))),e===r&&(e=e.slice()),e.sort(h),e}(a,(null==t?void 0:t.ignoreFieldTypes)||w).map((function(e){return new o.a({fieldName:e.name,isEditable:b(e,r),label:e.alias,format:y(e),visible:d(e,{editFieldsInfo:r,objectIdField:n,visibleFieldNames:null==t?void 0:t.visibleFieldNames})})}))}function y(e){switch(e.type){case"small-integer":case"integer":case"single":return new i.a({digitSeparator:!0,places:0});case"double":return new i.a({digitSeparator:!0,places:2});case"date":return new i.a({dateFormat:"long-month-day-year"});default:return null}}function v(e){return"name"===(e.name&&e.name.toLowerCase())||("name"===(e.alias&&e.alias.toLowerCase())||void 0)}var w=["geometry","blob","raster","guid","xml"]},820:function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return g})),r.d(t,"d",(function(){return y})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return j})),r.d(t,"g",(function(){return m}));var a=r(12),n=r(32),i=r(174),o=r(4),s=r(14),l=r(52),u=r(75),c=r(305),f=r(794),p=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new u.a,h=Math.PI,m=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function b(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"color"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.ColorVariable"===a.declaredClass){var n="number"==typeof t,i=n?null:t,s=i&&i.attributes,u=n?t:null,c=a.field,f=a.cache,d=f.ipData,h=f.hasExpression,m=a.cache.compiledFunc;if(!c&&!h){var b=a.stops;return b&&b[0]&&b[0].color}if("number"!=typeof u)if(h){if(!Object(o.i)(r)||!Object(o.i)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,v=y.getViewInfo(g),w=y.createExecContext(i,v);if(!m){var O=y.createSyntaxTree(a.valueExpression);m=y.createFunction(O),a.cache.compiledFunc=m}u=y.executeFunction(m,w)}else s&&(u=s[c]);var j=a.normalizationField,M=s?parseFloat(s[j]):void 0;if(null!=u&&(!j||n||!isNaN(M)&&0!==M)){isNaN(M)||n||(u/=M);var x=I(u,d);if(x){var S=x[0],k=x[1],C=S===k?a.stops[S].color:l.a.blendColors(a.stops[S].color,a.stops[k].color,x[2],Object(o.i)(r)?r.color:void 0);return new l.a(C)}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function g(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"opacity"===e.type}))[0]:e;if(a)if("esri.renderers.visualVariables.OpacityVariable"===a.declaredClass){var n="number"==typeof t,i=n?null:t,s=i&&i.attributes,l=n?t:null,u=a.field,c=a.cache,f=c.ipData,d=c.hasExpression,h=a.cache.compiledFunc;if(!u&&!d){var m=a.stops;return m&&m[0]&&m[0].opacity}if("number"!=typeof l)if(d){if(Object(o.h)(r)||Object(o.h)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var b={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,y=g.getViewInfo(b),v=g.createExecContext(i,y);if(!h){var w=g.createSyntaxTree(a.valueExpression);h=g.createFunction(w),a.cache.compiledFunc=h}l=g.executeFunction(h,v)}else s&&(l=s[u]);var O=a.normalizationField,j=s?parseFloat(s[O]):void 0;if(null!=l&&(!O||n||!isNaN(j)&&0!==j)){isNaN(j)||n||(l/=j);var M=I(l,f);if(M){var x=M[0],S=M[1];if(x===S)return a.stops[x].opacity;var k=a.stops[x].opacity;return k+(a.stops[S].opacity-k)*M[2]}}}else p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function y(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"rotation"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.RotationVariable"===a.declaredClass){var n=a.axis||"heading",i="heading"===n&&"arithmetic"===a.rotationType?90:0,s="heading"===n&&"arithmetic"===a.rotationType?-1:1,l="number"==typeof t?null:t,u=l&&l.attributes,c=a.field,f=a.cache.hasExpression,d=a.cache.compiledFunc,h=0;if(!c&&!f)return h;if(f){if(Object(o.h)(r)||Object(o.h)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,g=b.getViewInfo(m),y=b.createExecContext(l,g);if(!d){var v=b.createSyntaxTree(a.valueExpression);d=b.createFunction(v),a.cache.compiledFunc=d}h=b.executeFunction(d,y)}else u&&(h=u[c]||0);return h="number"!=typeof h||isNaN(h)?null:i+s*h}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function v(e,t,r){var a="visualVariables"in e&&e.visualVariables?e.visualVariables.filter((function(e){return"size"===e.type}))[0]:e;if(a){if("esri.renderers.visualVariables.SizeVariable"===a.declaredClass){var i=function(e,t,r,a,i){switch(t.transformationType){case"additive":return function(e,t,r,a){return e+(w(t.minSize,r,a)||t.minDataValue)}(e,t,r,a);case"constant":return function(e,t,r){var a=e.stops,n=a&&a.length&&a[0].size;return null==n&&(n=e.minSize),w(n,t,r)}(t,r,a);case"clamped-linear":return function(e,t,r,a){var n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),i=w(t.minSize,r,a),s=w(t.maxSize,r,a),l=Object(o.i)(a)?a.shape:void 0;if(e<=t.minDataValue)return i;if(e>=t.maxDataValue)return s;if("area"===t.scaleBy&&l){var u="circle"===l,c=u?h*Math.pow(i/2,2):i*i,f=c+n*((u?h*Math.pow(s/2,2):s*s)-c);return u?2*Math.sqrt(f/h):Math.sqrt(f)}return i+n*(s-i)}(e,t,r,a);case"proportional":return function(e,t,r,a){var n=Object(o.i)(a)?a.shape:void 0,i=e/t.minDataValue,s=w(t.minSize,r,a),l=w(t.maxSize,r,a);return O("circle"===n?2*Math.sqrt(i*Math.pow(s/2,2)):"square"===n||"diamond"===n||"image"===n?Math.sqrt(i*Math.pow(s,2)):i*s,s,l)}(e,t,r,a);case"stops":return function(e,t,r,a,i){var o=I(e,i),s=Object(n.a)(o,3),l=s[0],u=s[1],c=s[2];if(l===u)return w(t.stops[l].size,r,a);var f=w(t.stops[l].size,r,a);return f+(w(t.stops[u].size,r,a)-f)*c}(e,t,r,a,i);case"real-world-size":return function(e,t,r,a){var n=(Object(o.i)(a)&&a.resolution?a.resolution:1)*c.a[t.valueUnit],i=w(t.minSize,r,a),s=w(t.maxSize,r,a),l=t.valueRepresentation;return O("area"===l?2*Math.sqrt(e/h)/n:"radius"===l||"distance"===l?2*e/n:e/n,i,s)}(e,t,r,a);case"identity":return e;case"unknown":return null}}(function(e,t,r){var a="number"==typeof t,n=a?null:t,i=n&&n.attributes,s=a?t:null,l=e.cache.isScaleDriven,u=e.cache.compiledFunc;if(l){var c=Object(o.i)(r)?r.scale:void 0,d=Object(o.i)(r)?r.view:void 0;s=null==c||"3d"===d?function(e){var t=null,r=null,a=e.stops;return a?(t=a[0].value,r=a[a.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):c}else if(!a)switch(e.inputValueType){case"expression":if(Object(o.h)(r)||Object(o.h)(r.arcade))return void p.error("Use of arcade expressions requires an arcade context");var h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},m=r.arcade.arcadeUtils,b=m.getViewInfo(h),g=m.createExecContext(n,b);if(!u){var y=m.createSyntaxTree(e.valueExpression);u=m.createFunction(y),e.cache.compiledFunc=u}s=m.executeFunction(u,g);break;case"field":i&&(s=i[e.field]);break;case"unknown":s=null}if(!Object(f.d)(s))return null;if(a||!e.normalizationField)return s;var v=i?parseFloat(i[e.normalizationField]):null;return Object(f.d)(v)&&0!==v?s/v:null}(a,t,r),a,t,r,a.cache.ipData);return null==i||isNaN(i)?0:i}p.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function w(e,t,r){return null==e?null:Object(f.c)(e)?v(e,t,r):Object(f.d)(e)?e:null}function O(e,t,r){return Object(f.d)(r)&&e>r?r:Object(f.d)(t)&&e<t?t:e}function j(e,t,r){if(!(e.cache.isScaleDriven&&"3d"===r||t))return null;var a={scale:t,view:r},n=w(e.minSize,d,a),i=w(e.maxSize,d,a);if(null!=n||null!=i){if(n>i){var o=i;i=n,n=o}return{minSize:n,maxSize:i}}}function I(e,t){if(t){var r=0,a=t.length-1;return t.some((function(t,n){return e<t?(a=n,!0):(r=n,!1)})),[r,a,(e-t[r])/(t[a]-t[r])]}}function M(e,t,r){var n,o=["proportional","proportional","proportional"],s=Object(a.a)(e);try{for(s.s();!(n=s.n()).done;){var l=n.value,u=l.useSymbolValue?"symbol-value":v(l,t,r);switch(l.axis){case"width":o[0]=u;break;case"depth":o[1]=u;break;case"height":o[2]=u;break;case"width-and-depth":o[0]=u,o[1]=u;break;case"all":case void 0:case null:o[0]=u,o[1]=u,o[2]=u;break;default:Object(i.a)(l.axis)}}}catch(c){s.e(c)}finally{s.f()}return o}},825:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var a=r(2),n=r(3),i=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15),r(1)),u=r(63),c=r(8),f=(r(11),r(19),r(20),r(157)),p=r(173),d=r(304),h=r(797),m=r(807);var b=function(e){var t=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return Object(n.a)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var a=r.timeOffset,n=p.d.fromJSON(r.timeOffsetUnits);return a&&n?new h.a({value:a,unit:n}):null}},{key:"timeInfo",set:function(e){Object(f.k)(e,this.fields),this._set("timeInfo",e)}}]),r}(e);return Object(s.a)([Object(l.b)({type:d.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(s.a)([Object(l.b)({type:h.a})],t.prototype,"timeOffset",void 0),Object(s.a)([Object(u.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(s.a)([Object(l.b)({value:null,type:m.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(s.a)([Object(l.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(s.a)([Object(c.a)("esri.layers.mixins.TemporalLayer")],t),t}},828:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return s})),r.d(t,"i",(function(){return u}));var a=r(32),n=r(12);function i(e,t,r){var i=function(e){for(var t=e.length;t--;)if(-1===" /-,\n".indexOf(e.charAt(t)))return!1;return!0},s=[],l=0,u=-1;do{if((u=t.indexOf("[",l))>=l){if(u>l){var c=t.substr(l,u-l);s.push([c,null,i(c)])}if(l=u+1,(u=t.indexOf("]",l))>=l){if(u>l){var f=e[t.substr(l,u-l)];f&&s.push([null,f,!1])}l=u+1}}}while(-1!==u);if(l<t.length-1){var p=t.substr(l);s.push([p,null,i(p)])}return function(e){var t,i="",l=null,u=Object(n.a)(s);try{for(u.s();!(t=u.n()).done;){var c=t.value,f=Object(a.a)(c,3),p=f[0],d=f[1],h=f[2];if(p)h?l=p:(l&&(i+=l,l=null),i+=p);else{var m=e.attributes[d];m&&(l&&(i+=l,l=null),i+=m)}}}catch(b){u.e(b)}finally{u.f()}return o(i,r)}}function o(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function s(e,t,r,a,n,i){for(var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=t/n,l=r/i,u=Math.ceil(s/2),c=Math.ceil(l/2),f=0;f<i;f++)for(var p=0;p<n;p++){for(var d=4*(p+(o?i-f-1:f)*n),h=0,m=0,b=0,g=0,y=0,v=0,w=0,O=(f+.5)*l,j=Math.floor(f*l);j<(f+1)*l;j++)for(var I=Math.abs(O-(j+.5))/c,M=(p+.5)*s,x=I*I,S=Math.floor(p*s);S<(p+1)*s;S++){var k=Math.abs(M-(S+.5))/u,C=Math.sqrt(x+k*k);C>=-1&&C<=1&&((h=2*C*C*C-3*C*C+1)>0&&(w+=h*e[(k=4*(S+j*t))+3],b+=h,e[k+3]<255&&(h=h*e[k+3]/250),g+=h*e[k],y+=h*e[k+1],v+=h*e[k+2],m+=h))}a[d]=g/m,a[d+1]=y/m,a[d+2]=v/m,a[d+3]=w/b}}function l(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function u(e){var t;return null==(t=e.data)?void 0:t.symbol}function c(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function p(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function d(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}},924:function(e,t,r){"use strict";var a=r(2),n=r(3),i=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15),r(1)),u=r(8),c=(r(11),r(19),r(20),r(28)),f=r(62),p=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).attributeTable=null,n.bandCount=null,n.colormap=null,n.extent=null,n.format=void 0,n.height=null,n.width=null,n.histograms=null,n.keyProperties={},n.multidimensionalInfo=null,n.noDataValue=null,n.pixelSize=null,n.pixelType=null,n.isPseudoSpatialReference=!1,n.spatialReference=null,n.statistics=null,n.storageInfo=null,n.transform=null,n}return Object(n.a)(r,[{key:"dataType",get:function(){var e=this.keyProperties&&this.keyProperties.DataType;return e?e.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(e){e&&this._set("nativeExtent",e)}},{key:"nativePixelSize",get:function(){var e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}}]),r}(c.a);Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"attributeTable",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"bandCount",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"colormap",void 0),Object(s.a)([Object(l.b)({type:String,readOnly:!0})],p.prototype,"dataType",null),Object(s.a)([Object(l.b)({type:f.a,json:{write:!0}})],p.prototype,"extent",void 0),Object(s.a)([Object(l.b)({type:f.a,dependsOn:["extent"],json:{write:!0}})],p.prototype,"nativeExtent",null),Object(s.a)([Object(l.b)({dependsOn:["nativeExtent"],json:{write:!0}})],p.prototype,"nativePixelSize",null),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"format",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"height",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"width",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"histograms",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"keyProperties",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"multidimensionalInfo",void 0),Object(s.a)([Object(l.b)()],p.prototype,"noDataValue",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"pixelSize",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"pixelType",void 0),Object(s.a)([Object(l.b)()],p.prototype,"isPseudoSpatialReference",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"spatialReference",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"statistics",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"storageInfo",void 0),Object(s.a)([Object(l.b)({json:{write:!0}})],p.prototype,"transform",void 0);var d=p=Object(s.a)([Object(u.a)("esri.layers.support.RasterInfo")],p);t.a=d},931:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(241),n=Object(a.b)((function(e){var t,r;t=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var a=512;a<e;)a<<=1;for(var n=new Uint8Array(a),i=0;i<r;++i)n[i]=t[i];return this.buffer=n},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var a=this.bufferLength;r>a&&(r=a)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var a=e+t;this.bufferLength<=a&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),void 0!==(r=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),n=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function o(e){throw new Error(e)}function s(e){var r=0,a=e[r++],n=e[r++];-1!=a&&-1!=n||o("Invalid header in flate stream"),8!=(15&a)&&o("Unknown compression method in flate stream"),((a<<8)+n)%31!=0&&o("Bad FCHECK in flate stream"),32&n&&o("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,t.call(this)}return s.prototype=Object.create(t.prototype),s.prototype.getBits=function(e){for(var t,r=this.codeSize,a=this.codeBuf,n=this.bytes,i=this.bytesPos;r<e;)void 0===(t=n[i++])&&o("Bad encoding in flate stream"),a|=t<<r,r+=8;return t=a&(1<<e)-1,this.codeBuf=a>>e,this.codeSize=r-=e,this.bytesPos=i,t},s.prototype.getCode=function(e){for(var t=e[0],r=e[1],a=this.codeSize,n=this.codeBuf,i=this.bytes,s=this.bytesPos;a<r;){var l;void 0===(l=i[s++])&&o("Bad encoding in flate stream"),n|=l<<a,a+=8}var u=t[n&(1<<r)-1],c=u>>16,f=65535&u;return(0==a||a<c||0==c)&&o("Bad encoding in flate stream"),this.codeBuf=n>>c,this.codeSize=a-c,this.bytesPos=s,f},s.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,a=0;a<t;++a)e[a]>r&&(r=e[a]);for(var n=1<<r,i=new Uint32Array(n),o=1,s=0,l=2;o<=r;++o,s<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==o){var c=0,f=s;for(a=0;a<o;++a)c=c<<1|1&f,f>>=1;for(a=c;a<n;a+=l)i[a]=o<<16|u;++s}return[i,r]},s.prototype.readBlock=function(){function t(e,t,r,a,n){for(var i=e.getBits(r)+a;i-- >0;)t[h++]=n}var s=this.getBits(3);if(1&s&&(this.eof=!0),0!=(s>>=1)){var l,u;if(1==s)l=n,u=i;else if(2==s){for(var c=this.getBits(5)+257,f=this.getBits(5)+1,p=this.getBits(4)+4,d=Array(e.length),h=0;h<p;)d[e[h++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),b=0,g=(h=0,c+f),y=new Array(g);h<g;){var v=this.getCode(m);16==v?t(this,y,2,3,b):17==v?t(this,y,3,3,b=0):18==v?t(this,y,7,11,b=0):y[h++]=b=v}l=this.generateHuffmanTable(y.slice(0,c)),u=this.generateHuffmanTable(y.slice(c,g))}else o("Unknown block type in flate stream");for(var w=(R=this.buffer)?R.length:0,O=this.bufferLength;;){var j=this.getCode(l);if(j<256)O+1>=w&&(w=(R=this.ensureBuffer(O+1)).length),R[O++]=j;else{if(256==j)return void(this.bufferLength=O);var I=(j=r[j-=257])>>16;I>0&&(I=this.getBits(I)),b=(65535&j)+I,j=this.getCode(u),(I=(j=a[j])>>16)>0&&(I=this.getBits(I));var M=(65535&j)+I;O+b>=w&&(w=(R=this.ensureBuffer(O+b)).length);for(var x=0;x<b;++x,++O)R[O]=R[O-M]}}}else{var S,k=this.bytes,C=this.bytesPos;void 0===(S=k[C++])&&o("Bad block header in flate stream");var A=S;void 0===(S=k[C++])&&o("Bad block header in flate stream"),A|=S<<8,void 0===(S=k[C++])&&o("Bad block header in flate stream");var T=S;void 0===(S=k[C++])&&o("Bad block header in flate stream"),(T|=S<<8)!=(65535&~A)&&o("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var D=this.bufferLength,R=this.ensureBuffer(D+A),N=D+A;this.bufferLength=N;for(var L=D;L<N;++L){if(void 0===(S=k[C++])){this.eof=!0;break}R[L]=S}this.bytesPos=C}},s}())&&(e.exports=r)}))},935:function(e,t,r){"use strict";var a,n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(24)),c=(r(14),r(15),r(1)),f=r(42),p=r(63),d=r(8),h=(r(11),r(19),r(20),r(28)),m=r(956),b=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).altitude=45,a.azimuth=315,a.colorRamp=null,a.hillshadeType="multi-directional",a.pixelSizePower=.664,a.pixelSizeFactor=.024,a.scalingType="none",a.type="raster-shaded-relief",a.zFactor=1,a}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){return Object(m.a)(e)}},{key:"clone",value:function(){return new a({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Object(u.a)(this.colorRamp)})}}]),r}(h.a);Object(l.a)([Object(c.b)({type:Number,json:{write:!0}})],b.prototype,"altitude",void 0),Object(l.a)([Object(c.b)({type:Number,json:{write:!0}})],b.prototype,"azimuth",void 0),Object(l.a)([Object(c.b)({types:m.b,json:{write:!0}})],b.prototype,"colorRamp",void 0),Object(l.a)([Object(p.a)("colorRamp")],b.prototype,"readColorRamp",null),Object(l.a)([Object(c.b)({type:["traditional","multi-directional"],json:{write:!0}})],b.prototype,"hillshadeType",void 0),Object(l.a)([Object(c.b)({type:Number,json:{write:!0}})],b.prototype,"pixelSizePower",void 0),Object(l.a)([Object(c.b)({type:Number,json:{write:!0}})],b.prototype,"pixelSizeFactor",void 0),Object(l.a)([Object(c.b)({type:["none","adjusted"],json:{write:!0}})],b.prototype,"scalingType",void 0),Object(l.a)([Object(f.a)({rasterShadedRelief:"raster-shaded-relief"})],b.prototype,"type",void 0),Object(l.a)([Object(c.b)({type:Number,json:{write:!0}})],b.prototype,"zFactor",void 0);var g=b=a=Object(l.a)([Object(d.a)("esri.renderers.RasterShadedReliefRenderer")],b);t.a=g},936:function(e,t,r){"use strict";var a,n=r(2),i=r(3),o=r(5),s=r(6),l=r(0),u=(r(13),r(24)),c=(r(14),r(15)),f=r(1),p=r(42),d=r(63),h=r(8),m=r(47),b=(r(11),r(19),r(20),r(28)),g=r(956),y=r(1024),v=a=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).colorRamp=null,a.computeGamma=!1,a.dynamicRangeAdjustment=!1,a.gamma=[],a.maxPercent=null,a.minPercent=null,a.numberOfStandardDeviations=null,a.outputMax=null,a.outputMin=null,a.sigmoidStrengthLevel=null,a.statistics=[],a.histograms=null,a.useGamma=!1,a.stretchType="none",a.type="raster-stretch",a}return Object(i.a)(r,[{key:"readColorRamp",value:function(e){if(e)return Object(g.a)(e)}},{key:"writeStatistics",value:function(e,t,r){var a;null!=(a=e)&&a.length&&(Array.isArray(e[0])||(e=e.map((function(e){return[e.min,e.max,e.avg,e.stddev]}))),t[r]=e)}},{key:"readStretchType",value:function(e,t){var r=t.stretchType;return"number"==typeof r&&(r=y.a[r]),y.b.read(r)}},{key:"clone",value:function(){return new a({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Object(u.a)(this.statistics),gamma:Object(u.a)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Object(u.a)(this.colorRamp),histograms:Object(u.a)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}}]),r}(b.a);Object(l.a)([Object(f.b)({types:g.b,json:{write:!0}})],v.prototype,"colorRamp",void 0),Object(l.a)([Object(d.a)("colorRamp")],v.prototype,"readColorRamp",null),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],v.prototype,"computeGamma",void 0),Object(l.a)([Object(f.b)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0),Object(l.a)([Object(f.b)({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0),Object(l.a)([Object(f.b)({type:c.a,json:{write:!0}})],v.prototype,"numberOfStandardDeviations",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0),Object(l.a)([Object(f.b)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0),Object(l.a)([Object(f.b)({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0),Object(l.a)([Object(f.b)({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0),Object(l.a)([Object(f.b)()],v.prototype,"histograms",void 0),Object(l.a)([Object(m.a)("statistics")],v.prototype,"writeStatistics",null),Object(l.a)([Object(f.b)({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0),Object(l.a)([Object(f.b)({type:y.b.apiValues,json:{type:y.b.jsonValues,write:y.b.write}})],v.prototype,"stretchType",void 0),Object(l.a)([Object(d.a)("stretchType",["stretchType"])],v.prototype,"readStretchType",null),Object(l.a)([Object(p.a)({rasterStretch:"raster-stretch"})],v.prototype,"type",void 0);var w=v=a=Object(l.a)([Object(h.a)("esri.renderers.RasterStretchRenderer")],v);t.a=w},940:function(e,t,r){"use strict";var a=r(10),n=r.n(a),i=r(21),o=r(12),s=r(2),l=r(3),u=r(5),c=r(6),f=r(0),p=(r(13),r(24)),d=(r(14),r(15),r(1)),h=r(50),m=r(42),b=r(63),g=r(8),y=(r(11),r(19),r(20),r(28)),v=r(37),w=(r(77),r(52)),O=r(110),j=r(254),I=r(118),M=r(149),x=r(75),S=r(1020),k=r(820),C=r(885),A=r(909),T=r(994),D=r(823),R=r(381),N=r(32),L=r(900),P=180/Math.PI,U=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},B=new Map;function E(e,t){return B.get(t)/B.get(e)||1}function _(e){return(450-e)%360}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=Object(N.a)(e,2),a=r[0],n=r[1],i=Math.sqrt(a*a+n*n),o=Math.atan2(n,a)*P;return o=(360+o)%360,"geographic"===t&&(o=_(o)),[i,o]}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=e[1];"geographic"===t&&(r=_(r)),r%=360;var a=e[0];return[a*Math.cos(r/P),a*Math.sin(r/P)]}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!U(e))return e;for(var n=e.pixels,i=e.width,o=e.height,s=i*o,l=n[0],u=n[1],c=L.a.createEmptyBand(e.pixelType,s),f=L.a.createEmptyBand(e.pixelType,s),p=0,d=0;d<o;d++)for(var h=0;h<i;h++){var m,b,g,y;"vector-uv"===t?(m=z([l[p],u[p]],r),b=Object(N.a)(m,2),c[p]=b[0],f[p]=b[1],c[p]*=a):(g=V([l[p],u[p]],r),y=Object(N.a)(g,2),c[p]=y[0],f[p]=y[1],c[p]*=a,f[p]*=a),p++}var v=new L.a({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[c,f]});return v.updateStatistics(),v}function G(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===r||!U(e))return e;for(var a=e.clone(),n=a.pixels,i=a.width,o=a.height,s=n[0],l=n[1],u=0,c=0;c<o;c++)for(var f=0;f<i;f++)"vector-uv"===t?(s[u]*=r,l[u]*=r):s[u]*=r,u++;return a.updateStatistics(),a}B.set("meter-per-second",1),B.set("kilometer-per-hour",.277778),B.set("knots",.514444),B.set("feet-per-second",.3048),B.set("mile-per-hour",.44704);var H=r(4),Z=(r(36),r(145),r(278)),J=r(18),W=(r(16),r(81),r(74)),K=r(945);r(9),r(828);Object(W.a)("esri/symbols/patterns/"),new K.a(1e3);var q;(function(){var e={}})(),new w.a([128,128,128]),new w.a("white");function Q(e,t){return X.apply(this,arguments)}function X(){return(X=Object(i.a)(n.a.mark((function e(t,a){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.symbolLayers,e.t0=o,!e.t0){e.next=5;break}return e.next=5,Object(Z.a)(o,function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=Object(i.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="extrude"===e.t0?3:"icon"===e.t0||"line"===e.t0||"text"===e.t0?5:"path"===e.t0?7:"object"===e.t0?9:11;break;case 3:return function(e,t){e.size="number"==typeof t[2]?t[2]:0}(t,a),e.abrupt("break",11);case 5:return function(e,t){var r=Y(t);Object(H.i)(r)&&(e.size=r)}(t,a),e.abrupt("break",11);case 7:return function(e,t){var r=$(t,J.a,[e.width,void 0,e.height]);e.width=ee(t[0],e.width,1,r),e.height=ee(t[2],e.height,1,r)}(t,a),e.abrupt("break",11);case 9:return e.next=11,function(){var e=Object(i.a)(n.a.mark((function e(t,a){var o,s,l,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i,o,s,l,u,c,f,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(208).then(r.bind(null,1316));case 2:return a=e.sent,e.next=5,a.computeObjectLayerResourceSize(t,10);case 5:i=e.sent,o=t.width,s=t.height,l=t.depth,u=[o,l,s],c=1,f=0;case 12:if(!(f<3)){e.next=19;break}if(null==u[f]){e.next=16;break}return c=u[f]/i[f],e.abrupt("break",19);case 16:f++,e.next=12;break;case 19:for(p=0;p<3;p++)null==u[p]&&(u[p]=i[p]*c);return e.abrupt("return",{resourceSize:i,symbolSize:u});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:o=e.sent,s=o.resourceSize,l=o.symbolSize,u=$(a,s,l),t.width=ee(a[0],l[0],s[0],u),t.depth=ee(a[1],l[1],s[1],u),t.height=ee(a[2],l[2],s[2],u);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(t,a);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(t,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t,r=Object(o.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if("number"==typeof a)return a}}catch(n){r.e(n)}finally{r.f()}return null}function $(e,t,r){for(var a=0;a<3;a++){var n=e[a];switch(n){case"symbol-value":return null!=r[a]?r[a]/t[a]:1;case"proportional":break;default:if(n&&t[a])return n/t[a]}}return 1}function ee(e,t,r,a){switch(e){case"proportional":return r*a;case"symbol-value":return null!=t?t:r;default:return e}}function te(){return(te=Object(i.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!r){e.next=2;break}return e.abrupt("return",Object(M.h)(t)?Q(t,r):void(Object(M.c)(t)&&function(e,t){var r=Y(t);if(!Object(H.h)(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":var a=e.width/e.height;a>1?(e.width=r,e.height=r*a):(e.width=r*a,e.height=r);break;case"simple-line":e.width=r;break;case"text":e.font.size=r}}(t,r)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),ae=new h.a({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),ne=new h.a({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),ie=new h.a({flow_from:"flow-from",flow_to:"flow-to"}),oe=q=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).attributeField="Magnitude",a.flowRepresentation="flow-from",a.rotationType="arithmetic",a.style="single-arrow",a.symbolTileSize=50,a.type="vector-field",a}return Object(l.a)(r,[{key:"readInputUnit",value:function(e,t){return re.has(e)?ae.fromJSON(e):null}},{key:"readOutputUnit",value:function(e,t){return re.has(e)?ae.fromJSON(e):null}},{key:"styleRenderer",get:function(){var e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}},{key:"sizeVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(o.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var a=t.value;"size"===a.type&&e.push(a)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var n=new C.a({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(n):this._set("visualVariables",[n]),e.push(n)}return e}},{key:"rotationVariables",get:function(){var e=[];if(this.visualVariables){var t,r=Object(o.a)(this.visualVariables);try{for(r.s();!(t=r.n()).done;){var a=t.value;"rotation"===a.type&&e.push(a)}}catch(i){r.e(i)}finally{r.f()}}if(0===e.length){var n=new S.a({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(n):this._set("visualVariables",[n]),e.push(n)}return e}},{key:"clone",value:function(){return new q({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:Object(p.a)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}},{key:"getGraphicsFromPixelData",value:function(){var e=Object(i.a)(n.a.mark((function e(t){var r,a,i,o,s,l,u,c,f,p,d,h,m,b,g,y=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y.length>1&&void 0!==y[1]&&y[1],a=[],i=E(this.inputUnit,this.outputUnit),o=r?F(t.pixelBlock,"vector-uv",this.rotationType,i):G(t.pixelBlock,"vector-magdir",i),s=t.extent,l=o.mask&&o.mask.length>0,c=0,f=(s.xmax-s.xmin)/o.width,p=(s.ymax-s.ymin)/o.height,d=0;case 5:if(!(d<o.height)){e.next=22;break}h=0;case 7:if(!(h<o.width)){e.next=19;break}if(u=[s.xmin+h*f+f/2,s.ymax-d*p-p/2],l&&!o.mask[c]||!u||2!==u.length){e.next=16;break}return m={Magnitude:o.pixels[0][c],Direction:o.pixels[1][c]},b=new v.a({x:u[0],y:u[1],spatialReference:s.spatialReference}),e.next=13,Object(R.a)(b);case 13:b=e.sent[0],(g=new x.a({geometry:{type:"point",x:b.x,y:b.y,spatialReference:s.spatialReference},attributes:m})).symbol=this._getVisualVariablesAppliedSymbol(g),a.push(g);case 16:h++,c++,e.next=7;break;case 19:d++,e.next=5;break;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getClassBreakInfos",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.classBreakInfos}},{key:"getDefaultSymbol",value:function(){var e;return null==(e=this.styleRenderer)?void 0:e.defaultSymbol}},{key:"_getDefaultSymbol",value:function(e){return new I.a({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new O.a({width:0}),size:20,color:e||new w.a([0,92,230])})}},{key:"_getVisualVariablesAppliedSymbol",value:function(e){if(e){var t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();var r=this.sizeVariables,a=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach((function(r){return function(e,t){return te.apply(this,arguments)}(t,Object(k.a)([r],e))})),a&&a.length){var n=e.attributes.Direction;e.attributes.Direction="flow-from"===this.flowRepresentation?n:n+180,this.rotationVariables.forEach((function(r){return function(e,t,r){if(e&&null!=t)if(Object(M.h)(e)){var a=e.symbolLayers;a&&a.forEach((function(e){if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else Object(M.c)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}(t,Object(k.d)(r,e),r.axis)}))}return t}}},{key:"_createStyleRenderer",value:function(e){var t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new D.a(t)}},{key:"_createSingleArrowRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol()}}},{key:"_createBeaufortKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new w.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}},{key:"_createBeaufortMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new w.a([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortFeetRenderer",value:function(){var e=this._getDefaultSymbol(new w.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.28084*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortMilesRenderer",value:function(){var e=this._getDefaultSymbol(new w.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 2.23694*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createBeaufortKilometersRenderer",value:function(){var e=this._getDefaultSymbol(new w.a([214,47,39])),t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((function(e){return 3.6*e})),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}},{key:"_createCurrentMeterRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new w.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}},{key:"_createCurrentKnotsRenderer",value:function(){return{defaultSymbol:this._getDefaultSymbol(new w.a([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}},{key:"_createClassifiedArrowRenderer",value:function(){var e,t=this._getDefaultSymbol(new w.a([56,168,0])),r=[0,1e-6,3.5,7,10.5,14];if(null!=(e=this.sizeVariables)&&e.length){var a=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(a&&n){var i=(n-a)/5;r=Array.from(Array(6).keys()).map((function(e){return a+i*e}))}}return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(r,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}},{key:"_createSimpleScalarRenderer",value:function(){return{defaultSymbol:j.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}},{key:"_createWindBarbsRenderer",value:function(){var e=Array.from(Array(31).keys()).map((function(e){return 5*e})),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=j.a.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),a=e.map((function(a,n){var i;if(n!==e.length-1)if(0===n)i={minValue:a,maxValue:e[n+1],symbol:r};else{var o=j.a.fromJSON({type:"esriPMS",imageData:t[n].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});i={minValue:a,maxValue:e[n+1],symbol:o}}return new T.a(i)}));return{defaultSymbol:r,classBreakInfos:a}}},{key:"_getClassBreaks",value:function(e,t){var r=this;return t.map((function(t,a){return new T.a({minValue:e[a],maxValue:e[a+1],symbol:r._getDefaultSymbol(new w.a(t))})}))}}]),r}(Object(A.a)(y.a));Object(f.a)([Object(d.b)({type:String,json:{write:!0}})],oe.prototype,"attributeField",void 0),Object(f.a)([Object(d.b)({type:ie.apiValues,json:{type:ie.jsonValues,read:{reader:ie.read},write:{writer:ie.write}}})],oe.prototype,"flowRepresentation",void 0),Object(f.a)([Object(d.b)({type:["geographic","arithmetic"],json:{write:!0}})],oe.prototype,"rotationType",void 0),Object(f.a)([Object(d.b)({type:ne.apiValues,json:{type:ne.jsonValues,read:{reader:ne.read},write:{writer:ne.write}}})],oe.prototype,"style",void 0),Object(f.a)([Object(d.b)({json:{write:!0}})],oe.prototype,"symbolTileSize",void 0),Object(f.a)([Object(d.b)({type:ae.apiValues,json:{type:ae.jsonValues,write:{writer:ae.write}}})],oe.prototype,"inputUnit",void 0),Object(f.a)([Object(b.a)("inputUnit")],oe.prototype,"readInputUnit",null),Object(f.a)([Object(d.b)({type:ae.apiValues,json:{type:ae.jsonValues,read:{reader:ae.read},write:{writer:ae.write}}})],oe.prototype,"outputUnit",void 0),Object(f.a)([Object(b.a)("outputUnit")],oe.prototype,"readOutputUnit",null),Object(f.a)([Object(m.a)({vectorField:"vector-field"})],oe.prototype,"type",void 0),Object(f.a)([Object(d.b)({type:D.a,dependsOn:["style","attributeField"]})],oe.prototype,"styleRenderer",null),Object(f.a)([Object(d.b)({type:C.a,dependsOn:["visualVariables","symbolTileSize"]})],oe.prototype,"sizeVariables",null),Object(f.a)([Object(d.b)({type:S.a,dependsOn:["visualVariables","rotationType"]})],oe.prototype,"rotationVariables",null);var se=oe=q=Object(f.a)([Object(g.a)("esri.renderers.VectorFieldRenderer")],oe);t.a=se},941:function(e,t,r){"use strict";var a=r(2),n=r(3),i=r(5),o=r(6),s=r(0),l=(r(13),r(14),r(15)),u=r(1),c=r(42),f=r(8),p=(r(11),r(19),r(20),r(28)),d=r(52),h=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(a.a)(this,r),(e=t.apply(this,arguments)).value=null,e.label=null,e.color=null,e}return r}(p.a);Object(s.a)([Object(u.b)({type:Number,json:{write:!0}})],h.prototype,"value",void 0),Object(s.a)([Object(u.b)({type:String,json:{write:!0}})],h.prototype,"label",void 0),Object(s.a)([Object(u.b)({type:d.a,json:{type:[l.a],write:!0}})],h.prototype,"color",void 0);var m,b=h=Object(s.a)([Object(f.a)("esri.renderers.support.ColormapInfo")],h),g=r(947),y=m=function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).colormapInfos=null,n.type="raster-colormap",n}return Object(n.a)(r,[{key:"clone",value:function(){return new m({colormapInfos:this.colormapInfos.map((function(e){return e.toJSON()}))})}},{key:"extractColormap",value:function(){return this.colormapInfos.map((function(e){return[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]})).sort((function(e,t){return e[0]-t[0]}))}}],[{key:"createFromColormap",value:function(e,t){if(!e)return null;function r(e){return t?t[e]||"":String(e[0])}var a=5===e[0].length,n=e.sort((function(e){return e[0][0]-e[1][0]})),i=a?n.map((function(e){return b.fromJSON({value:e[0],color:e.slice(1,5),label:r(e[0])})})):n.map((function(e){return b.fromJSON({value:e[0],color:e.slice(1,4).concat([255]),label:r(e[0])})}));return new m({colormapInfos:i})}},{key:"createFromColorramp",value:function(e){var t=Object(g.b)(e,256);return m.createFromColormap(t)}}]),r}(p.a);Object(s.a)([Object(u.b)({type:[b],json:{write:!0}})],y.prototype,"colormapInfos",void 0),Object(s.a)([Object(c.a)({rasterColormap:"raster-colormap"})],y.prototype,"type",void 0);var v=y=m=Object(s.a)([Object(f.a)("esri.renderers.RasterColormapRenderer")],y);t.a=v},945:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(2),n=r(3),i=r(806),o=function(){function e(t,r){Object(a.a)(this,e),this._storage=new i.c,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}return Object(n.a)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.clearAll()}}]),e}()},946:function(e,t,r){"use strict";function a(e){return"h"in e&&"s"in e&&"v"in e}function n(e){return"l"in e&&"a"in e&&"b"in e}function i(e){return"l"in e&&"c"in e&&"h"in e}function o(e){return"x"in e&&"y"in e&&"z"in e}r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return b}));var s=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){var r,a,n=[];if(e[0].length!==t.length)throw"dimensions do not match";var i=e.length,o=e[0].length,s=0;for(r=0;r<i;r++){for(s=0,a=0;a<o;a++)s+=e[r][a]*t[a];n.push(s)}return n}function c(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),r=u(s,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function f(e){var t=u(l,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function p(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function d(e){var t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function h(e){return p(c(e))}function m(e){return f(d(e))}function b(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:i(e)?function(e){return f(d(function(e){var t=e.l,r=e.c,a=e.h;return{l:t,a:r*Math.cos(a),b:r*Math.sin(a)}}(e)))}(e):n(e)?m(e):o(e)?f(e):a(e)?function(e){var t,r=(e.h+360)%360/60,a=e.s/100,n=e.v/100*255,i=n*a,o=i*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:i,g:o,b:0};break;case 1:t={r:o,g:i,b:0};break;case 2:t={r:0,g:i,b:o};break;case 3:t={r:0,g:o,b:i};break;case 4:t={r:o,g:0,b:i};break;case 5:case 6:t={r:i,g:0,b:o};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+n-i),t.g=Math.round(t.g+n-i),t.b=Math.round(t.b+n-i),t}(e):e}function g(e){return a(e)?e:function(e){var t=e.r,r=e.g,a=e.b,n=Math.max(t,r,a),i=n-Math.min(t,r,a),o=n,s=0===i?0:n===t?(r-a)/i%6:n===r?(a-t)/i+2:(t-r)/i+4,l=0===i?0:i/o;return s<0&&(s+=6),{h:s*=60,s:l*=100,v:o*=100/255}}(b(e))}function y(e){return n(e)?e:h(b(e))}function v(e,t){var r=h(e);return r.l*=1-t,m(r)}},947:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u}));var a=r(52),n=r(946),i=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],o={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function s(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function l(e,t,r){var a=Object(n.c)(e),i=Object(n.c)(t),o={l:a.l*(1-r)+r*i.l,a:a.a*(1-r)+r*i.a,b:a.b*(1-r)+r*i.b};return Object(n.d)(o)}function u(e){var t=function(e,t){if(e){var r,n=t||i,o=null;return"algorithmic"===e.type?n.some((function(t){if(s(e.fromColor.toRgb(),t.fromColor)&&s(e.toColor.toRgb(),t.toColor))return o=t.id,!0})):"multipart"===e.type&&n.some((function(t){if(e.colorRamps&&t.colorRamps&&e.colorRamps.length===t.colorRamps.length&&(r=e.colorRamps,!t.colorRamps.some((function(e,t){if(!s(r[t].fromColor.toRgb(),new a.a(e.fromColor).toRgb())||!s(r[t].toColor.toRgb(),new a.a(e.toColor).toRgb()))return!0})))){if(o)return!0;o=t.id}})),o}}(e);return t?o[t]:null}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&!(t<2)){for(var a,n,i,o,s,u=("toJSON"in e?e.toJSON():e),c="multipart"===u.type?u.colorRamps.length:1,f=[],p=[],d=0,h=0;h<c;h++)f[h]={start:null,end:null},f[h].start=d,f[h].end=d+1/c,d=f[h].end;for(var m=function(e){o=e/(t-1),f.forEach((function(f,d){if(o>=f.start&&(o<f.end||e===t-1&&d===c-1)){s=(o-f.start)/(f.end-f.start),"multipart"===u.type?(a=u.colorRamps[d].fromColor,n=u.colorRamps[d].toColor):(a=u.fromColor,n=u.toColor),0===e?p.push([e].concat(a.slice(0,3))):e===t-1?p.push([e].concat(n.slice(0,3))):(i=l({r:a[0],g:a[1],b:a[2]},{r:n[0],g:n[1],b:n[2]},s),p.push([e,i.r,i.g,i.b]));var h=null!=a[3]?a[3]>1?a[3]/255:a[3]:1,m=null!=n[3]?n[3]>1?n[3]/255:n[3]:1;r&&p[e].push(Math.min(255,Math.round(255*(h*(1-s)+m*s))))}}))},b=0;b<t;b++)m(b);return p}}},968:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(){var e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]}()},971:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return p}));var a=r(9),n=r(175),i=r(823),o=r(941),s=r(935),l=r(936),u=r(832),c=r(940),f={key:"type",base:null,typeMap:{"unique-value":u.a,"class-breaks":i.a,"raster-colormap":o.a,"raster-stretch":l.a,"vector-field":c.a,"raster-shaded-relief":s.a}},p=Object(a.a)(Object(a.a)({},f),{},{typeMap:Object(a.a)({},f.typeMap)});delete p.typeMap["vector-field"];var d={uniqueValue:u.a,classBreaks:i.a,rasterStretch:l.a,rasterColormap:o.a,vectorField:c.a,rasterShadedRelief:s.a};function h(e,t){if(!e)return null;var r,a=(r=e)&&d[r.type]||null;if(a){var i=new a;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new n.a("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},990:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=new Float32Array(1);function n(e){return i(Math.max(-o,Math.min(e,o)))}function i(e){return a[0]=e,a[0]}var o=i(34028234663852886e22),s={};s.defaultNoDataValue=n(-1/0),s.decode=function(e,t){var r=(t=t||{}).encodedMaskData||null===t.encodedMaskData,a=f(e,t.inputOffset||0,r),i=null!=t.noDataValue?n(t.noDataValue):s.defaultNoDataValue,o=l(a,t.pixelType||Float32Array,t.encodedMaskData,i,t.returnMask),p={width:a.width,height:a.height,pixelData:o.resultPixels,minValue:a.pixels.minValue,maxValue:a.pixels.maxValue,noDataValue:i};return o.resultMask&&(p.maskData=o.resultMask),t.returnEncodedMask&&a.mask&&(p.encodedMaskData=a.mask.bitset?a.mask.bitset:null),t.returnFileInfo&&(p.fileInfo=u(a,i),t.computeUsedBitDepths&&(p.fileInfo.bitDepths=c(a))),p};var l=function(e,t,r,a,n){var i,o,s=0,l=e.pixels.numBlocksX,u=e.pixels.numBlocksY,c=Math.floor(e.width/l),f=Math.floor(e.height/u),d=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),i=new t(e.width*e.height),n&&r&&(o=new Uint8Array(e.width*e.height));for(var h,m,b=new Float32Array(c*f),g=0;g<=u;g++){var y=g!==u?f:e.height%u;if(0!==y)for(var v=0;v<=l;v++){var w=v!==l?c:e.width%l;if(0!==w){var O,j,I,M,x=g*e.width*f+v*c,S=e.width-w,k=e.pixels.blocks[s];if(k.encoding<2?(0===k.encoding?O=k.rawData:(p(k.stuffedData,k.bitsPerPixel,k.numValidPixels,k.offset,d,b,e.pixels.maxValue),O=b),j=0):I=2===k.encoding?0:k.offset,r)for(m=0;m<y;m++){for(7&x&&(M=r[x>>3],M<<=7&x),h=0;h<w;h++)7&x||(M=r[x>>3]),128&M?(o&&(o[x]=1),i[x++]=k.encoding<2?O[j++]:I):(o&&(o[x]=0),i[x++]=a),M<<=1;x+=S}else if(k.encoding<2)for(m=0;m<y;m++){for(h=0;h<w;h++)i[x++]=O[j++];x+=S}else for(m=0;m<y;m++)if(i.fill)i.fill(I,x,x+w),x+=w+S;else{for(h=0;h<w;h++)i[x++]=I;x+=S}if(1===k.encoding&&j!==k.numValidPixels)throw"Block and Mask do not match";s++}}}return{resultPixels:i,resultMask:o}},u=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},c=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},a=0;a<t;a++){var n=e.pixels.blocks[a];0===n.encoding?r.float32=!0:1===n.encoding?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},f=function(e,t,r){var a={},n=new Uint8Array(e,t,10);if(a.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=a.fileIdentifierString.trim())throw"Unexpected file identifier string: "+a.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(a.fileVersion=i.getInt32(0,!0),a.imageType=i.getInt32(4,!0),a.height=i.getUint32(8,!0),a.width=i.getUint32(12,!0),a.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),a.mask={},a.mask.numBlocksY=i.getUint32(0,!0),a.mask.numBlocksX=i.getUint32(4,!0),a.mask.numBytes=i.getUint32(8,!0),a.mask.maxValue=i.getFloat32(12,!0),t+=16,a.mask.numBytes>0){var o=new Uint8Array(Math.ceil(a.width*a.height/8)),s=(i=new DataView(e,t,a.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)o[u++]=i.getUint8(l++);else{var c=i.getUint8(l++);for(s=-s;s--;)o[u++]=c}s=i.getInt16(l,!0),l+=2}while(l<a.mask.numBytes);if(-32768!==s||u<o.length)throw"Unexpected end of mask RLE encoding";a.mask.bitset=o,t+=a.mask.numBytes}else 0==(a.mask.numBytes|a.mask.numBlocksY|a.mask.maxValue)&&(o=new Uint8Array(Math.ceil(a.width*a.height/8)),a.mask.bitset=o);i=new DataView(e,t,16),a.pixels={},a.pixels.numBlocksY=i.getUint32(0,!0),a.pixels.numBlocksX=i.getUint32(4,!0),a.pixels.numBytes=i.getUint32(8,!0),a.pixels.maxValue=i.getFloat32(12,!0),t+=16;var f=a.pixels.numBlocksX,p=a.pixels.numBlocksY,d=f+(a.width%f>0?1:0),h=p+(a.height%p>0?1:0);a.pixels.blocks=new Array(d*h);for(var m=1e9,b=0,g=0;g<h;g++)for(var y=0;y<d;y++){var v=0,w=e.byteLength-t;i=new DataView(e,t,Math.min(10,w));var O={};a.pixels.blocks[b++]=O;var j=i.getUint8(0);if(v++,O.encoding=63&j,O.encoding>3)throw"Invalid block encoding ("+O.encoding+")";if(2!==O.encoding){if(0!==j&&2!==j){if(j>>=6,O.offsetType=j,2===j)O.offset=i.getInt8(1),v++;else if(1===j)O.offset=i.getInt16(1,!0),v+=2;else{if(0!==j)throw"Invalid block offset type";O.offset=i.getFloat32(1,!0),v+=4}if(m=Math.min(O.offset,m),1===O.encoding)if(j=i.getUint8(v),v++,O.bitsPerPixel=63&j,j>>=6,O.numValidPixelsType=j,2===j)O.numValidPixels=i.getUint8(v),v++;else if(1===j)O.numValidPixels=i.getUint16(v,!0),v+=2;else{if(0!==j)throw"Invalid valid pixel count type";O.numValidPixels=i.getUint32(v,!0),v+=4}}var I;if(t+=v,3!=O.encoding)if(0===O.encoding){var M=(a.pixels.numBytes-1)/4;if(M!==Math.floor(M))throw"uncompressed block has invalid length";I=new ArrayBuffer(4*M),new Uint8Array(I).set(new Uint8Array(e,t,4*M));for(var x=new Float32Array(I),S=0;S<x.length;S++)m=Math.min(m,x[S]);O.rawData=x,t+=4*M}else if(1===O.encoding){var k=Math.ceil(O.numValidPixels*O.bitsPerPixel/8),C=Math.ceil(k/4);I=new ArrayBuffer(4*C),new Uint8Array(I).set(new Uint8Array(e,t,k)),O.stuffedData=new Uint32Array(I),t+=k}}else t++,m=Math.min(m,0)}return a.pixels.minValue=m,a.eofOffset=t,a},p=function(e,t,r,a,n,i,o){var s,l,u,c=(1<<t)-1,f=0,p=0,d=Math.ceil((o-a)/n),h=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*h,s=0;s<r;s++){if(0===p&&(u=e[f++],p=32),p>=t)l=u>>>p-t&c,p-=t;else{var m=t-p;l=(u&c)<<m&c,l+=(u=e[f++])>>>(p=32-m)}i[s]=l<d?a+l*n:o}return i},d=s.decode},991:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(241),n=Object(a.b)((function(e){var t,r;t=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}(),void 0!==(r=function(){if(!self||!self.Uint8ClampedArray)return null;var e=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,a=799,n=3406,i=2276,o=1567,s=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function f(e,t){for(var r,a,n=0,i=[],o=16;o>0&&!e[o-1];)o--;i.push({children:[],index:0});var s,l=i[0];for(r=0;r<o;r++){for(a=0;a<e[r];a++){for((l=i.pop()).children[l.index]=t[n];l.index>0;)l=i.pop();for(l.index++,i.push(l);i.length<=r;)i.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s;n++}r+1<o&&(i.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s)}return i[0].children}function p(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function d(r,a,n,i,o,s,l,u,c){var f=n.mcusPerLine,d=n.progressive,h=a,m=0,g=0;function y(){if(g>0)return g--,m>>g&1;if(255===(m=r[a++])){var e=r[a++];if(e)throw new t("unexpected marker "+(m<<8|e).toString(16))}return g=7,m>>>7}function v(e){for(var r=e;;){if("number"==typeof(r=r[y()]))return r;if("object"!=typeof r)throw new t("invalid huffman sequence")}}function w(e){for(var t=0;e>0;)t=t<<1|y(),e--;return t}function O(e){if(1===e)return 1===y()?1:-1;var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var j=0;var I,M=0;function x(e,t,r,a,n){var i=r%f;t(e,p(e,(r/f|0)*e.v+a,i*e.h+n))}function S(e,t,r){t(e,p(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}var k,C,A,T,D,R,N=i.length;R=d?0===s?0===u?function(e,t){var r=v(e.huffmanTableDC),a=0===r?0:O(r)<<c;e.blockData[t]=e.pred+=a}:function(e,t){e.blockData[t]|=y()<<c}:0===u?function(t,r){if(j>0)j--;else for(var a=s,n=l;a<=n;){var i=v(t.huffmanTableAC),o=15&i,u=i>>4;if(0!==o){var f=e[a+=u];t.blockData[r+f]=O(o)*(1<<c),a++}else{if(u<15){j=w(u)+(1<<u)-1;break}a+=16}}}:function(r,a){for(var n,i,o=s,u=l,f=0;o<=u;){var p=e[o];switch(M){case 0:if(f=(i=v(r.huffmanTableAC))>>4,0==(n=15&i))f<15?(j=w(f)+(1<<f),M=4):(f=16,M=1);else{if(1!==n)throw new t("invalid ACn encoding");I=O(n),M=f?2:3}continue;case 1:case 2:r.blockData[a+p]?r.blockData[a+p]+=y()<<c:0==--f&&(M=2===M?3:0);break;case 3:r.blockData[a+p]?r.blockData[a+p]+=y()<<c:(r.blockData[a+p]=I<<c,M=0);break;case 4:r.blockData[a+p]&&(r.blockData[a+p]+=y()<<c)}o++}4===M&&0==--j&&(M=0)}:function(t,r){var a=v(t.huffmanTableDC),n=0===a?0:O(a);t.blockData[r]=t.pred+=n;for(var i=1;i<64;){var o=v(t.huffmanTableAC),s=15&o,l=o>>4;if(0!==s){var u=e[i+=l];t.blockData[r+u]=O(s),i++}else{if(l<15)break;i+=16}}};var L,P,U,B,E=0;for(P=1===N?i[0].blocksPerLine*i[0].blocksPerColumn:f*n.mcusPerColumn;E<P;){var _=o?Math.min(P-E,o):P;for(C=0;C<N;C++)i[C].pred=0;if(j=0,1===N)for(k=i[0],D=0;D<_;D++)S(k,R,E),E++;else for(D=0;D<_;D++){for(C=0;C<N;C++)for(U=(k=i[C]).h,B=k.v,A=0;A<B;A++)for(T=0;T<U;T++)x(k,R,E,A,T);E++}g=0,(L=b(r,a))&&L.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+L.invalid),a=L.offset);var z=L&&L.marker;if(!z||z<=65280)throw new t("marker was not found");if(!(z>=65488&&z<=65495))break;a+=2}return(L=b(r,a))&&L.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+L.invalid),a=L.offset),a-h}function h(e,c,f){var p,d,h,m,b,g,y,v,w,O,j,I,M,x,S,k,C,A=e.quantizationTable,T=e.blockData;if(!A)throw new t("missing required Quantization Table.");for(var D=0;D<64;D+=8)w=T[c+D],O=T[c+D+1],j=T[c+D+2],I=T[c+D+3],M=T[c+D+4],x=T[c+D+5],S=T[c+D+6],k=T[c+D+7],w*=A[D],0!=(O|j|I|M|x|S|k)?(O*=A[D+1],j*=A[D+2],I*=A[D+3],M*=A[D+4],x*=A[D+5],S*=A[D+6],k*=A[D+7],d=(p=(p=l*w+128>>8)+(d=l*M+128>>8)+1>>1)-d,C=(h=j)*s+(m=S)*o+128>>8,h=h*o-m*s+128>>8,y=(b=(b=u*(O-k)+128>>8)+(y=x<<4)+1>>1)-y,g=(v=(v=u*(O+k)+128>>8)+(g=I<<4)+1>>1)-g,m=(p=p+(m=C)+1>>1)-m,h=(d=d+h+1>>1)-h,C=b*i+v*n+2048>>12,b=b*n-v*i+2048>>12,v=C,C=g*a+y*r+2048>>12,g=g*r-y*a+2048>>12,y=C,f[D]=p+v,f[D+7]=p-v,f[D+1]=d+y,f[D+6]=d-y,f[D+2]=h+g,f[D+5]=h-g,f[D+3]=m+b,f[D+4]=m-b):(C=l*w+512>>10,f[D]=C,f[D+1]=C,f[D+2]=C,f[D+3]=C,f[D+4]=C,f[D+5]=C,f[D+6]=C,f[D+7]=C);for(var R=0;R<8;++R)w=f[R],0!=((O=f[R+8])|(j=f[R+16])|(I=f[R+24])|(M=f[R+32])|(x=f[R+40])|(S=f[R+48])|(k=f[R+56]))?(d=(p=4112+((p=l*w+2048>>12)+(d=l*M+2048>>12)+1>>1))-d,C=(h=j)*s+(m=S)*o+2048>>12,h=h*o-m*s+2048>>12,m=C,y=(b=(b=u*(O-k)+2048>>12)+(y=x)+1>>1)-y,g=(v=(v=u*(O+k)+2048>>12)+(g=I)+1>>1)-g,C=b*i+v*n+2048>>12,b=b*n-v*i+2048>>12,v=C,C=g*a+y*r+2048>>12,g=g*r-y*a+2048>>12,w=(w=(p=p+m+1>>1)+v)<16?0:w>=4080?255:w>>4,O=(O=(d=d+h+1>>1)+(y=C))<16?0:O>=4080?255:O>>4,j=(j=(h=d-h)+g)<16?0:j>=4080?255:j>>4,I=(I=(m=p-m)+b)<16?0:I>=4080?255:I>>4,M=(M=m-b)<16?0:M>=4080?255:M>>4,x=(x=h-g)<16?0:x>=4080?255:x>>4,S=(S=d-y)<16?0:S>=4080?255:S>>4,k=(k=p-v)<16?0:k>=4080?255:k>>4,T[c+R]=w,T[c+R+8]=O,T[c+R+16]=j,T[c+R+24]=I,T[c+R+32]=M,T[c+R+40]=x,T[c+R+48]=S,T[c+R+56]=k):(C=(C=l*w+8192>>14)<-2040?0:C>=2024?255:C+2056>>4,T[c+R]=C,T[c+R+8]=C,T[c+R+16]=C,T[c+R+24]=C,T[c+R+32]=C,T[c+R+40]=C,T[c+R+48]=C,T[c+R+56]=C)}function m(e,t){for(var r=t.blocksPerLine,a=t.blocksPerColumn,n=new Int16Array(64),i=0;i<a;i++)for(var o=0;o<r;o++)h(t,p(t,i,o),n);return t.blockData}function b(e,t,r){function a(t){return e[t]<<8|e[t+1]}var n=e.length-1,i=r<t?r:t;if(t>=n)return null;var o=a(t);if(o>=65472&&o<=65534)return{invalid:null,marker:o,offset:t};for(var s=a(i);!(s>=65472&&s<=65534);){if(++i>=n)return null;s=a(i)}return{invalid:o.toString(16),marker:s,offset:i}}return c.prototype={parse:function(r){function a(){var e=r[l]<<8|r[l+1];return l+=2,e}function n(){var e=a(),t=l+e-2,n=b(r,t,l);n&&n.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+n.invalid),t=n.offset);var i=r.subarray(l,t);return l+=i.length,i}function i(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),a=0;a<e.components.length;a++){E=e.components[a];var n=Math.ceil(Math.ceil(e.samplesPerLine/8)*E.h/e.maxH),i=Math.ceil(Math.ceil(e.scanLines/8)*E.v/e.maxV),o=t*E.h,s=r*E.v*64*(o+1);E.blockData=new Int16Array(s),E.blocksPerLine=n,E.blocksPerColumn=i}e.mcusPerLine=t,e.mcusPerColumn=r}var o,s,l=0,u=null,c=null,p=[],h=[],g=[],y=a();if(65496!==y)throw new t("SOI not found");for(y=a();65497!==y;){var v,w,O;switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var j=n();65504===y&&74===j[0]&&70===j[1]&&73===j[2]&&70===j[3]&&0===j[4]&&(u={version:{major:j[5],minor:j[6]},densityUnits:j[7],xDensity:j[8]<<8|j[9],yDensity:j[10]<<8|j[11],thumbWidth:j[12],thumbHeight:j[13],thumbData:j.subarray(14,14+3*j[12]*j[13])}),65518===y&&65===j[0]&&100===j[1]&&111===j[2]&&98===j[3]&&101===j[4]&&(c={version:j[5]<<8|j[6],flags0:j[7]<<8|j[8],flags1:j[9]<<8|j[10],transformCode:j[11]});break;case 65499:for(var I=a()+l-2;l<I;){var M=r[l++],x=new Uint16Array(64);if(M>>4==0)for(w=0;w<64;w++)x[e[w]]=r[l++];else{if(M>>4!=1)throw new t("DQT - invalid table spec");for(w=0;w<64;w++)x[e[w]]=a()}p[15&M]=x}break;case 65472:case 65473:case 65474:if(o)throw new t("Only single frame JPEGs supported");a(),(o={}).extended=65473===y,o.progressive=65474===y,o.precision=r[l++],o.scanLines=a(),o.samplesPerLine=a(),o.components=[],o.componentIds={};var S,k=r[l++],C=0,A=0;for(v=0;v<k;v++){S=r[l];var T=r[l+1]>>4,D=15&r[l+1];C<T&&(C=T),A<D&&(A=D);var R=r[l+2];O=o.components.push({h:T,v:D,quantizationId:R,quantizationTable:null}),o.componentIds[S]=O-1,l+=3}o.maxH=C,o.maxV=A,i(o);break;case 65476:var N=a();for(v=2;v<N;){var L=r[l++],P=new Uint8Array(16),U=0;for(w=0;w<16;w++,l++)U+=P[w]=r[l];var B=new Uint8Array(U);for(w=0;w<U;w++,l++)B[w]=r[l];v+=17+U,(L>>4==0?g:h)[15&L]=f(P,B)}break;case 65501:a(),s=a();break;case 65498:a();var E,_=r[l++],z=[];for(v=0;v<_;v++){var V=o.componentIds[r[l++]];E=o.components[V];var F=r[l++];E.huffmanTableDC=g[F>>4],E.huffmanTableAC=h[15&F],z.push(E)}var G=r[l++],H=r[l++],Z=r[l++],J=d(r,l,o,z,s,G,H,Z>>4,15&Z);l+=J;break;case 65535:255!==r[l]&&l--;break;default:if(255===r[l-3]&&r[l-2]>=192&&r[l-2]<=254){l-=3;break}throw new t("unknown marker "+y.toString(16))}y=a()}for(this.width=o.samplesPerLine,this.height=o.scanLines,this.jfif=u,this.eof=l,this.adobe=c,this.components=[],v=0;v<o.components.length;v++){var W=p[(E=o.components[v]).quantizationId];W&&(E.quantizationTable=W),this.components.push({output:m(0,E),scaleX:E.h/o.maxH,scaleY:E.v/o.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,a,n,i,o,s,l,u,c,f,p,d=this.width/e,h=this.height/t,m=0,b=this.components.length,g=e*t*b,y=new Uint8ClampedArray(g),v=new Uint32Array(e),w=4294967288;for(l=0;l<b;l++){for(a=(r=this.components[l]).scaleX*d,n=r.scaleY*h,m=l,p=r.output,i=r.blocksPerLine+1<<3,o=0;o<e;o++)u=0|o*a,v[o]=(u&w)<<3|7&u;for(s=0;s<t;s++)for(f=i*((u=0|s*n)&w)|(7&u)<<3,o=0;o<e;o++)y[m]=p[f+v[o]],m+=b}var O=this.decodeTransform;if(O)for(l=0;l<g;)for(u=0,c=0;u<b;u++,l++,c+=2)y[l]=(y[l]*O[c]>>8)+O[c+1];return y},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,r,a,n=0,i=e.length;n<i;n+=3)t=e[n],r=e[n+1],a=e[n+2],e[n]=t-179.456+1.402*a,e[n+1]=t+135.459-.344*r-.714*a,e[n+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,a,n,i=0,o=0,s=e.length;o<s;o+=4)t=e[o],r=e[o+1],a=e[o+2],n=e[o+3],e[i++]=r*(-660635669420364e-19*r+.000437130475926232*a-54080610064599e-18*t+.00048449797120281*n-.154362151871126)-122.67195406894+a*(-.000957964378445773*a+.000817076911346625*t-.00477271405408747*n+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*n+.48357088451265)+n*(-.000336197177618394*n+.484791561490776),e[i++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*a+.000659397001245577*t+.000426105652938837*n-.176491792462875)+a*(-.000778269941513683*a+.00130872261408275*t+.000770482631801132*n-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*n+.25802910206845)+n*(-.000318913117588328*n-.213742400323665),e[i++]=r*(-.000570115196973677*r-263409051004589e-19*a+.0020741088115012*t-.00288260236853442*n+.814272968359295)-20.810012546947+a*(-153496057440975e-19*a-.000132689043961446*t+.000560833691242812*n-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*n+.116935020465145)+n*(-.000343531996510555*n+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,r,a,n=0,i=e.length;n<i;n+=4)t=e[n],r=e[n+1],a=e[n+2],e[n]=434.456-t-1.402*a,e[n+1]=119.541-t+.344*r+.714*a,e[n+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,a,n,i=0,o=1/255,s=0,l=e.length;s<l;s+=4)t=e[s]*o,r=e[s+1]*o,a=e[s+2]*o,n=e[s+3]*o,e[i++]=255+t*(-4.387332384609988*t+54.48615194189176*r+18.82290502165302*a+212.25662451639585*n-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*a-17.873870861415444*n-5.497006427196366)+a*(-2.5217340131683033*a-21.248923337353073*n+17.5119270841813)-n*(21.86122147463605*n+189.48180835922747),e[i++]=255+t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*a+31.159100130055922*n-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*a+131.35250912493976*n-190.9453302588951)+a*(4.444339102852739*a+9.8632861493405*n-24.86741582555878)-n*(20.737325471181034*n+187.80453709719578),e[i++]=255+t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*a-.23883238689178934*n-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*a+50.606957656360734*n-112.23884253719248)+a*(.03296041114873217*a+115.60384449646641*n-193.58209356861505)-n*(22.33816807309886*n+180.12613974708367);return e},getData:function(e,r,a){if(this.numComponents>4)throw new t("Unsupported color mode");var n=this._getLinearizedBlockData(e,r);if(1===this.numComponents&&a){for(var i=n.length,o=new Uint8ClampedArray(3*i),s=0,l=0;l<i;l++){var u=n[l];o[s++]=u,o[s++]=u,o[s++]=u}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(n);if(4===this.numComponents){if(this._isColorConversionNeeded())return a?this._convertYcckToRgb(n):this._convertYcckToCmyk(n);if(a)return this._convertCmykToRgb(n)}return n}},c}())&&(e.exports=r)}))}}]);
//# sourceMappingURL=52.a842cf45.chunk.js.map