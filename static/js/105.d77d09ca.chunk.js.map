{"version":3,"sources":["../node_modules/@arcgis/core/layers/UnsupportedLayer.js","../node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","../node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","../node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","../node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"names":["n","r","resourceInfo","type","this","addResolvingPromise","p","o","i","layerType","e","t","id","title","l","c","u","readOnly","prototype","json","read","value","a","s","_propertyOriginMap","Map","_originStores","Array","_values","forEach","set","has","get","keys","delete","metadatas","store","Object","internalGet","originIdOf","originOf","propertyInvalidated","revert","propertyCommitted","f","setAtOrigin","write","toJSON","isDefaultToJSON","O","getLogger","d","arguments","resourceReferences","portalItem","paths","destroy","_get","removeOrigin","_set","itemId","portal","load","instance","supportedTypes","validateItem","supportsData","warn","layer","m","getDefault","restUrl","messages","push","String"],"mappings":"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","file":"static/js/105.d77d09ca.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{mixin as o}from\"../core/lang.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import t from\"../core/Error.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{create as p}from\"../core/promiseUtils.js\";import{schedule as i}from\"../core/scheduling.js\";import u from\"./Layer.js\";import{MultiOriginJSONMixin as c}from\"../core/MultiOriginJSONSupport.js\";import{PortalLayer as l}from\"./mixins/PortalLayer.js\";let n=class extends(l(c(u))){constructor(r){super(r),this.resourceInfo=null,this.type=\"unsupported\"}initialize(){this.addResolvingPromise(p(((r,o)=>{i((()=>{const r=this.resourceInfo&&(this.resourceInfo.layerType||this.resourceInfo.type);let e=\"Unsupported layer type\";r&&(e+=\" \"+r),o(new t(\"layer:unsupported-layer-type\",e,{layerType:r}))}))})))}read(r,o){const e={resourceInfo:r};null!=r.id&&(e.id=r.id),null!=r.title&&(e.title=r.title),super.read(e,o)}write(r){return o(r||{},this.resourceInfo,{id:this.id})}};r([e({readOnly:!0})],n.prototype,\"resourceInfo\",void 0),r([e({type:[\"show\",\"hide\"]})],n.prototype,\"listMode\",void 0),r([e({json:{read:!1},readOnly:!0,value:\"unsupported\"})],n.prototype,\"type\",void 0),n=r([s(\"esri.layers.UnsupportedLayer\")],n);var a=n;export default a;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{assumeNonNull as s}from\"../maybe.js\";import{OriginIdNum as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(e),this._values=new Map}clone(s){const i=new r,o=this._originStores[0];o&&o.forEach(((s,e)=>{i.set(e,t(s),0)}));for(let r=2;r<e;r++){const e=this._originStores[r];e&&e.forEach(((e,o)=>{s&&s.has(o)||i.set(o,t(e),r)}))}return i}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,e,r=6){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||s(this._propertyOriginMap.get(t))<=r){const s=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),s!==e}return!1}delete(t,s=6){const e=this._originStores[s];if(!e)return;const r=e.get(t);if(e.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return r}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e&&e.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{assumeNonNull as t}from\"./maybe.js\";import{getProperties as e}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{idToName as o,nameToId as i}from\"./accessorSupport/PropertyOrigin.js\";import n from\"./Accessor.js\";import{read as c}from\"./accessorSupport/read.js\";import p from\"./accessorSupport/MultiOriginStore.js\";const a=n=>{let a=class extends n{constructor(...r){super(...r);const s=t(e(this)),o=s.metadatas,i=s.store,n=new p;s.store=n,i.keys().forEach((r=>{n.set(r,i.get(r),0)})),Object.keys(o).forEach((r=>{s.internalGet(r)&&n.set(r,s.internalGet(r),0)}))}read(r,t){c(this,r,t)}getAtOrigin(r,t){const e=u(this),s=i(t);if(\"string\"==typeof r)return e.get(r,s);const o={};return r.forEach((r=>{o[r]=e.get(r,s)})),o}originOf(r){return o(this.originIdOf(r))}originIdOf(r){return u(this).originOf(r)}revert(r,t){const s=u(this),o=i(t),n=e(this);let c;c=\"string\"==typeof r?\"*\"===r?s.keys(o):[r]:r,c.forEach((r=>{n.propertyInvalidated(r),s.revert(r,o),n.propertyCommitted(r)}))}};return a=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],a),a};function u(r){return e(r).store}let f=class extends(a(n)){};f=r([s(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{a as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{getProperties as t}from\"./accessorSupport/utils.js\";import{subclass as s}from\"./accessorSupport/decorators/subclass.js\";import{nameToId as e,OriginIdNum as o}from\"./accessorSupport/PropertyOrigin.js\";import i from\"./Accessor.js\";import{write as c}from\"./accessorSupport/write.js\";import{ReadOnlyMultiOriginJSONMixin as n}from\"./ReadOnlyMultiOriginJSONSupport.js\";const p=i=>{let n=class extends i{constructor(...r){super(...r)}clear(r,t=\"user\"){return u(this).delete(r,e(t))}write(r={},t){return c(this,r=r||{},t),r}setAtOrigin(r,s,o){t(this).setAtOrigin(r,s,e(o))}removeOrigin(r){const t=u(this),s=e(r),o=t.keys(s);for(const r of o)t.originOf(r)===s&&t.set(r,t.get(r,s),6)}updateOrigin(r,t){const s=u(this),i=e(t),c=this.get(r);for(let t=i+1;t<o;++t)s.delete(r,t);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return n=r([s(\"esri.core.WriteableMultiOriginJSONSupport\")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function u(r){return t(r).store}const l=t=>{let e=class extends(p(n(t))){constructor(...r){super(...r)}};return e=r([s(\"esri.core.MultiOriginJSONSupport\")],e),e};let O=class extends(l(i)){};O=r([s(\"esri.core.MultiOriginJSONSupport\")],O);export{l as MultiOriginJSONMixin,O as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import i from\"../../core/Error.js\";import{hasSamePortal as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{throwIfAborted as l}from\"../../core/promiseUtils.js\";import m from\"../../portal/Portal.js\";import c from\"../../portal/PortalItem.js\";const n=r.getLogger(\"esri.layers.mixins.PortalLayer\"),d=r=>{let d=class extends r{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]}}destroy(){var t;null==(t=this.portalItem)||t.destroy(),this.portalItem=null}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,r,e){if(r.itemId)return new c({id:r.itemId,portal:e&&e.portal})}writePortalItem(t,r){t&&t.id&&(r.itemId=t.id)}async loadFromPortal(t,r){if(this.portalItem&&this.portalItem.id)try{const e=await import(\"../../portal/support/layersLoader.js\");return l(r),await e.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)}catch(t){throw n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${t}`),t}}read(t,r){r&&(r.layer=this),super.read(t,r)}write(t,r){const e=r&&r.portal,o=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.getDefault());return e&&o&&!p(o.restUrl,e.restUrl)?(r.messages&&r.messages.push(new i(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...r,layer:this})}};return t([e({type:c})],d.prototype,\"portalItem\",null),t([o(\"web-document\",\"portalItem\",[\"itemId\"])],d.prototype,\"readPortalItem\",null),t([a(\"web-document\",\"portalItem\",{itemId:{type:String}})],d.prototype,\"writePortalItem\",null),t([e()],d.prototype,\"resourceReferences\",void 0),d=t([s(\"esri.layers.mixins.PortalLayer\")],d),d};export{d as PortalLayer};\n"],"sourceRoot":""}